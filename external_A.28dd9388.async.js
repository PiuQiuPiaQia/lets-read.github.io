(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"7Hg+":function(e,t,n){"use strict";var r=n("k1fw"),c=n("tJVT"),a=n("PpiC"),o=n("q1tI"),i=n("Uujy"),l=n("nKUr"),u=function(e){var t=e.src,n=Object(a["a"])(e,["src"]),u=Object(o["useRef"])(null),d=Object(o["useState"])(),s=Object(c["a"])(d,2),v=s[0],f=s[1],b=Object(i["a"])(u);return Object(o["useEffect"])((function(){b&&f(t)}),[b]),Object(l["jsx"])("img",Object(r["a"])(Object(r["a"])({},n),{},{ref:u,src:v}))};t["a"]=u},DrNp:function(e,t,n){"use strict";n.r(t);var r=n("k1fw"),c=n("IujW"),a=n("vQk7"),o=n("TSYQ"),i=n.n(o),l=n("LljP"),u=n("SaTY"),d=n("7Hg+"),s=n("c1E7"),v=n.n(s),f=n("Qeum"),b=n("nKUr"),m=function(e){var t=e.content,n=e.className;return Object(u["b"])(t),Object(b["jsx"])("div",{className:i()(v.a["markdown-body"],n),children:Object(b["jsx"])(c["a"],{remarkPlugins:[[l["a"],{singleTilde:!1}]],rehypePlugins:[a["a"]],components:{img:function(e){return Object(b["jsx"])(d["a"],{src:e.src})},table:function(e){return Object(b["jsxs"])("div",{className:"content-container",children:[Object(b["jsx"])(f["a"],{}),Object(b["jsx"])("table",Object(r["a"])(Object(r["a"])({},e.node.properties),{},{children:e.children}))]})}},linkTarget:"_blank",children:t})})};t["default"]=m},LljP:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("UJmy"),c=n("iCEf"),a=(n("OsRU"),n("VLi8")),o=(n("4eTV"),n("6Q2a")),i=(n("fxNm"),n("W1L5"),n("6fJj"));n("POX/");function l(e){return Object(r["a"])([Object(c["a"])(),Object(a["a"])(e),o["a"],i["a"]])}var u=n("okN9"),d=n("brQ1"),s=n("S0A8"),v=n("Y6Wk");function f(){return[Object(u["a"])(),d["a"],s["a"],v["a"]]}function b(e){return{extensions:[Object(u["b"])(),d["b"],Object(s["b"])(e),v["b"]]}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.data();function n(e,n){var r=t[e]?t[e]:t[e]=[];r.push(n)}n("micromarkExtensions",l(e)),n("fromMarkdownExtensions",f()),n("toMarkdownExtensions",b(e))}},Qeum:function(e,t,n){"use strict";n("miYZ");var r,c=n("tsqr"),a=n("q1tI"),o=n.n(a);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,c=u(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function u(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}var d=function(e){var t=e.svgRef,n=e.title,c=l(e,["svgRef","title"]);return o.a.createElement("svg",i({width:"16px",height:"16px",viewBox:"0 0 16 16",ref:t},c),n?o.a.createElement("title",null,n):null,r||(r=o.a.createElement("g",{id:"\\u89C6\\u89C9\\u4F18\\u5316",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},o.a.createElement("g",{id:"\\u4E1A\\u52A1\\u652F\\u6301bug\\u4F18\\u5316",transform:"translate(-851.000000, -3252.000000)",fill:"#1A66FF"},o.a.createElement("g",{id:"\\u7F16\\u7EC4-2",transform:"translate(32.000000, 2977.000000)"},o.a.createElement("g",{id:"\\u7F16\\u7EC4\\u5907\\u4EFD-3",transform:"translate(585.000000, 113.000000)"},o.a.createElement("g",{id:"2-Edit/copy",transform:"translate(234.000000, 162.000000)"},o.a.createElement("g",{id:"CopyOutlined",transform:"translate(8.000000, 8.000000) scale(1, -1) translate(-8.000000, -8.000000) translate(2.166667, 2.166667)"},o.a.createElement("path",{d:"M7.83410772,0 C7.86293331,0 7.89150356,0.00248919914 7.9195308,0.00734905184 L7.83333333,0 C7.8698601,0 7.90547206,0.00391677209 7.93977212,0.0113532315 C7.96072696,0.015818147 7.98140923,0.0217085519 8.00161436,0.0288930677 C8.00811664,0.0313535169 8.01421475,0.033674939 8.02025439,0.0361108888 C8.04040065,0.0440128822 8.06022197,0.0535074365 8.07936948,0.0642847466 C8.08481196,0.0676983873 8.09053919,0.0710888145 8.09619148,0.0745887459 C8.12874232,0.0942454961 8.15896217,0.117952785 8.18636137,0.145151631 L8.14510539,0.109081879 C8.15267956,0.115130512 8.16007406,0.121394675 8.1672796,0.12786508 L8.18636137,0.145151631 L11.5189203,3.4533423 C11.6134833,3.54721377 11.6666667,3.67494652 11.6666667,3.80819066 L11.6666667,3.80819066 L11.6666667,7.16666667 C11.6666667,8.17918871 10.8458554,9 9.83333333,9 L9.83333333,9 L9,9 L9,9.83333333 C9,10.7952293 8.25921781,11.5841063 7.3170285,11.6605892 L7.16666667,11.6666667 L1.83333333,11.6666667 C0.871437394,11.6666667 0.0825604061,10.9258845 0.00607744712,9.98369517 L0,9.83333333 L0,4.5 C0,3.53810406 0.740782191,2.74922707 1.6829715,2.67274411 L1.83333333,2.66666667 L2.666,2.666 L2.66666667,1.83333333 C2.66666667,0.871437394 3.40744886,0.0825604061 4.34963816,0.00607744712 L4.5,0 Z M2.666,3.666 L1.83333333,3.66666667 C1.40849891,3.66666667 1.05791502,3.98457099 1.00649285,4.39546844 L1,4.5 L1,9.83333333 C1,10.2581678 1.31790432,10.6087516 1.72880177,10.6601738 L1.83333333,10.6666667 L7.16666667,10.6666667 C7.59150109,10.6666667 7.94208498,10.3487623 7.99350715,9.9378649 L8,9.83333333 L8,9 L4.5,9 C3.53810406,9 2.74922707,8.25921781 2.67274411,7.3170285 L2.66666667,7.16666667 L2.666,3.666 Z M7.333,0.999 L4.5,1 C4.03976271,1 3.66666667,1.37309604 3.66666667,1.83333333 L3.66666667,1.83333333 L3.66666667,7.16666667 C3.66666667,7.62690396 4.03976271,8 4.5,8 L4.5,8 L9.83333333,8 C10.2935706,8 10.6666667,7.62690396 10.6666667,7.16666667 L10.6666667,7.16666667 L10.666,4.333 L8.5,4.33333333 C7.89862327,4.33333333 7.40352014,3.87832198 7.34017917,3.29378785 L7.33333333,3.16666667 L7.333,0.999 Z M8.333,1.7 L8.33333333,3.16666667 C8.33333333,3.24030463 8.38108963,3.30278852 8.44732044,3.32483656 L8.5,3.33333333 L9.979,3.333 L8.333,1.7 Z",id:"\\u8499\\u7248"})))))))))},s=o.a.forwardRef((function(e,t){return o.a.createElement(d,i({svgRef:t},e))})),v=(n.p,n("0lfv")),f=n("nKUr"),b=function(e){var t=e.type,n=function(e){try{var n,r=e.currentTarget.parentElement;if(!r||null===(n=r.className)||void 0===n||!n.includes("content-container"))throw new Error("no wrapper");if("content"===t){var a=r.dataset.content||"";return Object(v["b"])(a),void c["default"].success("\u590d\u5236\u6210\u529f")}var o=r.cloneNode(!0);o.style.position="fixed",o.style.top="200px",o.style.left="110%",document.body.appendChild(o);var i=window.getSelection();if(!i)throw new Error("no selection");i.removeAllRanges();var l=document.createRange();if(!l)throw new Error("no range");l.selectNodeContents(o),i.addRange(l),document.execCommand("copy"),c["default"].success("\u590d\u5236\u6210\u529f"),setTimeout((function(){document.body.removeChild(o)}),100)}catch(u){console.log("error",u),c["default"].error("\u590d\u5236\u5931\u8d25")}};return Object(f["jsx"])(s,{className:"copy-handle",onClick:n})};t["a"]=b},arpG:function(e,t,n){"use strict";n.r(t);var r=n("jrin"),c=n("q1tI"),a=n("SaTY"),o=n("qOKP"),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onRectClick,n=e.scrollToCenter,r=e.run,a=void 0===r||r,i=Object(o["a"])(t);function l(e){var t,n=e.currentTarget,r=e.target;while(r&&n.contains(r)){if(r.dataset.contentId){t=r;break}r=r.parentElement}var c=n.querySelectorAll("[data-content-id].active");if(c&&c.forEach((function(e){e!==t&&e.classList.remove("active")})),t){t.classList.add("active");var a="",o=t.parentElement,i=1;while(o){var l=o.dataset.pageNumber;if(l){a=l;break}if(o=o.parentElement,i+=1,i>10)break}u({pageNumber:a,contentId:t.dataset.contentId})}}function u(e){var t=e.pageNumber,r=e.contentId,c=e.hasOwnProperty("scrollToCenter")?e.scrollToCenter:n,a=document.querySelector('#imgContainer [data-page-number="'.concat(t,'"]')),o=document.querySelectorAll("#imgContainer polygon.active");o&&o.forEach((function(e){e.classList.remove("active")})),c?null===a||void 0===a||a.scrollIntoView():null===a||void 0===a||a.scrollIntoView({block:"nearest",inline:"nearest"});var i=function(){var e=null===a||void 0===a?void 0:a.querySelector('polygon[data-content-id="'.concat(r,'"]'));return!!e&&(e.classList.add("active"),e.scrollIntoView({block:"nearest",inline:"nearest"}),!0)};requestAnimationFrame((function(){i()||requestAnimationFrame((function(){i()}))}))}function d(e){var t;null===(t=i.current)||void 0===t||t.call(i,e)}return Object(c["useEffect"])((function(){var e=document.querySelector(".result-content-body");if(e&&a)return e.addEventListener("click",l),e.addEventListener("rect-click",d),function(){e.removeEventListener("click",l),e.removeEventListener("rect-click",d)}}),[a]),{scrollToTarget:u}},l=i,u=n("oBTY"),d=n("rAM+"),s=n("GAgD"),v=n("kIma"),f=n("LP0s"),b=n("0rCn"),m=n("uE/A"),j=n("LljP"),O=function(e){var t=Object(s["a"])().use(v["a"]).use(j["a"],{singleTilde:!1}).use(f["a"],{allowDangerousHtml:!0}).use(b["a"]).processSync(e);return t.toString()},p=function(e){var t=Object(s["a"])().use(v["a"]).use(m["a"]).parse(e),n=y(t);return n.filter((function(e){return e}))},y=function e(t){var n=[];if(Array.isArray(t)){var r,c=Object(d["a"])(t);try{for(c.s();!(r=c.n()).done;){var a=r.value;/math/i.test(a.type)?n.push(a.value):Array.isArray(a.children)&&n.push.apply(n,Object(u["a"])(e(a.children)))}}catch(o){c.e(o)}finally{c.f()}}else Array.isArray(t.children)&&n.push.apply(n,Object(u["a"])(e(t.children)));return n},g=O,h=n("7Hg+"),L=n("c1E7"),C=n.n(L),k=n("Qeum"),E=n("tJVT"),w=n("TSYQ"),x=n.n(w),_=n("nKUr"),S=function(e){var t=e.editorRef,n=e.contentId,a=e.editable,o=e.value,i=e.children,l=(e.onChange,Object(c["useState"])(!1)),u=Object(E["a"])(l,2),d=u[0],s=u[1],v=Object(c["useRef"])(null);Object(c["useEffect"])((function(){var e;if(d&&(null!==(e=t.current)&&void 0!==e&&e.vditor&&v.current)){var n,r,c,a;v.current.appendChild(t.current.vditor.element),t.current.setValue(o||""),null===(n=t.current)||void 0===n||n.focus();var i=null===(r=t.current)||void 0===r||null===(c=r.vditor)||void 0===c||null===(a=c.element)||void 0===a?void 0:a.querySelector(".vditor-ir__node");i&&i.click()}}),[d]),Object(c["useEffect"])((function(){var e=document.querySelector("#content_".concat(n));document.addEventListener("click",(function(t){null!==e&&void 0!==e&&e.contains(t.target)||setTimeout((function(){s(!1)}))}))}),[]);var f=function(){a&&setTimeout((function(){var e;s(!0),null===(e=t.current)||void 0===e||e.focus()}))};return Object(_["jsxs"])("div",{id:"content_".concat(n),onClick:f,children:[Object(_["jsx"])("div",{style:{display:d?"none":"block"},children:i}),Object(_["jsx"])("div",{id:"vditor_".concat(n),ref:v,"data-editor-content-id":n,className:x()(C.a.editor,Object(r["a"])({},C.a.editMode,d))})]})},T=S,I=n("5rxK"),A=n.n(I),R=(n("Ly9C"),n("LvDl")),M=n("89Y/"),N=function(e){var t=e.data,n=e.onRectClick,o=e.dpi,i=e.dataType,u=(e.markdown,e.markdownMode),d=void 0===u?"view":u,s=e.onMarkdownChange,v=e.markdownEditorRef,f=e.onSave,b=Object(c["useRef"])(null),m=Object(c["useRef"])(null),j=function(){var e,t;return null===(e=b.current)||void 0===e||null===(t=e.vditor.element.parentElement)||void 0===t?void 0:t.dataset.editorContentId},O=function(e){var n=e.contentId,r=e.value,c=Object(R["flatten"])(t).find((function(e){var t;return(null===(t=e.content_id)||void 0===t?void 0:t.toString())===n}));c&&(null===s||void 0===s||s({value:r,contentItem:c}))};Object(c["useEffect"])((function(){var e=b.current||new A.a("vditor",{cdn:"https://static.textin.com/deps/vditor@3.10.6",mode:"ir",after:function(){b.current=e},input:function(e){var t=j();t&&O({contentId:t,value:e})},blur:function(e){var t=j();t&&O({contentId:t,value:e})},toolbar:[],toolbarConfig:{hide:!0},cache:{enable:!1}});return v.current=e,function(){var e,t;null===(e=b.current)||void 0===e||e.destroy(),b.current=null,null===(t=v.current)||void 0===t||t.destroy(),v.current=null}}),[]);var y=Object(c["useCallback"])((function(e){var t;!e.ctrlKey&&!e.metaKey||"s"!==e.key&&"S"!==e.key||(console.log("save",i,d),i===M["a"].md&&"edit"===d&&(null===(t=b.current)||void 0===t||t.blur(),setTimeout((function(){null===f||void 0===f||f()})),e.preventDefault()))}),[i,d,f]);Object(c["useEffect"])((function(){return document.addEventListener("keydown",y,!1),function(){document.removeEventListener("keydown",y,!1)}}),[y]);var L=Object(c["useMemo"])((function(){if(!Array.isArray(t)){var e=t?g(t):"";return Object(_["jsx"])("div",{dangerouslySetInnerHTML:{__html:e}})}var n=t.map((function(e,t){var n=Array.isArray(e)?e.map((function(e){if("catalog"===e.type)return null;var t=e.text,n=e.text;if("formula"===i&&t){var r=p(t);return Object(_["jsx"])("div",{"data-content-id":e.content_id,children:r.map((function(t,n){return Object(_["jsxs"])("div",{className:"content-container formula-item","data-content":t,children:[Object(_["jsx"])(k["a"],{type:"content"}),Object(_["jsx"])("div",{children:"$"+t+"$"})]},"".concat(e.content_id,"_").concat(n))}))},e.content_id)}if("image"===e.type&&e.image_url){var c=o?96/o:void 0;return Object(_["jsxs"])("div",{id:"content_".concat(e.content_id.toString()),"data-content-id":e.content_id,className:"content-container",children:[Object(_["jsx"])(k["a"],{}),Object(_["jsx"])(h["a"],{src:e.image_url,style:{zoom:c}})]},e.content_id)}var a="number"===typeof e.outline_level&&-1!==e.outline_level;if(a){var l="h".concat(e.outline_level+1);n="".concat("#".repeat(e.outline_level+1)," ").concat(t),t="<".concat(l,">").concat(t,"</").concat(l,">")}return t&&!/^<[a-z]+/.test(t)&&(t=g(t)),"table"===e.type?Object(_["jsx"])(T,{editorRef:b,contentId:String(e.content_id),editable:i===M["a"].md&&"edit"===d,value:n,onChange:O,children:Object(_["jsxs"])("div",{"data-content-id":e.content_id,className:"content-container",children:[Object(_["jsx"])(k["a"],{}),Object(_["jsx"])("div",{dangerouslySetInnerHTML:{__html:t||""}})]},e.content_id)},e.content_id):Object(_["jsx"])(T,{editorRef:b,contentId:String(e.content_id),editable:i===M["a"].md&&"edit"===d,value:n,onChange:O,children:Object(_["jsx"])("div",{"data-content-id":e.content_id,dangerouslySetInnerHTML:{__html:t||""}},e.content_id)},e.content_id)})):[];return Object(_["jsx"])("div",{"data-page-number":t+1,children:n},t)}));return n}),[t,d]);return l({onRectClick:n}),Object(a["b"])(L),Object(_["jsxs"])("div",{className:x()(C.a["markdown-body"],Object(r["a"])({},C.a.markdownBodyEditMode,"edit"===d)),children:[Object(_["jsx"])("div",{id:"markdownContent",ref:m,children:L}),Object(_["jsx"])("div",{id:"vditor",className:x()(C.a.editor)})]})};t["default"]=N},c1E7:function(e,t,n){e.exports={"markdown-body":"markdown-body--2IxZQ",editor:"editor--19b-b",markdownBodyEditMode:"markdownBodyEditMode--2iAql",editMode:"editMode--1-Q7C"}}}]);