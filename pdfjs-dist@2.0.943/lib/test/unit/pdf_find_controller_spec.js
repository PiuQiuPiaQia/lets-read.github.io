"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_test_utils=require("./test_utils"),_ui_utils=require("../../web/ui_utils"),_api=require("../../display/api"),_pdf_find_controller=require("../../web/pdf_find_controller"),_pdf_link_service=require("../../web/pdf_link_service");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var MockLinkService=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._page=1,e._pdfDocument=null,e}return _inherits(t,e),_createClass(t,[{key:"setDocument",value:function(e){this._pdfDocument=e}},{key:"pagesCount",get:function(){return this._pdfDocument.numPages}},{key:"page",get:function(){return this._page},set:function(e){this._page=e}}]),t}(_pdf_link_service.SimpleLinkService);describe("pdf_find_controller",(function(){var e=void 0,t=void 0;beforeEach((function(n){var r=(0,_api.getDocument)((0,_test_utils.buildGetDocumentParams)("tracemonkey.pdf"));r.promise.then((function(r){e=new _ui_utils.EventBus;var i=new MockLinkService;i.setDocument(r),t=new _pdf_find_controller.PDFFindController({linkService:i,eventBus:e}),t.setDocument(r),n()}))})),afterEach((function(){e=null,t=null})),it("performs a basic search",(function(n){t.executeCommand("find",{query:"Dynamic"});var r=[11,5,0,3,0,0,0,1,1,1,0,3,4,4],i=r.length,o=r.reduce((function(e,t){return e+t}));e.on("updatefindmatchescount",(function u(c){if(t.pageMatches.length===i){e.off("updatefindmatchescount",u),expect(c.matchesCount.total).toBe(o);for(var a=0;a<i;a++)expect(t.pageMatches[a].length).toEqual(r[a]);n()}}))}))}));