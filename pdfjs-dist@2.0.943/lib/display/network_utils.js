"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateResponseStatus=exports.validateRangeRequestCapabilities=exports.extractFilenameFromHeader=exports.createResponseStatusError=void 0;var _util=require("../shared/util"),_content_disposition=require("./content_disposition");function validateRangeRequestCapabilities(e){var t=e.getResponseHeader,s=e.isHttp,n=e.rangeChunkSize,r=e.disableRange;(0,_util.assert)(n>0,"Range chunk size must be larger than zero");var i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t("Content-Length"),10);if(!Number.isInteger(a))return i;if(i.suggestedLength=a,a<=2*n)return i;if(r||!s)return i;if("bytes"!==t("Accept-Ranges"))return i;var o=t("Content-Encoding")||"identity";return"identity"!==o||(i.allowRangeRequests=!0),i}function extractFilenameFromHeader(e){var t=e("Content-Disposition");if(t){var s=(0,_content_disposition.getFilenameFromContentDispositionHeader)(t);if(/\.pdf$/i.test(s))return s}return null}function createResponseStatusError(e,t){return 404===e||0===e&&/^file:/.test(t)?new _util.MissingPDFException('Missing PDF "'+t+'".'):new _util.UnexpectedResponseException("Unexpected server response ("+e+') while retrieving PDF "'+t+'".',e)}function validateResponseStatus(e){return 200===e||206===e}exports.createResponseStatusError=createResponseStatusError,exports.extractFilenameFromHeader=extractFilenameFromHeader,exports.validateRangeRequestCapabilities=validateRangeRequestCapabilities,exports.validateResponseStatus=validateResponseStatus;