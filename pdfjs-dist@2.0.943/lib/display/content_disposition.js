"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,r){var t=[],n=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)if(t.push(o.value),r&&t.length===r)break}catch(f){i=!0,a=f}finally{try{!n&&c["return"]&&c["return"]()}finally{if(i)throw a}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function getFilenameFromContentDispositionHeader(e){var r=!0,t=o("filename\\*","i").exec(e);if(t){t=t[1];var n=l(t);return n=unescape(n),n=s(n),n=d(n),f(n)}if(t=u(e),t){var i=d(t);return f(i)}if(t=o("filename","i").exec(e),t){t=t[1];var a=l(t);return a=d(a),f(a)}function o(e,r){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',r)}function c(e,t){if(e){if(!/^[\x00-\xFF]+$/.test(t))return t;try{for(var n=new TextDecoder(e,{fatal:!0}),i=new Array(t.length),a=0;a<t.length;++a)i[a]=t.charCodeAt(a);t=n.decode(new Uint8Array(i)),r=!1}catch(o){if(/^utf-?8$/i.test(e))try{t=decodeURIComponent(escape(t)),r=!1}catch(c){}}}return t}function f(e){return r&&/[\x80-\xff]/.test(e)&&(e=c("utf-8",e),r&&(e=c("iso-8859-1",e))),e}function u(e){var r=[],t=void 0,n=o("filename\\*((?!0\\d)\\d+)(\\*?)","ig");while(null!==(t=n.exec(e))){var i=t,a=_slicedToArray(i,4),c=a[1],f=a[2],u=a[3];if(c=parseInt(c,10),c in r){if(0===c)break}else r[c]=[f,u]}for(var d=[],p=0;p<r.length;++p){if(!(p in r))break;var v=_slicedToArray(r[p],2),h=v[0],x=v[1];x=l(x),h&&(x=unescape(x),0===p&&(x=s(x))),d.push(x)}return d.join("")}function l(e){if('"'===e.charAt(0)){for(var r=e.slice(1).split('\\"'),t=0;t<r.length;++t){var n=r[t].indexOf('"');-1!==n&&(r[t]=r[t].slice(0,n),r.length=t+1),r[t]=r[t].replace(/\\(.)/g,"$1")}e=r.join('"')}return e}function s(e){var r=e.indexOf("'");if(-1===r)return e;var t=e.slice(0,r),n=e.slice(r+1),i=n.replace(/^[^']*'/,"");return c(t,i)}function d(e){return"=?"!==e.slice(0,2)||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,r,t,n){if("q"===t||"Q"===t)return n=n.replace(/_/g," "),n=n.replace(/=([0-9a-fA-F]{2})/g,(function(e,r){return String.fromCharCode(parseInt(r,16))})),c(r,n);try{n=atob(n)}catch(i){}return c(r,n)}))}return""}exports.getFilenameFromContentDispositionHeader=getFilenameFromContentDispositionHeader;