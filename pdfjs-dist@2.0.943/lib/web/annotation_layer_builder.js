"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultAnnotationLayerFactory=exports.AnnotationLayerBuilder=void 0;var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),_pdf=require("../pdf"),_ui_utils=require("./ui_utils"),_pdf_link_service=require("./pdf_link_service");function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var AnnotationLayerBuilder=function(){function e(n){var t=n.pageDiv,i=n.pdfPage,a=n.linkService,r=n.downloadManager,o=n.imageResourcesPath,l=void 0===o?"":o,s=n.renderInteractiveForms,d=void 0!==s&&s,c=n.l10n,u=void 0===c?_ui_utils.NullL10n:c;_classCallCheck(this,e),this.pageDiv=t,this.pdfPage=i,this.linkService=a,this.downloadManager=r,this.imageResourcesPath=l,this.renderInteractiveForms=d,this.l10n=u,this.div=null,this._cancelled=!1}return _createClass(e,[{key:"render",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";this.pdfPage.getAnnotations({intent:t}).then((function(t){if(!n._cancelled){var i={viewport:e.clone({dontFlip:!0}),div:n.div,annotations:t,page:n.pdfPage,imageResourcesPath:n.imageResourcesPath,renderInteractiveForms:n.renderInteractiveForms,linkService:n.linkService,downloadManager:n.downloadManager};if(n.div)_pdf.AnnotationLayer.update(i);else{if(0===t.length)return;n.div=document.createElement("div"),n.div.className="annotationLayer",n.pageDiv.appendChild(n.div),i.div=n.div,_pdf.AnnotationLayer.render(i),n.l10n.translate(n.div)}}}))}},{key:"cancel",value:function(){this._cancelled=!0}},{key:"hide",value:function(){this.div&&this.div.setAttribute("hidden","true")}}]),e}(),DefaultAnnotationLayerFactory=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"createAnnotationLayerBuilder",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_ui_utils.NullL10n;return new AnnotationLayerBuilder({pageDiv:e,pdfPage:n,imageResourcesPath:t,renderInteractiveForms:i,linkService:new _pdf_link_service.SimpleLinkService,l10n:a})}}]),e}();exports.AnnotationLayerBuilder=AnnotationLayerBuilder,exports.DefaultAnnotationLayerFactory=DefaultAnnotationLayerFactory;