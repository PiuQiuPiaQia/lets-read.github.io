"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PasswordPrompt=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_ui_utils=require("./ui_utils"),_pdf=require("../pdf");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var PasswordPrompt=function(){function e(t,n){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_ui_utils.NullL10n;_classCallCheck(this,e),this.overlayName=t.overlayName,this.container=t.container,this.label=t.label,this.input=t.input,this.submitButton=t.submitButton,this.cancelButton=t.cancelButton,this.overlayManager=n,this.l10n=i,this.updateCallback=null,this.reason=null,this.submitButton.addEventListener("click",this.verify.bind(this)),this.cancelButton.addEventListener("click",this.close.bind(this)),this.input.addEventListener("keydown",(function(e){13===e.keyCode&&a.verify()})),this.overlayManager.register(this.overlayName,this.container,this.close.bind(this),!0)}return _createClass(e,[{key:"open",value:function(){var e=this;this.overlayManager.open(this.overlayName).then((function(){e.input.focus();var t=void 0;t=e.reason===_pdf.PasswordResponses.INCORRECT_PASSWORD?e.l10n.get("password_invalid",null,"Invalid password. Please try again."):e.l10n.get("password_label",null,"Enter the password to open this PDF file."),t.then((function(t){e.label.textContent=t}))}))}},{key:"close",value:function(){var e=this;this.overlayManager.close(this.overlayName).then((function(){e.input.value=""}))}},{key:"verify",value:function(){var e=this.input.value;if(e&&e.length>0)return this.close(),this.updateCallback(e)}},{key:"setUpdateCallback",value:function(e,t){this.updateCallback=e,this.reason=t}}]),e}();exports.PasswordPrompt=PasswordPrompt;