(function(e,r){for(var t in r)e[t]=r[t]})(exports,function(e){var r={};function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=7)}([function(e,r,t){"use strict";var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=t(1),a=n.assert;function i(e){return"string"===typeof e||"symbol"===("undefined"===typeof e?"undefined":o(e))}function s(e,r,t){if("function"!==typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,r,t)}r.typeIsObject=function(e){return"object"===("undefined"===typeof e?"undefined":o(e))&&null!==e||"function"===typeof e},r.createDataProperty=function(e,t,o){a(r.typeIsObject(e)),Object.defineProperty(e,t,{value:o,writable:!0,enumerable:!0,configurable:!0})},r.createArrayFromList=function(e){return e.slice()},r.ArrayBufferCopy=function(e,r,t,o,n){new Uint8Array(e).set(new Uint8Array(t,o,n),r)},r.CreateIterResultObject=function(e,r){a("boolean"===typeof r);var t={};return Object.defineProperty(t,"value",{value:e,enumerable:!0,writable:!0,configurable:!0}),Object.defineProperty(t,"done",{value:r,enumerable:!0,writable:!0,configurable:!0}),t},r.IsFiniteNonNegativeNumber=function(e){return!Number.isNaN(e)&&(e!==1/0&&!(e<0))},r.InvokeOrNoop=function(e,r,t){a(void 0!==e),a(i(r)),a(Array.isArray(t));var o=e[r];if(void 0!==o)return s(o,e,t)},r.PromiseInvokeOrNoop=function(e,t,o){a(void 0!==e),a(i(t)),a(Array.isArray(o));try{return Promise.resolve(r.InvokeOrNoop(e,t,o))}catch(n){return Promise.reject(n)}},r.PromiseInvokeOrPerformFallback=function(e,r,t,o,n){a(void 0!==e),a(i(r)),a(Array.isArray(t)),a(Array.isArray(n));var l=void 0;try{l=e[r]}catch(u){return Promise.reject(u)}if(void 0===l)return o.apply(null,n);try{return Promise.resolve(s(l,e,t))}catch(d){return Promise.reject(d)}},r.TransferArrayBuffer=function(e){return e.slice()},r.ValidateAndNormalizeHighWaterMark=function(e){if(e=Number(e),Number.isNaN(e)||e<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return e},r.ValidateAndNormalizeQueuingStrategy=function(e,t){if(void 0!==e&&"function"!==typeof e)throw new TypeError("size property of a queuing strategy must be a function");return t=r.ValidateAndNormalizeHighWaterMark(t),{size:e,highWaterMark:t}}},function(e,r,t){"use strict";function o(e){e&&e.constructor===n&&setTimeout((function(){throw e}),0)}function n(e){this.name="AssertionError",this.message=e||"",this.stack=(new Error).stack}function a(e,r){if(!e)throw new n(r)}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,e.exports={rethrowAssertionErrorRejection:o,AssertionError:n,assert:a}},function(e,r,t){"use strict";var o=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}();function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var a=t(0),i=a.InvokeOrNoop,s=a.PromiseInvokeOrNoop,l=a.ValidateAndNormalizeQueuingStrategy,u=a.typeIsObject,d=t(1),c=d.assert,_=d.rethrowAssertionErrorRejection,f=t(3),h=f.DequeueValue,b=f.EnqueueValueWithSize,m=f.PeekQueueValue,v=f.ResetQueue,y=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.size,a=t.highWaterMark,i=void 0===a?1:a;n(this,e),this._state="writable",this._storedError=void 0,this._writer=void 0,this._writableStreamController=void 0,this._writeRequests=[],this._inFlightWriteRequest=void 0,this._closeRequest=void 0,this._inFlightCloseRequest=void 0,this._pendingAbortRequest=void 0,this._backpressure=!1;var s=r.type;if(void 0!==s)throw new RangeError("Invalid type is specified");this._writableStreamController=new U(this,r,o,i),this._writableStreamController.__startSteps()}return o(e,[{key:"abort",value:function(e){return!1===w(this)?Promise.reject(ae("abort")):!0===S(this)?Promise.reject(new TypeError("Cannot abort a stream that already has a writer")):g(this,e)}},{key:"getWriter",value:function(){if(!1===w(this))throw ae("getWriter");return p(this)}},{key:"locked",get:function(){if(!1===w(this))throw ae("locked");return S(this)}}]),e}();function p(e){return new F(e)}function w(e){return!!u(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")}function S(e){return c(!0===w(e),"IsWritableStreamLocked should only be used on known writable streams"),void 0!==e._writer}function g(e,r){var t=e._state;if("closed"===t)return Promise.resolve(void 0);if("errored"===t)return Promise.reject(e._storedError);var o=new TypeError("Requested to abort");if(void 0!==e._pendingAbortRequest)return Promise.reject(o);c("writable"===t||"erroring"===t,"state must be writable or erroring");var n=!1;"erroring"===t&&(n=!0,r=void 0);var a=new Promise((function(t,o){e._pendingAbortRequest={_resolve:t,_reject:o,_reason:r,_wasAlreadyErroring:n}}));return!1===n&&q(e,o),a}function P(e){c(!0===S(e)),c("writable"===e._state);var r=new Promise((function(r,t){var o={_resolve:r,_reject:t};e._writeRequests.push(o)}));return r}function R(e,r){var t=e._state;"writable"!==t?(c("erroring"===t),k(e)):q(e,r)}function q(e,r){c(void 0===e._storedError,"stream._storedError === undefined"),c("writable"===e._state,"state must be writable");var t=e._writableStreamController;c(void 0!==t,"controller must not be undefined"),e._state="erroring",e._storedError=r;var o=e._writer;void 0!==o&&x(o,r),!1===O(e)&&!0===t._started&&k(e)}function k(e){c("erroring"===e._state,"stream._state === erroring"),c(!1===O(e),"WritableStreamHasOperationMarkedInFlight(stream) === false"),e._state="errored",e._writableStreamController.__errorSteps();for(var r=e._storedError,t=0;t<e._writeRequests.length;t++){var o=e._writeRequests[t];o._reject(r)}if(e._writeRequests=[],void 0!==e._pendingAbortRequest){var n=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,!0===n._wasAlreadyErroring)return n._reject(r),void I(e);var a=e._writableStreamController.__abortSteps(n._reason);a.then((function(){n._resolve(),I(e)}),(function(r){n._reject(r),I(e)}))}else I(e)}function T(e){c(void 0!==e._inFlightWriteRequest),e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function E(e,r){c(void 0!==e._inFlightWriteRequest),e._inFlightWriteRequest._reject(r),e._inFlightWriteRequest=void 0,c("writable"===e._state||"erroring"===e._state),R(e,r)}function C(e){c(void 0!==e._inFlightCloseRequest),e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0;var r=e._state;c("writable"===r||"erroring"===r),"erroring"===r&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";var t=e._writer;void 0!==t&&fe(t),c(void 0===e._pendingAbortRequest,"stream._pendingAbortRequest === undefined"),c(void 0===e._storedError,"stream._storedError === undefined")}function j(e,r){c(void 0!==e._inFlightCloseRequest),e._inFlightCloseRequest._reject(r),e._inFlightCloseRequest=void 0,c("writable"===e._state||"erroring"===e._state),void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(r),e._pendingAbortRequest=void 0),R(e,r)}function W(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function O(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}function z(e){c(void 0===e._inFlightCloseRequest),c(void 0!==e._closeRequest),e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function A(e){c(void 0===e._inFlightWriteRequest,"there must be no pending write request"),c(0!==e._writeRequests.length,"writeRequests must not be empty"),e._inFlightWriteRequest=e._writeRequests.shift()}function I(e){c("errored"===e._state,'_stream_.[[state]] is `"errored"`'),void 0!==e._closeRequest&&(c(void 0===e._inFlightCloseRequest),e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var r=e._writer;void 0!==r&&(ce(r,e._storedError),r._closedPromise.catch((function(){})))}function D(e,r){c("writable"===e._state),c(!1===W(e));var t=e._writer;void 0!==t&&r!==e._backpressure&&(!0===r?ye(t):(c(!1===r),we(t))),e._backpressure=r}e.exports={AcquireWritableStreamDefaultWriter:p,IsWritableStream:w,IsWritableStreamLocked:S,WritableStream:y,WritableStreamAbort:g,WritableStreamDefaultControllerError:ne,WritableStreamDefaultWriterCloseWithErrorPropagation:V,WritableStreamDefaultWriterRelease:Y,WritableStreamDefaultWriterWrite:H,WritableStreamCloseQueuedOrInFlight:W};var F=function(){function e(r){if(n(this,e),!1===w(r))throw new TypeError("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===S(r))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=r,r._writer=this;var t=r._state;if("writable"===t)!1===W(r)&&!0===r._backpressure?he(this):me(this),le(this);else if("erroring"===t)be(this,r._storedError),this._readyPromise.catch((function(){})),le(this);else if("closed"===t)me(this),de(this);else{c("errored"===t,"state must be errored");var o=r._storedError;be(this,o),this._readyPromise.catch((function(){})),ue(this,o),this._closedPromise.catch((function(){}))}}return o(e,[{key:"abort",value:function(e){return!1===B(this)?Promise.reject(ie("abort")):void 0===this._ownerWritableStream?Promise.reject(se("abort")):N(this,e)}},{key:"close",value:function(){if(!1===B(this))return Promise.reject(ie("close"));var e=this._ownerWritableStream;return void 0===e?Promise.reject(se("close")):!0===W(e)?Promise.reject(new TypeError("cannot close an already-closing stream")):L(this)}},{key:"releaseLock",value:function(){if(!1===B(this))throw ie("releaseLock");var e=this._ownerWritableStream;void 0!==e&&(c(void 0!==e._writer),Y(this))}},{key:"write",value:function(e){return!1===B(this)?Promise.reject(ie("write")):void 0===this._ownerWritableStream?Promise.reject(se("write to")):H(this,e)}},{key:"closed",get:function(){return!1===B(this)?Promise.reject(ie("closed")):this._closedPromise}},{key:"desiredSize",get:function(){if(!1===B(this))throw ie("desiredSize");if(void 0===this._ownerWritableStream)throw se("desiredSize");return Q(this)}},{key:"ready",get:function(){return!1===B(this)?Promise.reject(ie("ready")):this._readyPromise}}]),e}();function B(e){return!!u(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")}function N(e,r){var t=e._ownerWritableStream;return c(void 0!==t),g(t,r)}function L(e){var r=e._ownerWritableStream;c(void 0!==r);var t=r._state;if("closed"===t||"errored"===t)return Promise.reject(new TypeError("The stream (in "+t+" state) is not in the writable state and cannot be closed"));c("writable"===t||"erroring"===t),c(!1===W(r));var o=new Promise((function(e,t){var o={_resolve:e,_reject:t};r._closeRequest=o}));return!0===r._backpressure&&"writable"===t&&we(e),G(r._writableStreamController),o}function V(e){var r=e._ownerWritableStream;c(void 0!==r);var t=r._state;return!0===W(r)||"closed"===t?Promise.resolve():"errored"===t?Promise.reject(r._storedError):(c("writable"===t||"erroring"===t),L(e))}function M(e,r){"pending"===e._closedPromiseState?ce(e,r):_e(e,r),e._closedPromise.catch((function(){}))}function x(e,r){"pending"===e._readyPromiseState?ve(e,r):pe(e,r),e._readyPromise.catch((function(){}))}function Q(e){var r=e._ownerWritableStream,t=r._state;return"errored"===t||"erroring"===t?null:"closed"===t?0:K(r._writableStreamController)}function Y(e){var r=e._ownerWritableStream;c(void 0!==r),c(r._writer===e);var t=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");x(e,t),M(e,t),r._writer=void 0,e._ownerWritableStream=void 0}function H(e,r){var t=e._ownerWritableStream;c(void 0!==t);var o=t._writableStreamController,n=J(o,r);if(t!==e._ownerWritableStream)return Promise.reject(se("write to"));var a=t._state;if("errored"===a)return Promise.reject(t._storedError);if(!0===W(t)||"closed"===a)return Promise.reject(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===a)return Promise.reject(t._storedError);c("writable"===a);var i=P(t);return X(o,r,n),i}var U=function(){function e(r,t,o,a){if(n(this,e),!1===w(r))throw new TypeError("WritableStreamDefaultController can only be constructed with a WritableStream instance");if(void 0!==r._writableStreamController)throw new TypeError("WritableStreamDefaultController instances can only be created by the WritableStream constructor");this._controlledWritableStream=r,this._underlyingSink=t,this._queue=void 0,this._queueTotalSize=void 0,v(this),this._started=!1;var i=l(o,a);this._strategySize=i.size,this._strategyHWM=i.highWaterMark;var s=oe(this);D(r,s)}return o(e,[{key:"error",value:function(e){if(!1===Z(this))throw new TypeError("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");var r=this._controlledWritableStream._state;"writable"===r&&ne(this,e)}},{key:"__abortSteps",value:function(e){return s(this._underlyingSink,"abort",[e])}},{key:"__errorSteps",value:function(){v(this)}},{key:"__startSteps",value:function(){var e=this,r=i(this._underlyingSink,"start",[this]),t=this._controlledWritableStream;Promise.resolve(r).then((function(){c("writable"===t._state||"erroring"===t._state),e._started=!0,$(e)}),(function(r){c("writable"===t._state||"erroring"===t._state),e._started=!0,R(t,r)})).catch(_)}}]),e}();function G(e){b(e,"close",0),$(e)}function J(e,r){var t=e._strategySize;if(void 0===t)return 1;try{return t(r)}catch(o){return ee(e,o),1}}function K(e){return e._strategyHWM-e._queueTotalSize}function X(e,r,t){var o={chunk:r};try{b(e,o,t)}catch(i){return void ee(e,i)}var n=e._controlledWritableStream;if(!1===W(n)&&"writable"===n._state){var a=oe(e);D(n,a)}$(e)}function Z(e){return!!u(e)&&!!Object.prototype.hasOwnProperty.call(e,"_underlyingSink")}function $(e){var r=e._controlledWritableStream;if(!1!==e._started&&void 0===r._inFlightWriteRequest){var t=r._state;if("closed"!==t&&"errored"!==t)if("erroring"!==t){if(0!==e._queue.length){var o=m(e);"close"===o?re(e):te(e,o.chunk)}}else k(r)}}function ee(e,r){"writable"===e._controlledWritableStream._state&&ne(e,r)}function re(e){var r=e._controlledWritableStream;z(r),h(e),c(0===e._queue.length,"queue must be empty once the final write record is dequeued");var t=s(e._underlyingSink,"close",[]);t.then((function(){C(r)}),(function(e){j(r,e)})).catch(_)}function te(e,r){var t=e._controlledWritableStream;A(t);var o=s(e._underlyingSink,"write",[r,e]);o.then((function(){T(t);var r=t._state;if(c("writable"===r||"erroring"===r),h(e),!1===W(t)&&"writable"===r){var o=oe(e);D(t,o)}$(e)}),(function(e){E(t,e)})).catch(_)}function oe(e){var r=K(e);return r<=0}function ne(e,r){var t=e._controlledWritableStream;c("writable"===t._state),q(t,r)}function ae(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream")}function ie(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter")}function se(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function le(e){e._closedPromise=new Promise((function(r,t){e._closedPromise_resolve=r,e._closedPromise_reject=t,e._closedPromiseState="pending"}))}function ue(e,r){e._closedPromise=Promise.reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected"}function de(e){e._closedPromise=Promise.resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved"}function ce(e,r){c(void 0!==e._closedPromise_resolve,"writer._closedPromise_resolve !== undefined"),c(void 0!==e._closedPromise_reject,"writer._closedPromise_reject !== undefined"),c("pending"===e._closedPromiseState,"writer._closedPromiseState is pending"),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected"}function _e(e,r){c(void 0===e._closedPromise_resolve,"writer._closedPromise_resolve === undefined"),c(void 0===e._closedPromise_reject,"writer._closedPromise_reject === undefined"),c("pending"!==e._closedPromiseState,"writer._closedPromiseState is not pending"),e._closedPromise=Promise.reject(r),e._closedPromiseState="rejected"}function fe(e){c(void 0!==e._closedPromise_resolve,"writer._closedPromise_resolve !== undefined"),c(void 0!==e._closedPromise_reject,"writer._closedPromise_reject !== undefined"),c("pending"===e._closedPromiseState,"writer._closedPromiseState is pending"),e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved"}function he(e){e._readyPromise=new Promise((function(r,t){e._readyPromise_resolve=r,e._readyPromise_reject=t})),e._readyPromiseState="pending"}function be(e,r){e._readyPromise=Promise.reject(r),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected"}function me(e){e._readyPromise=Promise.resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled"}function ve(e,r){c(void 0!==e._readyPromise_resolve,"writer._readyPromise_resolve !== undefined"),c(void 0!==e._readyPromise_reject,"writer._readyPromise_reject !== undefined"),e._readyPromise_reject(r),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected"}function ye(e){c(void 0===e._readyPromise_resolve,"writer._readyPromise_resolve === undefined"),c(void 0===e._readyPromise_reject,"writer._readyPromise_reject === undefined"),e._readyPromise=new Promise((function(r,t){e._readyPromise_resolve=r,e._readyPromise_reject=t})),e._readyPromiseState="pending"}function pe(e,r){c(void 0===e._readyPromise_resolve,"writer._readyPromise_resolve === undefined"),c(void 0===e._readyPromise_reject,"writer._readyPromise_reject === undefined"),e._readyPromise=Promise.reject(r),e._readyPromiseState="rejected"}function we(e){c(void 0!==e._readyPromise_resolve,"writer._readyPromise_resolve !== undefined"),c(void 0!==e._readyPromise_reject,"writer._readyPromise_reject !== undefined"),e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled"}},function(e,r,t){"use strict";var o=t(0),n=o.IsFiniteNonNegativeNumber,a=t(1),i=a.assert;r.DequeueValue=function(e){i("_queue"in e&&"_queueTotalSize"in e,"Spec-level failure: DequeueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),i(e._queue.length>0,"Spec-level failure: should never dequeue from an empty queue.");var r=e._queue.shift();return e._queueTotalSize-=r.size,e._queueTotalSize<0&&(e._queueTotalSize=0),r.value},r.EnqueueValueWithSize=function(e,r,t){if(i("_queue"in e&&"_queueTotalSize"in e,"Spec-level failure: EnqueueValueWithSize should only be used on containers with [[queue]] and [[queueTotalSize]]."),t=Number(t),!n(t))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:r,size:t}),e._queueTotalSize+=t},r.PeekQueueValue=function(e){i("_queue"in e&&"_queueTotalSize"in e,"Spec-level failure: PeekQueueValue should only be used on containers with [[queue]] and [[queueTotalSize]]."),i(e._queue.length>0,"Spec-level failure: should never peek at an empty queue.");var r=e._queue[0];return r.value},r.ResetQueue=function(e){i("_queue"in e&&"_queueTotalSize"in e,"Spec-level failure: ResetQueue should only be used on containers with [[queue]] and [[queueTotalSize]]."),e._queue=[],e._queueTotalSize=0}},function(e,r,t){"use strict";var o=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}();function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var a=t(0),i=a.ArrayBufferCopy,s=a.CreateIterResultObject,l=a.IsFiniteNonNegativeNumber,u=a.InvokeOrNoop,d=a.PromiseInvokeOrNoop,c=a.TransferArrayBuffer,_=a.ValidateAndNormalizeQueuingStrategy,f=a.ValidateAndNormalizeHighWaterMark,h=t(0),b=h.createArrayFromList,m=h.createDataProperty,v=h.typeIsObject,y=t(1),p=y.assert,w=y.rethrowAssertionErrorRejection,S=t(3),g=S.DequeueValue,P=S.EnqueueValueWithSize,R=S.ResetQueue,q=t(2),k=q.AcquireWritableStreamDefaultWriter,T=q.IsWritableStream,E=q.IsWritableStreamLocked,C=q.WritableStreamAbort,j=q.WritableStreamDefaultWriterCloseWithErrorPropagation,W=q.WritableStreamDefaultWriterRelease,O=q.WritableStreamDefaultWriterWrite,z=q.WritableStreamCloseQueuedOrInFlight,A=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.size,a=t.highWaterMark;n(this,e),this._state="readable",this._reader=void 0,this._storedError=void 0,this._disturbed=!1,this._readableStreamController=void 0;var i=r.type,s=String(i);if("bytes"===s)void 0===a&&(a=0),this._readableStreamController=new we(this,r,a);else{if(void 0!==i)throw new RangeError("Invalid type is specified");void 0===a&&(a=1),this._readableStreamController=new de(this,r,o,a)}}return o(e,[{key:"cancel",value:function(e){return!1===F(this)?Promise.reject(Ye("cancel")):!0===N(this)?Promise.reject(new TypeError("Cannot cancel a stream that already has a reader")):H(this,e)}},{key:"getReader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.mode;if(!1===F(this))throw Ye("getReader");if(void 0===r)return D(this);if(r=String(r),"byob"===r)return I(this);throw new RangeError("Invalid mode is specified")}},{key:"pipeThrough",value:function(e,r){var t=e.writable,o=e.readable,n=this.pipeTo(t,r);return nr(n),o}},{key:"pipeTo",value:function(e){var r=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.preventClose,n=t.preventAbort,a=t.preventCancel;if(!1===F(this))return Promise.reject(Ye("pipeTo"));if(!1===T(e))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));if(o=Boolean(o),n=Boolean(n),a=Boolean(a),!0===N(this))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream"));if(!0===E(e))return Promise.reject(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream"));var i=D(this),s=k(e),l=!1,u=Promise.resolve();return new Promise((function(t,d){function c(){return u=Promise.resolve(),!0===l?Promise.resolve():s._readyPromise.then((function(){return ue(i).then((function(e){var r=e.value,t=e.done;!0!==t&&(u=O(s,r).catch((function(){})))}))})).then(c)}if(h(r,i._closedPromise,(function(r){!1===n?m((function(){return C(e,r)}),!0,r):v(!0,r)})),h(e,s._closedPromise,(function(e){!1===a?m((function(){return H(r,e)}),!0,e):v(!0,e)})),b(r,i._closedPromise,(function(){!1===o?m((function(){return j(s)})):v()})),!0===z(e)||"closed"===e._state){var _=new TypeError("the destination writable stream closed before all data could be piped to it");!1===a?m((function(){return H(r,_)}),!0,_):v(!0,_)}function f(){var e=u;return u.then((function(){return e!==u?f():void 0}))}function h(e,r,t){"errored"===e._state?t(e._storedError):r.catch(t).catch(w)}function b(e,r,t){"closed"===e._state?t():r.then(t).catch(w)}function m(r,t,o){function n(){r().then((function(){return y(t,o)}),(function(e){return y(!0,e)})).catch(w)}!0!==l&&(l=!0,"writable"===e._state&&!1===z(e)?f().then(n):n())}function v(r,t){!0!==l&&(l=!0,"writable"===e._state&&!1===z(e)?f().then((function(){return y(r,t)})).catch(w):y(r,t))}function y(e,r){W(s),se(i),e?d(r):t(void 0)}c().catch((function(e){u=Promise.resolve(),w(e)}))}))}},{key:"tee",value:function(){if(!1===F(this))throw Ye("tee");var e=L(this,!1);return b(e)}},{key:"locked",get:function(){if(!1===F(this))throw Ye("locked");return N(this)}}]),e}();function I(e){return new te(e)}function D(e){return new re(e)}function F(e){return!!v(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")}function B(e){return p(!0===F(e),"IsReadableStreamDisturbed should only be used on known readable streams"),e._disturbed}function N(e){return p(!0===F(e),"IsReadableStreamLocked should only be used on known readable streams"),void 0!==e._reader}function L(e,r){p(!0===F(e)),p("boolean"===typeof r);var t=D(e),o={closedOrErrored:!1,canceled1:!1,canceled2:!1,reason1:void 0,reason2:void 0};o.promise=new Promise((function(e){o._resolve=e}));var n=V();n._reader=t,n._teeState=o,n._cloneForBranch2=r;var a=M();a._stream=e,a._teeState=o;var i=x();i._stream=e,i._teeState=o;var s=Object.create(Object.prototype);m(s,"pull",n),m(s,"cancel",a);var l=new A(s),u=Object.create(Object.prototype);m(u,"pull",n),m(u,"cancel",i);var d=new A(u);return n._branch1=l._readableStreamController,n._branch2=d._readableStreamController,t._closedPromise.catch((function(e){!0!==o.closedOrErrored&&(me(n._branch1,e),me(n._branch2,e),o.closedOrErrored=!0)})),[l,d]}function V(){function e(){var r=e._reader,t=e._branch1,o=e._branch2,n=e._teeState;return ue(r).then((function(e){p(v(e));var r=e.value,a=e.done;if(p("boolean"===typeof a),!0===a&&!1===n.closedOrErrored&&(!1===n.canceled1&&he(t),!1===n.canceled2&&he(o),n.closedOrErrored=!0),!0!==n.closedOrErrored){var i=r,s=r;!1===n.canceled1&&be(t,i),!1===n.canceled2&&be(o,s)}}))}return e}function M(){function e(r){var t=e._stream,o=e._teeState;if(o.canceled1=!0,o.reason1=r,!0===o.canceled2){var n=b([o.reason1,o.reason2]),a=H(t,n);o._resolve(a)}return o.promise}return e}function x(){function e(r){var t=e._stream,o=e._teeState;if(o.canceled2=!0,o.reason2=r,!0===o.canceled1){var n=b([o.reason1,o.reason2]),a=H(t,n);o._resolve(a)}return o.promise}return e}function Q(e){p(!0===oe(e._reader)),p("readable"===e._state||"closed"===e._state);var r=new Promise((function(r,t){var o={_resolve:r,_reject:t};e._reader._readIntoRequests.push(o)}));return r}function Y(e){p(!0===ne(e._reader)),p("readable"===e._state);var r=new Promise((function(r,t){var o={_resolve:r,_reject:t};e._reader._readRequests.push(o)}));return r}function H(e,r){if(e._disturbed=!0,"closed"===e._state)return Promise.resolve(void 0);if("errored"===e._state)return Promise.reject(e._storedError);U(e);var t=e._readableStreamController.__cancelSteps(r);return t.then((function(){}))}function U(e){p("readable"===e._state),e._state="closed";var r=e._reader;if(void 0!==r){if(!0===ne(r)){for(var t=0;t<r._readRequests.length;t++){var o=r._readRequests[t]._resolve;o(s(void 0,!0))}r._readRequests=[]}$e(r)}}function G(e,r){p(!0===F(e),"stream must be ReadableStream"),p("readable"===e._state,"state must be readable"),e._state="errored",e._storedError=r;var t=e._reader;if(void 0!==t){if(!0===ne(t)){for(var o=0;o<t._readRequests.length;o++){var n=t._readRequests[o];n._reject(r)}t._readRequests=[]}else{p(oe(t),"reader must be ReadableStreamBYOBReader");for(var a=0;a<t._readIntoRequests.length;a++){var i=t._readIntoRequests[a];i._reject(r)}t._readIntoRequests=[]}Xe(t,r),t._closedPromise.catch((function(){}))}}function J(e,r,t){var o=e._reader;p(o._readIntoRequests.length>0);var n=o._readIntoRequests.shift();n._resolve(s(r,t))}function K(e,r,t){var o=e._reader;p(o._readRequests.length>0);var n=o._readRequests.shift();n._resolve(s(r,t))}function X(e){return e._reader._readIntoRequests.length}function Z(e){return e._reader._readRequests.length}function $(e){var r=e._reader;return void 0!==r&&!1!==oe(r)}function ee(e){var r=e._reader;return void 0!==r&&!1!==ne(r)}e.exports={ReadableStream:A,IsReadableStreamDisturbed:B,ReadableStreamDefaultControllerClose:he,ReadableStreamDefaultControllerEnqueue:be,ReadableStreamDefaultControllerError:me,ReadableStreamDefaultControllerGetDesiredSize:ye};var re=function(){function e(r){if(n(this,e),!1===F(r))throw new TypeError("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===N(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ae(this,r),this._readRequests=[]}return o(e,[{key:"cancel",value:function(e){return!1===ne(this)?Promise.reject(Ue("cancel")):void 0===this._ownerReadableStream?Promise.reject(He("cancel")):ie(this,e)}},{key:"read",value:function(){return!1===ne(this)?Promise.reject(Ue("read")):void 0===this._ownerReadableStream?Promise.reject(He("read from")):ue(this)}},{key:"releaseLock",value:function(){if(!1===ne(this))throw Ue("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");se(this)}}},{key:"closed",get:function(){return!1===ne(this)?Promise.reject(Ue("closed")):this._closedPromise}}]),e}(),te=function(){function e(r){if(n(this,e),!F(r))throw new TypeError("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===Se(r._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(N(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ae(this,r),this._readIntoRequests=[]}return o(e,[{key:"cancel",value:function(e){return oe(this)?void 0===this._ownerReadableStream?Promise.reject(He("cancel")):ie(this,e):Promise.reject(er("cancel"))}},{key:"read",value:function(e){return oe(this)?void 0===this._ownerReadableStream?Promise.reject(He("read from")):ArrayBuffer.isView(e)?0===e.byteLength?Promise.reject(new TypeError("view must have non-zero byteLength")):le(this,e):Promise.reject(new TypeError("view must be an array buffer view")):Promise.reject(er("read"))}},{key:"releaseLock",value:function(){if(!oe(this))throw er("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");se(this)}}},{key:"closed",get:function(){return oe(this)?this._closedPromise:Promise.reject(er("closed"))}}]),e}();function oe(e){return!!v(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")}function ne(e){return!!v(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")}function ae(e,r){e._ownerReadableStream=r,r._reader=e,"readable"===r._state?Ge(e):"closed"===r._state?Ke(e):(p("errored"===r._state,"state must be errored"),Je(e,r._storedError),e._closedPromise.catch((function(){})))}function ie(e,r){var t=e._ownerReadableStream;return p(void 0!==t),H(t,r)}function se(e){p(void 0!==e._ownerReadableStream),p(e._ownerReadableStream._reader===e),"readable"===e._ownerReadableStream._state?Xe(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Ze(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._closedPromise.catch((function(){})),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function le(e,r){var t=e._ownerReadableStream;return p(void 0!==t),t._disturbed=!0,"errored"===t._state?Promise.reject(t._storedError):ze(t._readableStreamController,r)}function ue(e){var r=e._ownerReadableStream;return p(void 0!==r),r._disturbed=!0,"closed"===r._state?Promise.resolve(s(void 0,!0)):"errored"===r._state?Promise.reject(r._storedError):(p("readable"===r._state),r._readableStreamController.__pullSteps())}var de=function(){function e(r,t,o,a){if(n(this,e),!1===F(r))throw new TypeError("ReadableStreamDefaultController can only be constructed with a ReadableStream instance");if(void 0!==r._readableStreamController)throw new TypeError("ReadableStreamDefaultController instances can only be created by the ReadableStream constructor");this._controlledReadableStream=r,this._underlyingSource=t,this._queue=void 0,this._queueTotalSize=void 0,R(this),this._started=!1,this._closeRequested=!1,this._pullAgain=!1,this._pulling=!1;var i=_(o,a);this._strategySize=i.size,this._strategyHWM=i.highWaterMark;var s=this,l=u(t,"start",[this]);Promise.resolve(l).then((function(){s._started=!0,p(!1===s._pulling),p(!1===s._pullAgain),_e(s)}),(function(e){ve(s,e)})).catch(w)}return o(e,[{key:"close",value:function(){if(!1===ce(this))throw rr("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");he(this)}},{key:"enqueue",value:function(e){if(!1===ce(this))throw rr("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var r=this._controlledReadableStream._state;if("readable"!==r)throw new TypeError("The stream (in "+r+" state) is not in the readable state and cannot be enqueued to");return be(this,e)}},{key:"error",value:function(e){if(!1===ce(this))throw rr("error");var r=this._controlledReadableStream;if("readable"!==r._state)throw new TypeError("The stream is "+r._state+" and so cannot be errored");me(this,e)}},{key:"__cancelSteps",value:function(e){return R(this),d(this._underlyingSource,"cancel",[e])}},{key:"__pullSteps",value:function(){var e=this._controlledReadableStream;if(this._queue.length>0){var r=g(this);return!0===this._closeRequested&&0===this._queue.length?U(e):_e(this),Promise.resolve(s(r,!1))}var t=Y(e);return _e(this),t}},{key:"desiredSize",get:function(){if(!1===ce(this))throw rr("desiredSize");return ye(this)}}]),e}();function ce(e){return!!v(e)&&!!Object.prototype.hasOwnProperty.call(e,"_underlyingSource")}function _e(e){var r=fe(e);if(!1!==r)if(!0!==e._pulling){p(!1===e._pullAgain),e._pulling=!0;var t=d(e._underlyingSource,"pull",[e]);t.then((function(){if(e._pulling=!1,!0===e._pullAgain)return e._pullAgain=!1,_e(e)}),(function(r){ve(e,r)})).catch(w)}else e._pullAgain=!0}function fe(e){var r=e._controlledReadableStream;if("closed"===r._state||"errored"===r._state)return!1;if(!0===e._closeRequested)return!1;if(!1===e._started)return!1;if(!0===N(r)&&Z(r)>0)return!0;var t=ye(e);return t>0}function he(e){var r=e._controlledReadableStream;p(!1===e._closeRequested),p("readable"===r._state),e._closeRequested=!0,0===e._queue.length&&U(r)}function be(e,r){var t=e._controlledReadableStream;if(p(!1===e._closeRequested),p("readable"===t._state),!0===N(t)&&Z(t)>0)K(t,r,!1);else{var o=1;if(void 0!==e._strategySize){var n=e._strategySize;try{o=n(r)}catch(a){throw ve(e,a),a}}try{P(e,r,o)}catch(i){throw ve(e,i),i}}_e(e)}function me(e,r){var t=e._controlledReadableStream;p("readable"===t._state),R(e),G(t,r)}function ve(e,r){"readable"===e._controlledReadableStream._state&&me(e,r)}function ye(e){var r=e._controlledReadableStream,t=r._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}var pe=function(){function e(r,t){n(this,e),this._associatedReadableByteStreamController=r,this._view=t}return o(e,[{key:"respond",value:function(e){if(!1===ge(this))throw tr("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");xe(this._associatedReadableByteStreamController,e)}},{key:"respondWithNewView",value:function(e){if(!1===ge(this))throw tr("respond");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");Qe(this._associatedReadableByteStreamController,e)}},{key:"view",get:function(){return this._view}}]),e}(),we=function(){function e(r,t,o){if(n(this,e),!1===F(r))throw new TypeError("ReadableByteStreamController can only be constructed with a ReadableStream instance given a byte source");if(void 0!==r._readableStreamController)throw new TypeError("ReadableByteStreamController instances can only be created by the ReadableStream constructor given a byte source");this._controlledReadableStream=r,this._underlyingByteSource=t,this._pullAgain=!1,this._pulling=!1,Re(this),this._queue=this._queueTotalSize=void 0,R(this),this._closeRequested=!1,this._started=!1,this._strategyHWM=f(o);var a=t.autoAllocateChunkSize;if(void 0!==a&&(!1===Number.isInteger(a)||a<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");this._autoAllocateChunkSize=a,this._pendingPullIntos=[];var i=this,s=u(t,"start",[this]);Promise.resolve(s).then((function(){i._started=!0,p(!1===i._pulling),p(!1===i._pullAgain),Pe(i)}),(function(e){"readable"===r._state&&Ve(i,e)})).catch(w)}return o(e,[{key:"close",value:function(){if(!1===Se(this))throw or("close");if(!0===this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");Ne(this)}},{key:"enqueue",value:function(e){if(!1===Se(this))throw or("enqueue");if(!0===this._closeRequested)throw new TypeError("stream is closed or draining");var r=this._controlledReadableStream._state;if("readable"!==r)throw new TypeError("The stream (in "+r+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(e))throw new TypeError("You can only enqueue array buffer views when using a ReadableByteStreamController");Le(this,e)}},{key:"error",value:function(e){if(!1===Se(this))throw or("error");var r=this._controlledReadableStream;if("readable"!==r._state)throw new TypeError("The stream is "+r._state+" and so cannot be errored");Ve(this,e)}},{key:"__cancelSteps",value:function(e){if(this._pendingPullIntos.length>0){var r=this._pendingPullIntos[0];r.bytesFilled=0}return R(this),d(this._underlyingByteSource,"cancel",[e])}},{key:"__pullSteps",value:function(){var e=this._controlledReadableStream;if(p(!0===ee(e)),this._queueTotalSize>0){p(0===Z(e));var r=this._queue.shift();this._queueTotalSize-=r.byteLength,je(this);var t=void 0;try{t=new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}catch(l){return Promise.reject(l)}return Promise.resolve(s(t,!1))}var o=this._autoAllocateChunkSize;if(void 0!==o){var n=void 0;try{n=new ArrayBuffer(o)}catch(u){return Promise.reject(u)}var a={buffer:n,byteOffset:0,byteLength:o,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(a)}var i=Y(e);return Pe(this),i}},{key:"byobRequest",get:function(){if(!1===Se(this))throw or("byobRequest");if(void 0===this._byobRequest&&this._pendingPullIntos.length>0){var e=this._pendingPullIntos[0],r=new Uint8Array(e.buffer,e.byteOffset+e.bytesFilled,e.byteLength-e.bytesFilled);this._byobRequest=new pe(this,r)}return this._byobRequest}},{key:"desiredSize",get:function(){if(!1===Se(this))throw or("desiredSize");return Me(this)}}]),e}();function Se(e){return!!v(e)&&!!Object.prototype.hasOwnProperty.call(e,"_underlyingByteSource")}function ge(e){return!!v(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")}function Pe(e){var r=Be(e);if(!1!==r)if(!0!==e._pulling){p(!1===e._pullAgain),e._pulling=!0;var t=d(e._underlyingByteSource,"pull",[e]);t.then((function(){e._pulling=!1,!0===e._pullAgain&&(e._pullAgain=!1,Pe(e))}),(function(r){"readable"===e._controlledReadableStream._state&&Ve(e,r)})).catch(w)}else e._pullAgain=!0}function Re(e){We(e),e._pendingPullIntos=[]}function qe(e,r){p("errored"!==e._state,"state must not be errored");var t=!1;"closed"===e._state&&(p(0===r.bytesFilled),t=!0);var o=ke(r);"default"===r.readerType?K(e,o,t):(p("byob"===r.readerType),J(e,o,t))}function ke(e){var r=e.bytesFilled,t=e.elementSize;return p(r<=e.byteLength),p(r%t===0),new e.ctor(e.buffer,e.byteOffset,r/t)}function Te(e,r,t,o){e._queue.push({buffer:r,byteOffset:t,byteLength:o}),e._queueTotalSize+=o}function Ee(e,r){var t=r.elementSize,o=r.bytesFilled-r.bytesFilled%t,n=Math.min(e._queueTotalSize,r.byteLength-r.bytesFilled),a=r.bytesFilled+n,s=a-a%t,l=n,u=!1;s>o&&(l=s-r.bytesFilled,u=!0);var d=e._queue;while(l>0){var c=d[0],_=Math.min(l,c.byteLength),f=r.byteOffset+r.bytesFilled;i(r.buffer,f,c.buffer,c.byteOffset,_),c.byteLength===_?d.shift():(c.byteOffset+=_,c.byteLength-=_),e._queueTotalSize-=_,Ce(e,_,r),l-=_}return!1===u&&(p(0===e._queueTotalSize,"queue must be empty"),p(r.bytesFilled>0),p(r.bytesFilled<r.elementSize)),u}function Ce(e,r,t){p(0===e._pendingPullIntos.length||e._pendingPullIntos[0]===t),We(e),t.bytesFilled+=r}function je(e){p("readable"===e._controlledReadableStream._state),0===e._queueTotalSize&&!0===e._closeRequested?U(e._controlledReadableStream):Pe(e)}function We(e){void 0!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=void 0,e._byobRequest=void 0)}function Oe(e){p(!1===e._closeRequested);while(e._pendingPullIntos.length>0){if(0===e._queueTotalSize)return;var r=e._pendingPullIntos[0];!0===Ee(e,r)&&(Fe(e),qe(e._controlledReadableStream,r))}}function ze(e,r){var t=e._controlledReadableStream,o=1;r.constructor!==DataView&&(o=r.constructor.BYTES_PER_ELEMENT);var n=r.constructor,a={buffer:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength,bytesFilled:0,elementSize:o,ctor:n,readerType:"byob"};if(e._pendingPullIntos.length>0)return a.buffer=c(a.buffer),e._pendingPullIntos.push(a),Q(t);if("closed"===t._state){var i=new r.constructor(a.buffer,a.byteOffset,0);return Promise.resolve(s(i,!0))}if(e._queueTotalSize>0){if(!0===Ee(e,a)){var l=ke(a);return je(e),Promise.resolve(s(l,!1))}if(!0===e._closeRequested){var u=new TypeError("Insufficient bytes to fill elements in the given buffer");return Ve(e,u),Promise.reject(u)}}a.buffer=c(a.buffer),e._pendingPullIntos.push(a);var d=Q(t);return Pe(e),d}function Ae(e,r){r.buffer=c(r.buffer),p(0===r.bytesFilled,"bytesFilled must be 0");var t=e._controlledReadableStream;if(!0===$(t))while(X(t)>0){var o=Fe(e);qe(t,o)}}function Ie(e,r,t){if(t.bytesFilled+r>t.byteLength)throw new RangeError("bytesWritten out of range");if(Ce(e,r,t),!(t.bytesFilled<t.elementSize)){Fe(e);var o=t.bytesFilled%t.elementSize;if(o>0){var n=t.byteOffset+t.bytesFilled,a=t.buffer.slice(n-o,n);Te(e,a,0,a.byteLength)}t.buffer=c(t.buffer),t.bytesFilled-=o,qe(e._controlledReadableStream,t),Oe(e)}}function De(e,r){var t=e._pendingPullIntos[0],o=e._controlledReadableStream;if("closed"===o._state){if(0!==r)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream");Ae(e,t)}else p("readable"===o._state),Ie(e,r,t)}function Fe(e){var r=e._pendingPullIntos.shift();return We(e),r}function Be(e){var r=e._controlledReadableStream;return"readable"===r._state&&(!0!==e._closeRequested&&(!1!==e._started&&(!0===ee(r)&&Z(r)>0||(!0===$(r)&&X(r)>0||Me(e)>0))))}function Ne(e){var r=e._controlledReadableStream;if(p(!1===e._closeRequested),p("readable"===r._state),e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0){var t=e._pendingPullIntos[0];if(t.bytesFilled>0){var o=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Ve(e,o),o}}U(r)}}function Le(e,r){var t=e._controlledReadableStream;p(!1===e._closeRequested),p("readable"===t._state);var o=r.buffer,n=r.byteOffset,a=r.byteLength,i=c(o);if(!0===ee(t))if(0===Z(t))Te(e,i,n,a);else{p(0===e._queue.length);var s=new Uint8Array(i,n,a);K(t,s,!1)}else!0===$(t)?(Te(e,i,n,a),Oe(e)):(p(!1===N(t),"stream must not be locked"),Te(e,i,n,a))}function Ve(e,r){var t=e._controlledReadableStream;p("readable"===t._state),Re(e),R(e),G(t,r)}function Me(e){var r=e._controlledReadableStream,t=r._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function xe(e,r){if(r=Number(r),!1===l(r))throw new RangeError("bytesWritten must be a finite");p(e._pendingPullIntos.length>0),De(e,r)}function Qe(e,r){p(e._pendingPullIntos.length>0);var t=e._pendingPullIntos[0];if(t.byteOffset+t.bytesFilled!==r.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(t.byteLength!==r.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");t.buffer=r.buffer,De(e,r.byteLength)}function Ye(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream")}function He(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Ue(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader")}function Ge(e){e._closedPromise=new Promise((function(r,t){e._closedPromise_resolve=r,e._closedPromise_reject=t}))}function Je(e,r){e._closedPromise=Promise.reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function Ke(e){e._closedPromise=Promise.resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function Xe(e,r){p(void 0!==e._closedPromise_resolve),p(void 0!==e._closedPromise_reject),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function Ze(e,r){p(void 0===e._closedPromise_resolve),p(void 0===e._closedPromise_reject),e._closedPromise=Promise.reject(r)}function $e(e){p(void 0!==e._closedPromise_resolve),p(void 0!==e._closedPromise_reject),e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0}function er(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader")}function rr(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController")}function tr(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest")}function or(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController")}function nr(e){try{Promise.prototype.then.call(e,void 0,(function(){}))}catch(r){}}},function(e,r,t){"use strict";var o=t(6),n=t(4),a=t(2);r.TransformStream=o.TransformStream,r.ReadableStream=n.ReadableStream,r.IsReadableStreamDisturbed=n.IsReadableStreamDisturbed,r.ReadableStreamDefaultControllerClose=n.ReadableStreamDefaultControllerClose,r.ReadableStreamDefaultControllerEnqueue=n.ReadableStreamDefaultControllerEnqueue,r.ReadableStreamDefaultControllerError=n.ReadableStreamDefaultControllerError,r.ReadableStreamDefaultControllerGetDesiredSize=n.ReadableStreamDefaultControllerGetDesiredSize,r.AcquireWritableStreamDefaultWriter=a.AcquireWritableStreamDefaultWriter,r.IsWritableStream=a.IsWritableStream,r.IsWritableStreamLocked=a.IsWritableStreamLocked,r.WritableStream=a.WritableStream,r.WritableStreamAbort=a.WritableStreamAbort,r.WritableStreamDefaultControllerError=a.WritableStreamDefaultControllerError,r.WritableStreamDefaultWriterCloseWithErrorPropagation=a.WritableStreamDefaultWriterCloseWithErrorPropagation,r.WritableStreamDefaultWriterRelease=a.WritableStreamDefaultWriterRelease,r.WritableStreamDefaultWriterWrite=a.WritableStreamDefaultWriterWrite},function(e,r,t){"use strict";var o=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}();function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var a=t(1),i=a.assert,s=t(0),l=s.InvokeOrNoop,u=s.PromiseInvokeOrPerformFallback,d=s.PromiseInvokeOrNoop,c=s.typeIsObject,_=t(4),f=_.ReadableStream,h=_.ReadableStreamDefaultControllerClose,b=_.ReadableStreamDefaultControllerEnqueue,m=_.ReadableStreamDefaultControllerError,v=_.ReadableStreamDefaultControllerGetDesiredSize,y=t(2),p=y.WritableStream,w=y.WritableStreamDefaultControllerError;function S(e){if(!0===e._errored)throw new TypeError("TransformStream is already errored");if(!0===e._readableClosed)throw new TypeError("Readable side is already closed");R(e)}function g(e,r){if(!0===e._errored)throw new TypeError("TransformStream is already errored");if(!0===e._readableClosed)throw new TypeError("Readable side is already closed");var t=e._readableController;try{b(t,r)}catch(a){throw e._readableClosed=!0,q(e,a),e._storedError}var o=v(t),n=o<=0;!0===n&&!1===e._backpressure&&E(e,!0)}function P(e,r){if(!0===e._errored)throw new TypeError("TransformStream is already errored");k(e,r)}function R(e){i(!1===e._errored),i(!1===e._readableClosed);try{h(e._readableController)}catch(r){i(!1)}e._readableClosed=!0}function q(e,r){!1===e._errored&&k(e,r)}function k(e,r){i(!1===e._errored),e._errored=!0,e._storedError=r,!1===e._writableDone&&w(e._writableController,r),!1===e._readableClosed&&m(e._readableController,r)}function T(e){return i(void 0!==e._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),!1===e._backpressure?Promise.resolve():(i(!0===e._backpressure,"_backpressure should have been initialized"),e._backpressureChangePromise)}function E(e,r){i(e._backpressure!==r,"TransformStreamSetBackpressure() should be called only when backpressure is changed"),void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(r),e._backpressureChangePromise=new Promise((function(r){e._backpressureChangePromise_resolve=r})),e._backpressureChangePromise.then((function(e){i(e!==r,"_backpressureChangePromise should be fulfilled only when backpressure is changed")})),e._backpressure=r}function C(e,r){var t=r._controlledTransformStream;return g(t,e),Promise.resolve()}function j(e,r){i(!1===e._errored),i(!1===e._transforming),i(!1===e._backpressure),e._transforming=!0;var t=e._transformer,o=e._transformStreamController,n=u(t,"transform",[r,o],C,[r,o]);return n.then((function(){return e._transforming=!1,T(e)}),(function(r){return q(e,r),Promise.reject(r)}))}function W(e){return!!c(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")}function O(e){return!!c(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")}var z=function(){function e(r,t){n(this,e),this._transformStream=r,this._startPromise=t}return o(e,[{key:"start",value:function(e){var r=this._transformStream;return r._writableController=e,this._startPromise.then((function(){return T(r)}))}},{key:"write",value:function(e){var r=this._transformStream;return j(r,e)}},{key:"abort",value:function(){var e=this._transformStream;e._writableDone=!0,k(e,new TypeError("Writable side aborted"))}},{key:"close",value:function(){var e=this._transformStream;i(!1===e._transforming),e._writableDone=!0;var r=d(e._transformer,"flush",[e._transformStreamController]);return r.then((function(){return!0===e._errored?Promise.reject(e._storedError):(!1===e._readableClosed&&R(e),Promise.resolve())})).catch((function(r){return q(e,r),Promise.reject(e._storedError)}))}}]),e}(),A=function(){function e(r,t){n(this,e),this._transformStream=r,this._startPromise=t}return o(e,[{key:"start",value:function(e){var r=this._transformStream;return r._readableController=e,this._startPromise.then((function(){return i(void 0!==r._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),!0===r._backpressure?Promise.resolve():(i(!1===r._backpressure,"_backpressure should have been initialized"),r._backpressureChangePromise)}))}},{key:"pull",value:function(){var e=this._transformStream;return i(!0===e._backpressure,"pull() should be never called while _backpressure is false"),i(void 0!==e._backpressureChangePromise,"_backpressureChangePromise should have been initialized"),E(e,!1),e._backpressureChangePromise}},{key:"cancel",value:function(){var e=this._transformStream;e._readableClosed=!0,k(e,new TypeError("Readable side canceled"))}}]),e}(),I=function(){function e(r){if(n(this,e),!1===O(r))throw new TypeError("TransformStreamDefaultController can only be constructed with a TransformStream instance");if(void 0!==r._transformStreamController)throw new TypeError("TransformStreamDefaultController instances can only be created by the TransformStream constructor");this._controlledTransformStream=r}return o(e,[{key:"enqueue",value:function(e){if(!1===W(this))throw F("enqueue");g(this._controlledTransformStream,e)}},{key:"close",value:function(){if(!1===W(this))throw F("close");S(this._controlledTransformStream)}},{key:"error",value:function(e){if(!1===W(this))throw F("error");P(this._controlledTransformStream,e)}},{key:"desiredSize",get:function(){if(!1===W(this))throw F("desiredSize");var e=this._controlledTransformStream,r=e._readableController;return v(r)}}]),e}(),D=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this._transformer=r;var t=r.readableStrategy,o=r.writableStrategy;this._transforming=!1,this._errored=!1,this._storedError=void 0,this._writableController=void 0,this._readableController=void 0,this._transformStreamController=void 0,this._writableDone=!1,this._readableClosed=!1,this._backpressure=void 0,this._backpressureChangePromise=void 0,this._backpressureChangePromise_resolve=void 0,this._transformStreamController=new I(this);var a=void 0,s=new Promise((function(e){a=e})),u=new A(this,s);this._readable=new f(u,t);var d=new z(this,s);this._writable=new p(d,o),i(void 0!==this._writableController),i(void 0!==this._readableController);var c=v(this._readableController);E(this,c<=0);var _=this,h=l(r,"start",[_._transformStreamController]);a(h),s.catch((function(e){!1===_._errored&&(_._errored=!0,_._storedError=e)}))}return o(e,[{key:"readable",get:function(){if(!1===O(this))throw B("readable");return this._readable}},{key:"writable",get:function(){if(!1===O(this))throw B("writable");return this._writable}}]),e}();function F(e){return new TypeError("TransformStreamDefaultController.prototype."+e+" can only be used on a TransformStreamDefaultController")}function B(e){return new TypeError("TransformStream.prototype."+e+" can only be used on a TransformStream")}e.exports={TransformStream:D}},function(e,r,t){e.exports=t(5)}]));