"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PasswordPrompt=void 0;var _pdf=require("../pdf");class PasswordPrompt{constructor(t,e,s,i=!1){this.overlayName=t.overlayName,this.container=t.container,this.label=t.label,this.input=t.input,this.submitButton=t.submitButton,this.cancelButton=t.cancelButton,this.overlayManager=e,this.l10n=s,this._isViewerEmbedded=i,this.updateCallback=null,this.reason=null,this.submitButton.addEventListener("click",this.verify.bind(this)),this.cancelButton.addEventListener("click",this.close.bind(this)),this.input.addEventListener("keydown",(t=>{13===t.keyCode&&this.verify()})),this.overlayManager.register(this.overlayName,this.container,this.close.bind(this),!0)}async open(){await this.overlayManager.open(this.overlayName);const t=this.reason===_pdf.PasswordResponses.INCORRECT_PASSWORD;this._isViewerEmbedded&&!t||this.input.focus(),this.label.textContent=await this.l10n.get("password_"+(t?"invalid":"label"))}close(){this.overlayManager.close(this.overlayName).then((()=>{this.input.value=""}))}verify(){const t=this.input.value;t?.length>0&&(this.close(),this.updateCallback(t))}setUpdateCallback(t,e){this.updateCallback=t,this.reason=e}}exports.PasswordPrompt=PasswordPrompt;