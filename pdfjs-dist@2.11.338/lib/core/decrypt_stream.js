"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DecryptStream=void 0;var _decode_stream=require("./decode_stream.js");const chunkSize=512;class DecryptStream extends _decode_stream.DecodeStream{constructor(t,e,s){super(e),this.str=t,this.dict=t.dict,this.decrypt=s,this.nextChunk=null,this.initialized=!1}readBlock(){let t;if(this.initialized?t=this.nextChunk:(t=this.str.getBytes(chunkSize),this.initialized=!0),!t||0===t.length)return void(this.eof=!0);this.nextChunk=this.str.getBytes(chunkSize);const e=this.nextChunk&&this.nextChunk.length>0,s=this.decrypt;t=s(t,!e);let i=this.bufferLength;const r=t.length,h=this.ensureBuffer(i+r);for(let n=0;n<r;n++)h[i++]=t[n];this.bufferLength=i}}exports.DecryptStream=DecryptStream;