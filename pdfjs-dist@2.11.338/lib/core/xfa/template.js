"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Value=exports.Text=exports.TemplateNamespace=exports.Template=exports.SetProperty=exports.Items=exports.Field=exports.BindItems=void 0;var _xfa_object=require("./xfa_object.js"),_namespaces=require("./namespaces.js"),_layout=require("./layout.js"),_html_utils=require("./html_utils.js"),_utils=require("./utils.js"),_util=require("../../shared/util.js"),_fonts=require("./fonts.js"),_core_utils=require("../core_utils.js"),_som=require("./som.js");const TEMPLATE_NS_ID=_namespaces.NamespaceIds.template.id,SVG_NS="http://www.w3.org/2000/svg",MAX_ATTEMPTS_FOR_LRTB_LAYOUT=2,MAX_EMPTY_PAGES=3,DEFAULT_TAB_INDEX=5e3,HEADING_PATTERN=/^H(\d+)$/,MIMES=new Set(["image/gif","image/jpeg","image/jpg","image/pjpeg","image/png","image/apng","image/x-png","image/bmp","image/x-ms-bmp","image/tiff","image/tif"]),IMAGES_HEADERS=[[[66,77],"image/bmp"],[[255,216,255],"image/jpeg"],[[73,73,42,0],"image/tiff"],[[77,77,0,42],"image/tiff"],[[71,73,70,56,57,97],"image/gif"],[[137,80,78,71,13,10,26,10],"image/png"]];function getBorderDims(t){if(!t||!t.border)return{w:0,h:0};const e=t.border[_xfa_object.$getExtra]();return e?{w:e.widths[0]+e.widths[2]+e.insets[0]+e.insets[2],h:e.widths[1]+e.widths[3]+e.insets[1]+e.insets[3]}:{w:0,h:0}}function hasMargin(t){return t.margin&&(t.margin.topInset||t.margin.rightInset||t.margin.bottomInset||t.margin.leftInset)}function _setValue(t,e){if(!t.value){const e=new Value({});t[_xfa_object.$appendChild](e),t.value=e}t.value[_xfa_object.$setValue](e)}function*getContainedChildren(t){for(const e of t[_xfa_object.$getChildren]())e instanceof SubformSet?yield*e[_xfa_object.$getContainedChildren]():yield e}function setTabIndex(t){while(t){if(!t.traversal)return void(t[_xfa_object.$tabIndex]=t[_xfa_object.$getParent]()[_xfa_object.$tabIndex]);if(t[_xfa_object.$tabIndex])return;let e=null;for(const a of t.traversal[_xfa_object.$getChildren]())if("next"===a.operation){e=a;break}if(!e||!e.ref)return void(t[_xfa_object.$tabIndex]=t[_xfa_object.$getParent]()[_xfa_object.$tabIndex]);const s=t[_xfa_object.$getTemplateRoot]();t[_xfa_object.$tabIndex]=++s[_xfa_object.$tabIndex];const i=s[_xfa_object.$searchNode](e.ref,t);if(!i)return;t=i[0]}}function applyAssist(t,e){const s=t.assist;if(s){const t=s[_xfa_object.$toHTML]();t&&(e.title=t);const i=s.role,a=i.match(HEADING_PATTERN);if(a){const t="heading",s=a[1];e.role=t,e["aria-level"]=s}}if("table"===t.layout)e.role="table";else if("row"===t.layout)e.role="row";else{const s=t[_xfa_object.$getParent]();"row"===s.layout&&(s.assist&&"TH"===s.assist.role?e.role="columnheader":e.role="cell")}}function ariaLabel(t){if(!t.assist)return null;const e=t.assist;return e.speak&&""!==e.speak[_xfa_object.$content]?e.speak[_xfa_object.$content]:e.toolTip?e.toolTip[_xfa_object.$content]:null}function valueToHtml(t){return _utils.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:Object.create(null)},children:[{name:"span",attributes:{style:Object.create(null)},value:t}]})}function setFirstUnsplittable(t){const e=t[_xfa_object.$getTemplateRoot]();null===e[_xfa_object.$extra].firstUnsplittable&&(e[_xfa_object.$extra].firstUnsplittable=t,e[_xfa_object.$extra].noLayoutFailure=!0)}function unsetFirstUnsplittable(t){const e=t[_xfa_object.$getTemplateRoot]();e[_xfa_object.$extra].firstUnsplittable===t&&(e[_xfa_object.$extra].noLayoutFailure=!1)}function handleBreak(t){if(t[_xfa_object.$extra])return!1;if(t[_xfa_object.$extra]=Object.create(null),"auto"===t.targetType)return!1;const e=t[_xfa_object.$getTemplateRoot]();let s=null;if(t.target){if(s=e[_xfa_object.$searchNode](t.target,t[_xfa_object.$getParent]()),!s)return!1;s=s[0]}const{currentPageArea:i,currentContentArea:a}=e[_xfa_object.$extra];if("pageArea"===t.targetType)return s instanceof PageArea||(s=null),t.startNew?(t[_xfa_object.$extra].target=s||i,!0):!(!s||s===i)&&(t[_xfa_object.$extra].target=s,!0);s instanceof ContentArea||(s=null);const r=s&&s[_xfa_object.$getParent]();let n;if(t.startNew)if(s){const t=r.contentArea.children;n=t.findIndex((t=>t===s))-1}else n=i.contentArea.children.findIndex((t=>t===a));else{if(!s||s===a)return!1;{const t=r.contentArea.children;n=t.findIndex((t=>t===s))-1}}return t[_xfa_object.$extra].target=r===i?null:r,t[_xfa_object.$extra].index=n,!0}function handleOverflow(t,e,s){const i=t[_xfa_object.$getTemplateRoot](),a=i[_xfa_object.$extra].noLayoutFailure,r=e[_xfa_object.$getSubformParent];e[_xfa_object.$getSubformParent]=()=>t,i[_xfa_object.$extra].noLayoutFailure=!0;const n=e[_xfa_object.$toHTML](s);t[_xfa_object.$addHTML](n.html,n.bbox),i[_xfa_object.$extra].noLayoutFailure=a,e[_xfa_object.$getSubformParent]=r}class AppearanceFilter extends _xfa_object.StringObject{constructor(t){super(TEMPLATE_NS_ID,"appearanceFilter"),this.id=t.id||"",this.type=(0,_utils.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Arc extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"arc",!0),this.circular=(0,_utils.getInteger)({data:t.circular,defaultValue:0,validate:t=>1===t}),this.hand=(0,_utils.getStringOption)(t.hand,["even","left","right"]),this.id=t.id||"",this.startAngle=(0,_utils.getFloat)({data:t.startAngle,defaultValue:0,validate:t=>!0}),this.sweepAngle=(0,_utils.getFloat)({data:t.sweepAngle,defaultValue:360,validate:t=>!0}),this.use=t.use||"",this.usehref=t.usehref||"",this.edge=null,this.fill=null}[_xfa_object.$toHTML](){const t=this.edge?this.edge:new Edge({}),e=t[_xfa_object.$toStyle](),s=Object.create(null);let i;this.fill&&"visible"===this.fill.presence?Object.assign(s,this.fill[_xfa_object.$toStyle]()):s.fill="transparent",s.strokeWidth=(0,_html_utils.measureToString)("visible"===t.presence?t.thickness:0),s.stroke=e.color;const a={xmlns:SVG_NS,style:{width:"100%",height:"100%",overflow:"visible"}};if(0===this.startAngle&&360===this.sweepAngle)i={name:"ellipse",attributes:{xmlns:SVG_NS,cx:"50%",cy:"50%",rx:"50%",ry:"50%",style:s}};else{const t=this.startAngle*Math.PI/180,e=this.sweepAngle*Math.PI/180,r=this.sweepAngle-this.startAngle>180?1:0,[n,o,c,l]=[50*(1+Math.cos(t)),50*(1-Math.sin(t)),50*(1+Math.cos(e)),50*(1-Math.sin(e))];i={name:"path",attributes:{xmlns:SVG_NS,d:`M ${n} ${o} A 50 50 0 ${r} 0 ${c} ${l}`,vectorEffect:"non-scaling-stroke",style:s}},Object.assign(a,{viewBox:"0 0 100 100",preserveAspectRatio:"none"})}const r={name:"svg",children:[i],attributes:a},n=this[_xfa_object.$getParent]()[_xfa_object.$getParent]();return hasMargin(n)?_utils.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[r]}):(r.attributes.style.position="absolute",_utils.HTMLResult.success(r))}}class Area extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"area",!0),this.colSpan=(0,_utils.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.id=t.id||"",this.name=t.name||"",this.relevant=(0,_utils.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.x=(0,_utils.getMeasurement)(t.x,"0pt"),this.y=(0,_utils.getMeasurement)(t.y,"0pt"),this.desc=null,this.extras=null,this.area=new _xfa_object.XFAObjectArray,this.draw=new _xfa_object.XFAObjectArray,this.exObject=new _xfa_object.XFAObjectArray,this.exclGroup=new _xfa_object.XFAObjectArray,this.field=new _xfa_object.XFAObjectArray,this.subform=new _xfa_object.XFAObjectArray,this.subformSet=new _xfa_object.XFAObjectArray}*[_xfa_object.$getContainedChildren](){yield*getContainedChildren(this)}[_xfa_object.$isTransparent](){return!0}[_xfa_object.$isBindable](){return!0}[_xfa_object.$addHTML](t,e){const[s,i,a,r]=e;this[_xfa_object.$extra].width=Math.max(this[_xfa_object.$extra].width,s+a),this[_xfa_object.$extra].height=Math.max(this[_xfa_object.$extra].height,i+r),this[_xfa_object.$extra].children.push(t)}[_xfa_object.$getAvailableSpace](){return this[_xfa_object.$extra].availableSpace}[_xfa_object.$toHTML](t){const e=(0,_html_utils.toStyle)(this,"position"),s={style:e,id:this[_xfa_object.$uid],class:["xfaArea"]};(0,_html_utils.isPrintOnly)(this)&&s.class.push("xfaPrintOnly"),this.name&&(s.xfaName=this.name);const i=[];this[_xfa_object.$extra]={children:i,width:0,height:0,availableSpace:t};const a=this[_xfa_object.$childrenToHTML]({filter:new Set(["area","draw","field","exclGroup","subform","subformSet"]),include:!0});if(!a.success)return a.isBreak()?a:(delete this[_xfa_object.$extra],_utils.HTMLResult.FAILURE);e.width=(0,_html_utils.measureToString)(this[_xfa_object.$extra].width),e.height=(0,_html_utils.measureToString)(this[_xfa_object.$extra].height);const r={name:"div",attributes:s,children:i},n=[this.x,this.y,this[_xfa_object.$extra].width,this[_xfa_object.$extra].height];return delete this[_xfa_object.$extra],_utils.HTMLResult.success(r,n)}}class Assist extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"assist",!0),this.id=t.id||"",this.role=t.role||"",this.use=t.use||"",this.usehref=t.usehref||"",this.speak=null,this.toolTip=null}[_xfa_object.$toHTML](){return this.toolTip&&this.toolTip[_xfa_object.$content]?this.toolTip[_xfa_object.$content]:null}}class Barcode extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"barcode",!0),this.charEncoding=(0,_utils.getKeyword)({data:t.charEncoding?t.charEncoding.toLowerCase():"",defaultValue:"",validate:t=>["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(t)||t.match(/iso-8859-\d{2}/)}),this.checksum=(0,_utils.getStringOption)(t.checksum,["none","1mod10","1mod10_1mod11","2mod10","auto"]),this.dataColumnCount=(0,_utils.getInteger)({data:t.dataColumnCount,defaultValue:-1,validate:t=>t>=0}),this.dataLength=(0,_utils.getInteger)({data:t.dataLength,defaultValue:-1,validate:t=>t>=0}),this.dataPrep=(0,_utils.getStringOption)(t.dataPrep,["none","flateCompress"]),this.dataRowCount=(0,_utils.getInteger)({data:t.dataRowCount,defaultValue:-1,validate:t=>t>=0}),this.endChar=t.endChar||"",this.errorCorrectionLevel=(0,_utils.getInteger)({data:t.errorCorrectionLevel,defaultValue:-1,validate:t=>t>=0&&t<=8}),this.id=t.id||"",this.moduleHeight=(0,_utils.getMeasurement)(t.moduleHeight,"5mm"),this.moduleWidth=(0,_utils.getMeasurement)(t.moduleWidth,"0.25mm"),this.printCheckDigit=(0,_utils.getInteger)({data:t.printCheckDigit,defaultValue:0,validate:t=>1===t}),this.rowColumnRatio=(0,_utils.getRatio)(t.rowColumnRatio),this.startChar=t.startChar||"",this.textLocation=(0,_utils.getStringOption)(t.textLocation,["below","above","aboveEmbedded","belowEmbedded","none"]),this.truncate=(0,_utils.getInteger)({data:t.truncate,defaultValue:0,validate:t=>1===t}),this.type=(0,_utils.getStringOption)(t.type?t.type.toLowerCase():"",["aztec","codabar","code2of5industrial","code2of5interleaved","code2of5matrix","code2of5standard","code3of9","code3of9extended","code11","code49","code93","code128","code128a","code128b","code128c","code128sscc","datamatrix","ean8","ean8add2","ean8add5","ean13","ean13add2","ean13add5","ean13pwcd","fim","logmars","maxicode","msi","pdf417","pdf417macro","plessey","postauscust2","postauscust3","postausreplypaid","postausstandard","postukrm4scc","postusdpbc","postusimb","postusstandard","postus5zip","qrcode","rfid","rss14","rss14expanded","rss14limited","rss14stacked","rss14stackedomni","rss14truncated","telepen","ucc128","ucc128random","ucc128sscc","upca","upcaadd2","upcaadd5","upcapwcd","upce","upceadd2","upceadd5","upcean2","upcean5","upsmaxicode"]),this.upsMode=(0,_utils.getStringOption)(t.upsMode,["usCarrier","internationalCarrier","secureSymbol","standardSymbol"]),this.use=t.use||"",this.usehref=t.usehref||"",this.wideNarrowRatio=(0,_utils.getRatio)(t.wideNarrowRatio),this.encrypt=null,this.extras=null}}class Bind extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"bind",!0),this.match=(0,_utils.getStringOption)(t.match,["once","dataRef","global","none"]),this.ref=t.ref||"",this.picture=null}}class BindItems extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"bindItems"),this.connection=t.connection||"",this.labelRef=t.labelRef||"",this.ref=t.ref||"",this.valueRef=t.valueRef||""}}exports.BindItems=BindItems;class Bookend extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"bookend"),this.id=t.id||"",this.leader=t.leader||"",this.trailer=t.trailer||"",this.use=t.use||"",this.usehref=t.usehref||""}}class BooleanElement extends _xfa_object.Option01{constructor(t){super(TEMPLATE_NS_ID,"boolean"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[_xfa_object.$toHTML](t){return valueToHtml(1===this[_xfa_object.$content]?"1":"0")}}class Border extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"border",!0),this.break=(0,_utils.getStringOption)(t.break,["close","open"]),this.hand=(0,_utils.getStringOption)(t.hand,["even","left","right"]),this.id=t.id||"",this.presence=(0,_utils.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,_utils.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.corner=new _xfa_object.XFAObjectArray(4),this.edge=new _xfa_object.XFAObjectArray(4),this.extras=null,this.fill=null,this.margin=null}[_xfa_object.$getExtra](){if(!this[_xfa_object.$extra]){const t=this.edge.children.slice();if(t.length<4){const e=t[t.length-1]||new Edge({});for(let s=t.length;s<4;s++)t.push(e)}const e=t.map((t=>t.thickness)),s=[0,0,0,0];this.margin&&(s[0]=this.margin.topInset,s[1]=this.margin.rightInset,s[2]=this.margin.bottomInset,s[3]=this.margin.leftInset),this[_xfa_object.$extra]={widths:e,insets:s,edges:t}}return this[_xfa_object.$extra]}[_xfa_object.$toStyle](){const{edges:t}=this[_xfa_object.$getExtra](),e=t.map((t=>{const e=t[_xfa_object.$toStyle]();return e.color=e.color||"#000000",e})),s=Object.create(null);if(this.margin&&Object.assign(s,this.margin[_xfa_object.$toStyle]()),this.fill&&"visible"===this.fill.presence&&Object.assign(s,this.fill[_xfa_object.$toStyle]()),this.corner.children.some((t=>0!==t.radius))){const t=this.corner.children.map((t=>t[_xfa_object.$toStyle]()));if(2===t.length||3===t.length){const e=t[t.length-1];for(let s=t.length;s<4;s++)t.push(e)}s.borderRadius=t.map((t=>t.radius)).join(" ")}switch(this.presence){case"invisible":case"hidden":s.borderStyle="";break;case"inactive":s.borderStyle="none";break;default:s.borderStyle=e.map((t=>t.style)).join(" ");break}return s.borderWidth=e.map((t=>t.width)).join(" "),s.borderColor=e.map((t=>t.color)).join(" "),s}}class Break extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"break",!0),this.after=(0,_utils.getStringOption)(t.after,["auto","contentArea","pageArea","pageEven","pageOdd"]),this.afterTarget=t.afterTarget||"",this.before=(0,_utils.getStringOption)(t.before,["auto","contentArea","pageArea","pageEven","pageOdd"]),this.beforeTarget=t.beforeTarget||"",this.bookendLeader=t.bookendLeader||"",this.bookendTrailer=t.bookendTrailer||"",this.id=t.id||"",this.overflowLeader=t.overflowLeader||"",this.overflowTarget=t.overflowTarget||"",this.overflowTrailer=t.overflowTrailer||"",this.startNew=(0,_utils.getInteger)({data:t.startNew,defaultValue:0,validate:t=>1===t}),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}}class BreakAfter extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"breakAfter",!0),this.id=t.id||"",this.leader=t.leader||"",this.startNew=(0,_utils.getInteger)({data:t.startNew,defaultValue:0,validate:t=>1===t}),this.target=t.target||"",this.targetType=(0,_utils.getStringOption)(t.targetType,["auto","contentArea","pageArea"]),this.trailer=t.trailer||"",this.use=t.use||"",this.usehref=t.usehref||"",this.script=null}}class BreakBefore extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"breakBefore",!0),this.id=t.id||"",this.leader=t.leader||"",this.startNew=(0,_utils.getInteger)({data:t.startNew,defaultValue:0,validate:t=>1===t}),this.target=t.target||"",this.targetType=(0,_utils.getStringOption)(t.targetType,["auto","contentArea","pageArea"]),this.trailer=t.trailer||"",this.use=t.use||"",this.usehref=t.usehref||"",this.script=null}[_xfa_object.$toHTML](t){return this[_xfa_object.$extra]={},_utils.HTMLResult.FAILURE}}class Button extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"button",!0),this.highlight=(0,_utils.getStringOption)(t.highlight,["inverted","none","outline","push"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}[_xfa_object.$toHTML](t){const e=this[_xfa_object.$getParent](),s=e[_xfa_object.$getParent](),i={name:"button",attributes:{id:this[_xfa_object.$uid],class:["xfaButton"],style:{}},children:[]};for(const a of s.event.children){if("click"!==a.activity||!a.script)continue;const t=(0,_core_utils.recoverJsURL)(a.script[_xfa_object.$content]);if(!t)continue;const e=(0,_html_utils.fixURL)(t.url);e&&i.children.push({name:"a",attributes:{id:"link"+this[_xfa_object.$uid],href:e,newWindow:t.newWindow,class:["xfaLink"],style:{}},children:[]})}return _utils.HTMLResult.success(i)}}class Calculate extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"calculate",!0),this.id=t.id||"",this.override=(0,_utils.getStringOption)(t.override,["disabled","error","ignore","warning"]),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.message=null,this.script=null}}class Caption extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"caption",!0),this.id=t.id||"",this.placement=(0,_utils.getStringOption)(t.placement,["left","bottom","inline","right","top"]),this.presence=(0,_utils.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.reserve=Math.ceil((0,_utils.getMeasurement)(t.reserve)),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.font=null,this.margin=null,this.para=null,this.value=null}[_xfa_object.$setValue](t){_setValue(this,t)}[_xfa_object.$getExtra](t){if(!this[_xfa_object.$extra]){let{width:e,height:s}=t;switch(this.placement){case"left":case"right":case"inline":e=this.reserve<=0?e:this.reserve;break;case"top":case"bottom":s=this.reserve<=0?s:this.reserve;break}this[_xfa_object.$extra]=(0,_html_utils.layoutNode)(this,{width:e,height:s})}return this[_xfa_object.$extra]}[_xfa_object.$toHTML](t){if(!this.value)return _utils.HTMLResult.EMPTY;this[_xfa_object.$pushPara]();const e=this.value[_xfa_object.$toHTML](t).html;if(!e)return this[_xfa_object.$popPara](),_utils.HTMLResult.EMPTY;const s=this.reserve;if(this.reserve<=0){const{w:e,h:s}=this[_xfa_object.$getExtra](t);switch(this.placement){case"left":case"right":case"inline":this.reserve=e;break;case"top":case"bottom":this.reserve=s;break}}const i=[];"string"===typeof e?i.push({name:"#text",value:e}):i.push(e);const a=(0,_html_utils.toStyle)(this,"font","margin","visibility");switch(this.placement){case"left":case"right":this.reserve>0&&(a.width=(0,_html_utils.measureToString)(this.reserve));break;case"top":case"bottom":this.reserve>0&&(a.height=(0,_html_utils.measureToString)(this.reserve));break}return(0,_html_utils.setPara)(this,null,e),this[_xfa_object.$popPara](),this.reserve=s,_utils.HTMLResult.success({name:"div",attributes:{style:a,class:["xfaCaption"]},children:i})}}class Certificate extends _xfa_object.StringObject{constructor(t){super(TEMPLATE_NS_ID,"certificate"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class Certificates extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"certificates",!0),this.credentialServerPolicy=(0,_utils.getStringOption)(t.credentialServerPolicy,["optional","required"]),this.id=t.id||"",this.url=t.url||"",this.urlPolicy=t.urlPolicy||"",this.use=t.use||"",this.usehref=t.usehref||"",this.encryption=null,this.issuers=null,this.keyUsage=null,this.oids=null,this.signing=null,this.subjectDNs=null}}class CheckButton extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"checkButton",!0),this.id=t.id||"",this.mark=(0,_utils.getStringOption)(t.mark,["default","check","circle","cross","diamond","square","star"]),this.shape=(0,_utils.getStringOption)(t.shape,["square","round"]),this.size=(0,_utils.getMeasurement)(t.size,"10pt"),this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.margin=null}[_xfa_object.$toHTML](t){const e=(0,_html_utils.toStyle)("margin"),s=(0,_html_utils.measureToString)(this.size);let i,a,r;e.width=e.height=s;const n=this[_xfa_object.$getParent]()[_xfa_object.$getParent](),o=n.items.children.length&&n.items.children[0][_xfa_object.$toHTML]().html||[],c={on:(void 0!==o[0]?o[0]:"on").toString(),off:(void 0!==o[1]?o[1]:"off").toString()},l=n.value&&n.value[_xfa_object.$text]()||"off",h=l===c.on||void 0,u=n[_xfa_object.$getSubformParent](),_=n[_xfa_object.$uid];let f;u instanceof ExclGroup?(r=u[_xfa_object.$uid],i="radio",a="xfaRadio",f=u[_xfa_object.$data]&&u[_xfa_object.$data][_xfa_object.$uid]||u[_xfa_object.$uid]):(i="checkbox",a="xfaCheckbox",f=n[_xfa_object.$data]&&n[_xfa_object.$data][_xfa_object.$uid]||n[_xfa_object.$uid]);const b={name:"input",attributes:{class:[a],style:e,fieldId:_,dataId:f,type:i,checked:h,xfaOn:c.on,xfaOff:c.off,"aria-label":ariaLabel(n)}};return r&&(b.attributes.name=r),_utils.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[b]})}}class ChoiceList extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"choiceList",!0),this.commitOn=(0,_utils.getStringOption)(t.commitOn,["select","exit"]),this.id=t.id||"",this.open=(0,_utils.getStringOption)(t.open,["userControl","always","multiSelect","onEntry"]),this.textEntry=(0,_utils.getInteger)({data:t.textEntry,defaultValue:0,validate:t=>1===t}),this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.margin=null}[_xfa_object.$toHTML](t){const e=(0,_html_utils.toStyle)(this,"border","margin"),s=this[_xfa_object.$getParent](),i=s[_xfa_object.$getParent](),a=i.font&&i.font.size||10,r={fontSize:`calc(${a}px * var(--zoom-factor))`},n=[];if(i.items.children.length>0){const t=i.items;let e=0,s=0;2===t.children.length&&(e=t.children[0].save,s=1-e);const a=t.children[e][_xfa_object.$toHTML]().html,o=t.children[s][_xfa_object.$toHTML]().html;let c=!1;const l=i.value&&i.value[_xfa_object.$text]()||"";for(let i=0,h=a.length;i<h;i++){const t={name:"option",attributes:{value:o[i]||a[i],style:r},value:a[i]};o[i]===l&&(t.attributes.selected=c=!0),n.push(t)}c||n.splice(0,0,{name:"option",attributes:{hidden:!0,selected:!0},value:" "})}const o={class:["xfaSelect"],fieldId:i[_xfa_object.$uid],dataId:i[_xfa_object.$data]&&i[_xfa_object.$data][_xfa_object.$uid]||i[_xfa_object.$uid],style:e,"aria-label":ariaLabel(i)};return"multiSelect"===this.open&&(o.multiple=!0),_utils.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[{name:"select",children:n,attributes:o}]})}}class Color extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"color",!0),this.cSpace=(0,_utils.getStringOption)(t.cSpace,["SRGB"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.value=t.value?(0,_utils.getColor)(t.value):"",this.extras=null}[_xfa_object.$hasSettableValue](){return!1}[_xfa_object.$toStyle](){return this.value?_util.Util.makeHexColor(this.value.r,this.value.g,this.value.b):null}}class Comb extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"comb"),this.id=t.id||"",this.numberOfCells=(0,_utils.getInteger)({data:t.numberOfCells,defaultValue:0,validate:t=>t>=0}),this.use=t.use||"",this.usehref=t.usehref||""}}class Connect extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"connect",!0),this.connection=t.connection||"",this.id=t.id||"",this.ref=t.ref||"",this.usage=(0,_utils.getStringOption)(t.usage,["exportAndImport","exportOnly","importOnly"]),this.use=t.use||"",this.usehref=t.usehref||"",this.picture=null}}class ContentArea extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"contentArea",!0),this.h=(0,_utils.getMeasurement)(t.h),this.id=t.id||"",this.name=t.name||"",this.relevant=(0,_utils.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.w=(0,_utils.getMeasurement)(t.w),this.x=(0,_utils.getMeasurement)(t.x,"0pt"),this.y=(0,_utils.getMeasurement)(t.y,"0pt"),this.desc=null,this.extras=null}[_xfa_object.$toHTML](t){const e=(0,_html_utils.measureToString)(this.x),s=(0,_html_utils.measureToString)(this.y),i={left:e,top:s,width:(0,_html_utils.measureToString)(this.w),height:(0,_html_utils.measureToString)(this.h)},a=["xfaContentarea"];return(0,_html_utils.isPrintOnly)(this)&&a.push("xfaPrintOnly"),_utils.HTMLResult.success({name:"div",children:[],attributes:{style:i,class:a,id:this[_xfa_object.$uid]}})}}class Corner extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"corner",!0),this.id=t.id||"",this.inverted=(0,_utils.getInteger)({data:t.inverted,defaultValue:0,validate:t=>1===t}),this.join=(0,_utils.getStringOption)(t.join,["square","round"]),this.presence=(0,_utils.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.radius=(0,_utils.getMeasurement)(t.radius),this.stroke=(0,_utils.getStringOption)(t.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]),this.thickness=(0,_utils.getMeasurement)(t.thickness,"0.5pt"),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[_xfa_object.$toStyle](){const t=(0,_html_utils.toStyle)(this,"visibility");return t.radius=(0,_html_utils.measureToString)("square"===this.join?0:this.radius),t}}class DateElement extends _xfa_object.ContentObject{constructor(t){super(TEMPLATE_NS_ID,"date"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[_xfa_object.$finalize](){const t=this[_xfa_object.$content].trim();this[_xfa_object.$content]=t?new Date(t):null}[_xfa_object.$toHTML](t){return valueToHtml(this[_xfa_object.$content]?this[_xfa_object.$content].toString():"")}}class DateTime extends _xfa_object.ContentObject{constructor(t){super(TEMPLATE_NS_ID,"dateTime"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[_xfa_object.$finalize](){const t=this[_xfa_object.$content].trim();this[_xfa_object.$content]=t?new Date(t):null}[_xfa_object.$toHTML](t){return valueToHtml(this[_xfa_object.$content]?this[_xfa_object.$content].toString():"")}}class DateTimeEdit extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"dateTimeEdit",!0),this.hScrollPolicy=(0,_utils.getStringOption)(t.hScrollPolicy,["auto","off","on"]),this.id=t.id||"",this.picker=(0,_utils.getStringOption)(t.picker,["host","none"]),this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.comb=null,this.extras=null,this.margin=null}[_xfa_object.$toHTML](t){const e=(0,_html_utils.toStyle)(this,"border","font","margin"),s=this[_xfa_object.$getParent]()[_xfa_object.$getParent](),i={name:"input",attributes:{type:"text",fieldId:s[_xfa_object.$uid],dataId:s[_xfa_object.$data]&&s[_xfa_object.$data][_xfa_object.$uid]||s[_xfa_object.$uid],class:["xfaTextfield"],style:e,"aria-label":ariaLabel(s)}};return _utils.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[i]})}}class Decimal extends _xfa_object.ContentObject{constructor(t){super(TEMPLATE_NS_ID,"decimal"),this.fracDigits=(0,_utils.getInteger)({data:t.fracDigits,defaultValue:2,validate:t=>!0}),this.id=t.id||"",this.leadDigits=(0,_utils.getInteger)({data:t.leadDigits,defaultValue:-1,validate:t=>!0}),this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[_xfa_object.$finalize](){const t=parseFloat(this[_xfa_object.$content].trim());this[_xfa_object.$content]=isNaN(t)?null:t}[_xfa_object.$toHTML](t){return valueToHtml(null!==this[_xfa_object.$content]?this[_xfa_object.$content].toString():"")}}class DefaultUi extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"defaultUi",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}}class Desc extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"desc",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.boolean=new _xfa_object.XFAObjectArray,this.date=new _xfa_object.XFAObjectArray,this.dateTime=new _xfa_object.XFAObjectArray,this.decimal=new _xfa_object.XFAObjectArray,this.exData=new _xfa_object.XFAObjectArray,this.float=new _xfa_object.XFAObjectArray,this.image=new _xfa_object.XFAObjectArray,this.integer=new _xfa_object.XFAObjectArray,this.text=new _xfa_object.XFAObjectArray,this.time=new _xfa_object.XFAObjectArray}}class DigestMethod extends _xfa_object.OptionObject{constructor(t){super(TEMPLATE_NS_ID,"digestMethod",["","SHA1","SHA256","SHA512","RIPEMD160"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class DigestMethods extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"digestMethods",!0),this.id=t.id||"",this.type=(0,_utils.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.digestMethod=new _xfa_object.XFAObjectArray}}class Draw extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"draw",!0),this.anchorType=(0,_utils.getStringOption)(t.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,_utils.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.h=t.h?(0,_utils.getMeasurement)(t.h):"",this.hAlign=(0,_utils.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.locale=t.locale||"",this.maxH=(0,_utils.getMeasurement)(t.maxH,"0pt"),this.maxW=(0,_utils.getMeasurement)(t.maxW,"0pt"),this.minH=(0,_utils.getMeasurement)(t.minH,"0pt"),this.minW=(0,_utils.getMeasurement)(t.minW,"0pt"),this.name=t.name||"",this.presence=(0,_utils.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,_utils.getRelevant)(t.relevant),this.rotate=(0,_utils.getInteger)({data:t.rotate,defaultValue:0,validate:t=>t%90===0}),this.use=t.use||"",this.usehref=t.usehref||"",this.w=t.w?(0,_utils.getMeasurement)(t.w):"",this.x=(0,_utils.getMeasurement)(t.x,"0pt"),this.y=(0,_utils.getMeasurement)(t.y,"0pt"),this.assist=null,this.border=null,this.caption=null,this.desc=null,this.extras=null,this.font=null,this.keep=null,this.margin=null,this.para=null,this.traversal=null,this.ui=null,this.value=null,this.setProperty=new _xfa_object.XFAObjectArray}[_xfa_object.$setValue](t){_setValue(this,t)}[_xfa_object.$toHTML](t){if(setTabIndex(this),"hidden"===this.presence||"inactive"===this.presence)return _utils.HTMLResult.EMPTY;(0,_html_utils.fixDimensions)(this),this[_xfa_object.$pushPara]();const e=this.w,s=this.h,{w:i,h:a,isBroken:r}=(0,_html_utils.layoutNode)(this,t);if(i&&""===this.w){if(r&&this[_xfa_object.$getSubformParent]()[_xfa_object.$isThereMoreWidth]())return this[_xfa_object.$popPara](),_utils.HTMLResult.FAILURE;this.w=i}if(a&&""===this.h&&(this.h=a),setFirstUnsplittable(this),!(0,_layout.checkDimensions)(this,t))return this.w=e,this.h=s,this[_xfa_object.$popPara](),_utils.HTMLResult.FAILURE;unsetFirstUnsplittable(this);const n=(0,_html_utils.toStyle)(this,"font","hAlign","dimensions","position","presence","rotate","anchorType","border","margin");(0,_html_utils.setMinMaxDimensions)(this,n),n.margin&&(n.padding=n.margin,delete n.margin);const o=["xfaDraw"];this.font&&o.push("xfaFont"),(0,_html_utils.isPrintOnly)(this)&&o.push("xfaPrintOnly");const c={style:n,id:this[_xfa_object.$uid],class:o};this.name&&(c.xfaName=this.name);const l={name:"div",attributes:c,children:[]};applyAssist(this,c);const h=(0,_html_utils.computeBbox)(this,l,t),u=this.value?this.value[_xfa_object.$toHTML](t).html:null;return null===u?(this.w=e,this.h=s,this[_xfa_object.$popPara](),_utils.HTMLResult.success((0,_html_utils.createWrapper)(this,l),h)):(l.children.push(u),(0,_html_utils.setPara)(this,n,u),this.w=e,this.h=s,this[_xfa_object.$popPara](),_utils.HTMLResult.success((0,_html_utils.createWrapper)(this,l),h))}}class Edge extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"edge",!0),this.cap=(0,_utils.getStringOption)(t.cap,["square","butt","round"]),this.id=t.id||"",this.presence=(0,_utils.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.stroke=(0,_utils.getStringOption)(t.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]),this.thickness=(0,_utils.getMeasurement)(t.thickness,"0.5pt"),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[_xfa_object.$toStyle](){const t=(0,_html_utils.toStyle)(this,"visibility");if(Object.assign(t,{linecap:this.cap,width:(0,_html_utils.measureToString)(this.thickness),color:this.color?this.color[_xfa_object.$toStyle]():"#000000",style:""}),"visible"!==this.presence)t.style="none";else switch(this.stroke){case"solid":t.style="solid";break;case"dashDot":t.style="dashed";break;case"dashDotDot":t.style="dashed";break;case"dashed":t.style="dashed";break;case"dotted":t.style="dotted";break;case"embossed":t.style="ridge";break;case"etched":t.style="groove";break;case"lowered":t.style="inset";break;case"raised":t.style="outset";break}return t}}class Encoding extends _xfa_object.OptionObject{constructor(t){super(TEMPLATE_NS_ID,"encoding",["adbe.x509.rsa_sha1","adbe.pkcs7.detached","adbe.pkcs7.sha1"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class Encodings extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"encodings",!0),this.id=t.id||"",this.type=(0,_utils.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.encoding=new _xfa_object.XFAObjectArray}}class Encrypt extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"encrypt",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.certificate=null}}class EncryptData extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"encryptData",!0),this.id=t.id||"",this.operation=(0,_utils.getStringOption)(t.operation,["encrypt","decrypt"]),this.target=t.target||"",this.use=t.use||"",this.usehref=t.usehref||"",this.filter=null,this.manifest=null}}class Encryption extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"encryption",!0),this.id=t.id||"",this.type=(0,_utils.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.certificate=new _xfa_object.XFAObjectArray}}class EncryptionMethod extends _xfa_object.OptionObject{constructor(t){super(TEMPLATE_NS_ID,"encryptionMethod",["","AES256-CBC","TRIPLEDES-CBC","AES128-CBC","AES192-CBC"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class EncryptionMethods extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"encryptionMethods",!0),this.id=t.id||"",this.type=(0,_utils.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.encryptionMethod=new _xfa_object.XFAObjectArray}}class Event extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"event",!0),this.activity=(0,_utils.getStringOption)(t.activity,["click","change","docClose","docReady","enter","exit","full","indexChange","initialize","mouseDown","mouseEnter","mouseExit","mouseUp","postExecute","postOpen","postPrint","postSave","postSign","postSubmit","preExecute","preOpen","prePrint","preSave","preSign","preSubmit","ready","validationState"]),this.id=t.id||"",this.listen=(0,_utils.getStringOption)(t.listen,["refOnly","refAndDescendents"]),this.name=t.name||"",this.ref=t.ref||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.encryptData=null,this.execute=null,this.script=null,this.signData=null,this.submit=null}}class ExData extends _xfa_object.ContentObject{constructor(t){super(TEMPLATE_NS_ID,"exData"),this.contentType=t.contentType||"",this.href=t.href||"",this.id=t.id||"",this.maxLength=(0,_utils.getInteger)({data:t.maxLength,defaultValue:-1,validate:t=>t>=-1}),this.name=t.name||"",this.rid=t.rid||"",this.transferEncoding=(0,_utils.getStringOption)(t.transferEncoding,["none","base64","package"]),this.use=t.use||"",this.usehref=t.usehref||""}[_xfa_object.$isCDATAXml](){return"text/html"===this.contentType}[_xfa_object.$onChild](t){return("text/html"===this.contentType&&t[_xfa_object.$namespaceId]===_namespaces.NamespaceIds.xhtml.id||"text/xml"===this.contentType)&&(this[_xfa_object.$content]=t,!0)}[_xfa_object.$toHTML](t){return"text/html"===this.contentType&&this[_xfa_object.$content]?this[_xfa_object.$content][_xfa_object.$toHTML](t):_utils.HTMLResult.EMPTY}}class ExObject extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"exObject",!0),this.archive=t.archive||"",this.classId=t.classId||"",this.codeBase=t.codeBase||"",this.codeType=t.codeType||"",this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.boolean=new _xfa_object.XFAObjectArray,this.date=new _xfa_object.XFAObjectArray,this.dateTime=new _xfa_object.XFAObjectArray,this.decimal=new _xfa_object.XFAObjectArray,this.exData=new _xfa_object.XFAObjectArray,this.exObject=new _xfa_object.XFAObjectArray,this.float=new _xfa_object.XFAObjectArray,this.image=new _xfa_object.XFAObjectArray,this.integer=new _xfa_object.XFAObjectArray,this.text=new _xfa_object.XFAObjectArray,this.time=new _xfa_object.XFAObjectArray}}class ExclGroup extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"exclGroup",!0),this.access=(0,_utils.getStringOption)(t.access,["open","nonInteractive","protected","readOnly"]),this.accessKey=t.accessKey||"",this.anchorType=(0,_utils.getStringOption)(t.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,_utils.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.h=t.h?(0,_utils.getMeasurement)(t.h):"",this.hAlign=(0,_utils.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.layout=(0,_utils.getStringOption)(t.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]),this.maxH=(0,_utils.getMeasurement)(t.maxH,"0pt"),this.maxW=(0,_utils.getMeasurement)(t.maxW,"0pt"),this.minH=(0,_utils.getMeasurement)(t.minH,"0pt"),this.minW=(0,_utils.getMeasurement)(t.minW,"0pt"),this.name=t.name||"",this.presence=(0,_utils.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,_utils.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.w=t.w?(0,_utils.getMeasurement)(t.w):"",this.x=(0,_utils.getMeasurement)(t.x,"0pt"),this.y=(0,_utils.getMeasurement)(t.y,"0pt"),this.assist=null,this.bind=null,this.border=null,this.calculate=null,this.caption=null,this.desc=null,this.extras=null,this.margin=null,this.para=null,this.traversal=null,this.validate=null,this.connect=new _xfa_object.XFAObjectArray,this.event=new _xfa_object.XFAObjectArray,this.field=new _xfa_object.XFAObjectArray,this.setProperty=new _xfa_object.XFAObjectArray}[_xfa_object.$isBindable](){return!0}[_xfa_object.$hasSettableValue](){return!0}[_xfa_object.$setValue](t){for(const e of this.field.children){if(!e.value){const t=new Value({});e[_xfa_object.$appendChild](t),e.value=t}e.value[_xfa_object.$setValue](t)}}[_xfa_object.$isThereMoreWidth](){return this.layout.endsWith("-tb")&&0===this[_xfa_object.$extra].attempt&&this[_xfa_object.$extra].numberInLine>0||this[_xfa_object.$getParent]()[_xfa_object.$isThereMoreWidth]()}[_xfa_object.$isSplittable](){const t=this[_xfa_object.$getSubformParent]();return!!t[_xfa_object.$isSplittable]()&&(void 0!==this[_xfa_object.$extra]._isSplittable?this[_xfa_object.$extra]._isSplittable:"position"===this.layout||this.layout.includes("row")?(this[_xfa_object.$extra]._isSplittable=!1,!1):(!t.layout||!t.layout.endsWith("-tb")||0===t[_xfa_object.$extra].numberInLine)&&(this[_xfa_object.$extra]._isSplittable=!0,!0))}[_xfa_object.$flushHTML](){return(0,_layout.flushHTML)(this)}[_xfa_object.$addHTML](t,e){(0,_layout.addHTML)(this,t,e)}[_xfa_object.$getAvailableSpace](){return(0,_layout.getAvailableSpace)(this)}[_xfa_object.$toHTML](t){if(setTabIndex(this),"hidden"===this.presence||"inactive"===this.presence||0===this.h||0===this.w)return _utils.HTMLResult.EMPTY;(0,_html_utils.fixDimensions)(this);const e=[],s={id:this[_xfa_object.$uid],class:[]};(0,_html_utils.setAccess)(this,s.class),this[_xfa_object.$extra]||(this[_xfa_object.$extra]=Object.create(null)),Object.assign(this[_xfa_object.$extra],{children:e,attributes:s,attempt:0,line:null,numberInLine:0,availableSpace:{width:Math.min(this.w||1/0,t.width),height:Math.min(this.h||1/0,t.height)},width:0,height:0,prevHeight:0,currentWidth:0});const i=this[_xfa_object.$isSplittable]();if(i||setFirstUnsplittable(this),!(0,_layout.checkDimensions)(this,t))return _utils.HTMLResult.FAILURE;const a=new Set(["field"]);if(this.layout.includes("row")){const t=this[_xfa_object.$getSubformParent]().columnWidths;Array.isArray(t)&&t.length>0&&(this[_xfa_object.$extra].columnWidths=t,this[_xfa_object.$extra].currentColumn=0)}const r=(0,_html_utils.toStyle)(this,"anchorType","dimensions","position","presence","border","margin","hAlign"),n=["xfaExclgroup"],o=(0,_html_utils.layoutClass)(this);o&&n.push(o),(0,_html_utils.isPrintOnly)(this)&&n.push("xfaPrintOnly"),s.style=r,s.class=n,this.name&&(s.xfaName=this.name),this[_xfa_object.$pushPara]();const c="lr-tb"===this.layout||"rl-tb"===this.layout,l=c?MAX_ATTEMPTS_FOR_LRTB_LAYOUT:1;for(;this[_xfa_object.$extra].attempt<l;this[_xfa_object.$extra].attempt++){c&&this[_xfa_object.$extra].attempt===MAX_ATTEMPTS_FOR_LRTB_LAYOUT-1&&(this[_xfa_object.$extra].numberInLine=0);const t=this[_xfa_object.$childrenToHTML]({filter:a,include:!0});if(t.success)break;if(t.isBreak())return this[_xfa_object.$popPara](),t;if(c&&0===this[_xfa_object.$extra].attempt&&0===this[_xfa_object.$extra].numberInLine&&!this[_xfa_object.$getTemplateRoot]()[_xfa_object.$extra].noLayoutFailure){this[_xfa_object.$extra].attempt=l;break}}if(this[_xfa_object.$popPara](),i||unsetFirstUnsplittable(this),this[_xfa_object.$extra].attempt===l)return i||delete this[_xfa_object.$extra],_utils.HTMLResult.FAILURE;let h=0,u=0;this.margin&&(h=this.margin.leftInset+this.margin.rightInset,u=this.margin.topInset+this.margin.bottomInset);const _=Math.max(this[_xfa_object.$extra].width+h,this.w||0),f=Math.max(this[_xfa_object.$extra].height+u,this.h||0),b=[this.x,this.y,_,f];""===this.w&&(r.width=(0,_html_utils.measureToString)(_)),""===this.h&&(r.height=(0,_html_utils.measureToString)(f));const d={name:"div",attributes:s,children:e};return applyAssist(this,s),delete this[_xfa_object.$extra],_utils.HTMLResult.success((0,_html_utils.createWrapper)(this,d),b)}}class Execute extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"execute"),this.connection=t.connection||"",this.executeType=(0,_utils.getStringOption)(t.executeType,["import","remerge"]),this.id=t.id||"",this.runAt=(0,_utils.getStringOption)(t.runAt,["client","both","server"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Extras extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"extras",!0),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||"",this.boolean=new _xfa_object.XFAObjectArray,this.date=new _xfa_object.XFAObjectArray,this.dateTime=new _xfa_object.XFAObjectArray,this.decimal=new _xfa_object.XFAObjectArray,this.exData=new _xfa_object.XFAObjectArray,this.extras=new _xfa_object.XFAObjectArray,this.float=new _xfa_object.XFAObjectArray,this.image=new _xfa_object.XFAObjectArray,this.integer=new _xfa_object.XFAObjectArray,this.text=new _xfa_object.XFAObjectArray,this.time=new _xfa_object.XFAObjectArray}}class Field extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"field",!0),this.access=(0,_utils.getStringOption)(t.access,["open","nonInteractive","protected","readOnly"]),this.accessKey=t.accessKey||"",this.anchorType=(0,_utils.getStringOption)(t.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,_utils.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.h=t.h?(0,_utils.getMeasurement)(t.h):"",this.hAlign=(0,_utils.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.locale=t.locale||"",this.maxH=(0,_utils.getMeasurement)(t.maxH,"0pt"),this.maxW=(0,_utils.getMeasurement)(t.maxW,"0pt"),this.minH=(0,_utils.getMeasurement)(t.minH,"0pt"),this.minW=(0,_utils.getMeasurement)(t.minW,"0pt"),this.name=t.name||"",this.presence=(0,_utils.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,_utils.getRelevant)(t.relevant),this.rotate=(0,_utils.getInteger)({data:t.rotate,defaultValue:0,validate:t=>t%90===0}),this.use=t.use||"",this.usehref=t.usehref||"",this.w=t.w?(0,_utils.getMeasurement)(t.w):"",this.x=(0,_utils.getMeasurement)(t.x,"0pt"),this.y=(0,_utils.getMeasurement)(t.y,"0pt"),this.assist=null,this.bind=null,this.border=null,this.calculate=null,this.caption=null,this.desc=null,this.extras=null,this.font=null,this.format=null,this.items=new _xfa_object.XFAObjectArray(2),this.keep=null,this.margin=null,this.para=null,this.traversal=null,this.ui=null,this.validate=null,this.value=null,this.bindItems=new _xfa_object.XFAObjectArray,this.connect=new _xfa_object.XFAObjectArray,this.event=new _xfa_object.XFAObjectArray,this.setProperty=new _xfa_object.XFAObjectArray}[_xfa_object.$isBindable](){return!0}[_xfa_object.$setValue](t){_setValue(this,t)}[_xfa_object.$toHTML](t){if(setTabIndex(this),!this.ui){let t;switch(this.ui=new Ui({}),this.ui[_xfa_object.$globalData]=this[_xfa_object.$globalData],this[_xfa_object.$appendChild](this.ui),this.items.children.length){case 0:t=new TextEdit({}),this.ui.textEdit=t;break;case 1:t=new CheckButton({}),this.ui.checkButton=t;break;case 2:t=new ChoiceList({}),this.ui.choiceList=t;break}this.ui[_xfa_object.$appendChild](t)}if(!this.ui||"hidden"===this.presence||"inactive"===this.presence||0===this.h||0===this.w)return _utils.HTMLResult.EMPTY;this.caption&&delete this.caption[_xfa_object.$extra],this[_xfa_object.$pushPara]();const e=this.caption?this.caption[_xfa_object.$toHTML](t).html:null,s=this.w,i=this.h;let a=0,r=0;this.margin&&(a=this.margin.leftInset+this.margin.rightInset,r=this.margin.topInset+this.margin.bottomInset);let n=null;if(""===this.w||""===this.h){let e=null,s=null,i=0,o=0;if(this.ui.checkButton)i=o=this.ui.checkButton.size;else{const{w:e,h:s}=(0,_html_utils.layoutNode)(this,t);null!==e?(i=e,o=s):o=(0,_fonts.getMetrics)(this.font,!0).lineNoGap}if(n=getBorderDims(this.ui[_xfa_object.$getExtra]()),i+=n.w,o+=n.h,this.caption){const{w:a,h:r,isBroken:n}=this.caption[_xfa_object.$getExtra](t);if(n&&this[_xfa_object.$getSubformParent]()[_xfa_object.$isThereMoreWidth]())return this[_xfa_object.$popPara](),_utils.HTMLResult.FAILURE;switch(e=a,s=r,this.caption.placement){case"left":case"right":case"inline":e+=i;break;case"top":case"bottom":s+=o;break}}else e=i,s=o;e&&""===this.w&&(e+=a,this.w=Math.min(this.maxW<=0?1/0:this.maxW,this.minW+1<e?e:this.minW)),s&&""===this.h&&(s+=r,this.h=Math.min(this.maxH<=0?1/0:this.maxH,this.minH+1<s?s:this.minH))}if(this[_xfa_object.$popPara](),(0,_html_utils.fixDimensions)(this),setFirstUnsplittable(this),!(0,_layout.checkDimensions)(this,t))return this.w=s,this.h=i,this[_xfa_object.$popPara](),_utils.HTMLResult.FAILURE;unsetFirstUnsplittable(this);const o=(0,_html_utils.toStyle)(this,"font","dimensions","position","rotate","anchorType","presence","margin","hAlign");(0,_html_utils.setMinMaxDimensions)(this,o);const c=["xfaField"];this.font&&c.push("xfaFont"),(0,_html_utils.isPrintOnly)(this)&&c.push("xfaPrintOnly");const l={style:o,id:this[_xfa_object.$uid],class:c};o.margin&&(o.padding=o.margin,delete o.margin),(0,_html_utils.setAccess)(this,c),this.name&&(l.xfaName=this.name);const h=[],u={name:"div",attributes:l,children:h};applyAssist(this,l);const _=this.border?this.border[_xfa_object.$toStyle]():null,f=(0,_html_utils.computeBbox)(this,u,t),b=this.ui[_xfa_object.$toHTML]().html;if(!b)return Object.assign(o,_),_utils.HTMLResult.success((0,_html_utils.createWrapper)(this,u),f);this[_xfa_object.$tabIndex]&&(b.children&&b.children[0]?b.children[0].attributes.tabindex=this[_xfa_object.$tabIndex]:b.attributes.tabindex=this[_xfa_object.$tabIndex]),b.attributes.style||(b.attributes.style=Object.create(null));let d=null;if(this.ui.button?(1===b.children.length&&([d]=b.children.splice(0,1)),Object.assign(b.attributes.style,_)):Object.assign(o,_),h.push(b),this.value)if(this.ui.imageEdit)b.children.push(this.value[_xfa_object.$toHTML]().html);else if(!this.ui.button){let t="";if(this.value.exData)t=this.value.exData[_xfa_object.$text]();else if(this.value.text)t=this.value.text[_xfa_object.$getExtra]();else{const e=this.value[_xfa_object.$toHTML]().html;null!==e&&(t=e.children[0].value)}this.ui.textEdit&&this.value.text&&this.value.text.maxChars&&(b.children[0].attributes.maxLength=this.value.text.maxChars),t&&(this.ui.numericEdit&&(t=parseFloat(t),t=isNaN(t)?"":t.toString()),"textarea"===b.children[0].name?b.children[0].attributes.textContent=t:b.children[0].attributes.value=t)}if(!this.ui.imageEdit&&b.children&&b.children[0]&&this.h){n=n||getBorderDims(this.ui[_xfa_object.$getExtra]());let e=0;if(this.caption&&["top","bottom"].includes(this.caption.placement)){e=this.caption.reserve,e<=0&&(e=this.caption[_xfa_object.$getExtra](t).h);const s=this.h-e-r-n.h;b.children[0].attributes.style.height=(0,_html_utils.measureToString)(s)}else b.children[0].attributes.style.height="100%"}if(d&&b.children.push(d),!e)return b.attributes.class&&b.attributes.class.push("xfaLeft"),this.w=s,this.h=i,_utils.HTMLResult.success((0,_html_utils.createWrapper)(this,u),f);if(this.ui.button)return o.padding&&delete o.padding,"div"===e.name&&(e.name="span"),b.children.push(e),_utils.HTMLResult.success(u,f);switch(this.ui.checkButton&&(e.attributes.class[0]="xfaCaptionForCheckButton"),b.attributes.class||(b.attributes.class=[]),b.children.splice(0,0,e),this.caption.placement){case"left":b.attributes.class.push("xfaLeft");break;case"right":b.attributes.class.push("xfaRight");break;case"top":b.attributes.class.push("xfaTop");break;case"bottom":b.attributes.class.push("xfaBottom");break;case"inline":b.attributes.class.push("xfaLeft");break}return this.w=s,this.h=i,_utils.HTMLResult.success((0,_html_utils.createWrapper)(this,u),f)}}exports.Field=Field;class Fill extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"fill",!0),this.id=t.id||"",this.presence=(0,_utils.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null,this.linear=null,this.pattern=null,this.radial=null,this.solid=null,this.stipple=null}[_xfa_object.$toStyle](){const t=this[_xfa_object.$getParent](),e=t[_xfa_object.$getParent](),s=e[_xfa_object.$getParent](),i=Object.create(null);let a="color",r=a;t instanceof Border&&(a="background-color",r="background",s instanceof Ui&&(i.backgroundColor="white")),(t instanceof Rectangle||t instanceof Arc)&&(a=r="fill",i.fill="white");for(const n of Object.getOwnPropertyNames(this)){if("extras"===n||"color"===n)continue;const t=this[n];if(!(t instanceof _xfa_object.XFAObject))continue;const e=t[_xfa_object.$toStyle](this.color);return e&&(i[e.startsWith("#")?a:r]=e),i}if(this.color&&this.color.value){const t=this.color[_xfa_object.$toStyle]();i[t.startsWith("#")?a:r]=t}return i}}class Filter extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"filter",!0),this.addRevocationInfo=(0,_utils.getStringOption)(t.addRevocationInfo,["","required","optional","none"]),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||"",this.version=(0,_utils.getInteger)({data:this.version,defaultValue:5,validate:t=>t>=1&&t<=5}),this.appearanceFilter=null,this.certificates=null,this.digestMethods=null,this.encodings=null,this.encryptionMethods=null,this.handler=null,this.lockDocument=null,this.mdp=null,this.reasons=null,this.timeStamp=null}}class Float extends _xfa_object.ContentObject{constructor(t){super(TEMPLATE_NS_ID,"float"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[_xfa_object.$finalize](){const t=parseFloat(this[_xfa_object.$content].trim());this[_xfa_object.$content]=isNaN(t)?null:t}[_xfa_object.$toHTML](t){return valueToHtml(null!==this[_xfa_object.$content]?this[_xfa_object.$content].toString():"")}}class Font extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"font",!0),this.baselineShift=(0,_utils.getMeasurement)(t.baselineShift),this.fontHorizontalScale=(0,_utils.getFloat)({data:t.fontHorizontalScale,defaultValue:100,validate:t=>t>=0}),this.fontVerticalScale=(0,_utils.getFloat)({data:t.fontVerticalScale,defaultValue:100,validate:t=>t>=0}),this.id=t.id||"",this.kerningMode=(0,_utils.getStringOption)(t.kerningMode,["none","pair"]),this.letterSpacing=(0,_utils.getMeasurement)(t.letterSpacing,"0"),this.lineThrough=(0,_utils.getInteger)({data:t.lineThrough,defaultValue:0,validate:t=>1===t||2===t}),this.lineThroughPeriod=(0,_utils.getStringOption)(t.lineThroughPeriod,["all","word"]),this.overline=(0,_utils.getInteger)({data:t.overline,defaultValue:0,validate:t=>1===t||2===t}),this.overlinePeriod=(0,_utils.getStringOption)(t.overlinePeriod,["all","word"]),this.posture=(0,_utils.getStringOption)(t.posture,["normal","italic"]),this.size=(0,_utils.getMeasurement)(t.size,"10pt"),this.typeface=t.typeface||"Courier",this.underline=(0,_utils.getInteger)({data:t.underline,defaultValue:0,validate:t=>1===t||2===t}),this.underlinePeriod=(0,_utils.getStringOption)(t.underlinePeriod,["all","word"]),this.use=t.use||"",this.usehref=t.usehref||"",this.weight=(0,_utils.getStringOption)(t.weight,["normal","bold"]),this.extras=null,this.fill=null}[_xfa_object.$clean](t){super[_xfa_object.$clean](t),this[_xfa_object.$globalData].usedTypefaces.add(this.typeface)}[_xfa_object.$toStyle](){const t=(0,_html_utils.toStyle)(this,"fill"),e=t.color;return e&&("#000000"===e?delete t.color:e.startsWith("#")||(t.background=e,t.backgroundClip="text",t.color="transparent")),this.baselineShift&&(t.verticalAlign=(0,_html_utils.measureToString)(this.baselineShift)),t.fontKerning="none"===this.kerningMode?"none":"normal",t.letterSpacing=(0,_html_utils.measureToString)(this.letterSpacing),0!==this.lineThrough&&(t.textDecoration="line-through",2===this.lineThrough&&(t.textDecorationStyle="double")),0!==this.overline&&(t.textDecoration="overline",2===this.overline&&(t.textDecorationStyle="double")),t.fontStyle=this.posture,t.fontSize=(0,_html_utils.measureToString)(.99*this.size),(0,_html_utils.setFontFamily)(this,this,this[_xfa_object.$globalData].fontFinder,t),0!==this.underline&&(t.textDecoration="underline",2===this.underline&&(t.textDecorationStyle="double")),t.fontWeight=this.weight,t}}class Format extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"format",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.picture=null}}class Handler extends _xfa_object.StringObject{constructor(t){super(TEMPLATE_NS_ID,"handler"),this.id=t.id||"",this.type=(0,_utils.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Hyphenation extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"hyphenation"),this.excludeAllCaps=(0,_utils.getInteger)({data:t.excludeAllCaps,defaultValue:0,validate:t=>1===t}),this.excludeInitialCap=(0,_utils.getInteger)({data:t.excludeInitialCap,defaultValue:0,validate:t=>1===t}),this.hyphenate=(0,_utils.getInteger)({data:t.hyphenate,defaultValue:0,validate:t=>1===t}),this.id=t.id||"",this.pushCharacterCount=(0,_utils.getInteger)({data:t.pushCharacterCount,defaultValue:3,validate:t=>t>=0}),this.remainCharacterCount=(0,_utils.getInteger)({data:t.remainCharacterCount,defaultValue:3,validate:t=>t>=0}),this.use=t.use||"",this.usehref=t.usehref||"",this.wordCharacterCount=(0,_utils.getInteger)({data:t.wordCharacterCount,defaultValue:7,validate:t=>t>=0})}}class Image extends _xfa_object.StringObject{constructor(t){super(TEMPLATE_NS_ID,"image"),this.aspect=(0,_utils.getStringOption)(t.aspect,["fit","actual","height","none","width"]),this.contentType=t.contentType||"",this.href=t.href||"",this.id=t.id||"",this.name=t.name||"",this.transferEncoding=(0,_utils.getStringOption)(t.transferEncoding,["base64","none","package"]),this.use=t.use||"",this.usehref=t.usehref||""}[_xfa_object.$toHTML](){if(this.contentType&&!MIMES.has(this.contentType.toLowerCase()))return _utils.HTMLResult.EMPTY;let t=this[_xfa_object.$globalData].images&&this[_xfa_object.$globalData].images.get(this.href);if(!t&&(this.href||!this[_xfa_object.$content]))return _utils.HTMLResult.EMPTY;if(t||"base64"!==this.transferEncoding||(t=(0,_util.stringToBytes)(atob(this[_xfa_object.$content]))),!t)return _utils.HTMLResult.EMPTY;if(!this.contentType){for(const[e,s]of IMAGES_HEADERS)if(t.length>e.length&&e.every(((e,s)=>e===t[s]))){this.contentType=s;break}if(!this.contentType)return _utils.HTMLResult.EMPTY}const e=new Blob([t],{type:this.contentType});let s;switch(this.aspect){case"fit":case"actual":break;case"height":s={height:"100%",objectFit:"fill"};break;case"none":s={width:"100%",height:"100%",objectFit:"fill"};break;case"width":s={width:"100%",objectFit:"fill"};break}const i=this[_xfa_object.$getParent]();return _utils.HTMLResult.success({name:"img",attributes:{class:["xfaImage"],style:s,src:URL.createObjectURL(e),alt:i?ariaLabel(i[_xfa_object.$getParent]()):null}})}}class ImageEdit extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"imageEdit",!0),this.data=(0,_utils.getStringOption)(t.data,["link","embed"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.margin=null}[_xfa_object.$toHTML](t){return"embed"===this.data?_utils.HTMLResult.success({name:"div",children:[],attributes:{}}):_utils.HTMLResult.EMPTY}}class Integer extends _xfa_object.ContentObject{constructor(t){super(TEMPLATE_NS_ID,"integer"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[_xfa_object.$finalize](){const t=parseInt(this[_xfa_object.$content].trim(),10);this[_xfa_object.$content]=isNaN(t)?null:t}[_xfa_object.$toHTML](t){return valueToHtml(null!==this[_xfa_object.$content]?this[_xfa_object.$content].toString():"")}}class Issuers extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"issuers",!0),this.id=t.id||"",this.type=(0,_utils.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.certificate=new _xfa_object.XFAObjectArray}}class Items extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"items",!0),this.id=t.id||"",this.name=t.name||"",this.presence=(0,_utils.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.ref=t.ref||"",this.save=(0,_utils.getInteger)({data:t.save,defaultValue:0,validate:t=>1===t}),this.use=t.use||"",this.usehref=t.usehref||"",this.boolean=new _xfa_object.XFAObjectArray,this.date=new _xfa_object.XFAObjectArray,this.dateTime=new _xfa_object.XFAObjectArray,this.decimal=new _xfa_object.XFAObjectArray,this.exData=new _xfa_object.XFAObjectArray,this.float=new _xfa_object.XFAObjectArray,this.image=new _xfa_object.XFAObjectArray,this.integer=new _xfa_object.XFAObjectArray,this.text=new _xfa_object.XFAObjectArray,this.time=new _xfa_object.XFAObjectArray}[_xfa_object.$toHTML](){const t=[];for(const e of this[_xfa_object.$getChildren]())t.push(e[_xfa_object.$text]());return _utils.HTMLResult.success(t)}}exports.Items=Items;class Keep extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"keep",!0),this.id=t.id||"";const e=["none","contentArea","pageArea"];this.intact=(0,_utils.getStringOption)(t.intact,e),this.next=(0,_utils.getStringOption)(t.next,e),this.previous=(0,_utils.getStringOption)(t.previous,e),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}}class KeyUsage extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"keyUsage");const e=["","yes","no"];this.crlSign=(0,_utils.getStringOption)(t.crlSign,e),this.dataEncipherment=(0,_utils.getStringOption)(t.dataEncipherment,e),this.decipherOnly=(0,_utils.getStringOption)(t.decipherOnly,e),this.digitalSignature=(0,_utils.getStringOption)(t.digitalSignature,e),this.encipherOnly=(0,_utils.getStringOption)(t.encipherOnly,e),this.id=t.id||"",this.keyAgreement=(0,_utils.getStringOption)(t.keyAgreement,e),this.keyCertSign=(0,_utils.getStringOption)(t.keyCertSign,e),this.keyEncipherment=(0,_utils.getStringOption)(t.keyEncipherment,e),this.nonRepudiation=(0,_utils.getStringOption)(t.nonRepudiation,e),this.type=(0,_utils.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Line extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"line",!0),this.hand=(0,_utils.getStringOption)(t.hand,["even","left","right"]),this.id=t.id||"",this.slope=(0,_utils.getStringOption)(t.slope,["\\","/"]),this.use=t.use||"",this.usehref=t.usehref||"",this.edge=null}[_xfa_object.$toHTML](){const t=this[_xfa_object.$getParent]()[_xfa_object.$getParent](),e=this.edge?this.edge:new Edge({}),s=e[_xfa_object.$toStyle](),i=Object.create(null),a="visible"===e.presence?e.thickness:0;let r,n,o,c;i.strokeWidth=(0,_html_utils.measureToString)(a),i.stroke=s.color;let l="100%",h="100%";t.w<=a?([r,n,o,c]=["50%",0,"50%","100%"],l=i.strokeWidth):t.h<=a?([r,n,o,c]=[0,"50%","100%","50%"],h=i.strokeWidth):"\\"===this.slope?[r,n,o,c]=[0,0,"100%","100%"]:[r,n,o,c]=[0,"100%","100%",0];const u={name:"line",attributes:{xmlns:SVG_NS,x1:r,y1:n,x2:o,y2:c,style:i}},_={name:"svg",children:[u],attributes:{xmlns:SVG_NS,width:l,height:h,style:{overflow:"visible"}}};return hasMargin(t)?_utils.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[_]}):(_.attributes.style.position="absolute",_utils.HTMLResult.success(_))}}class Linear extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"linear",!0),this.id=t.id||"",this.type=(0,_utils.getStringOption)(t.type,["toRight","toBottom","toLeft","toTop"]),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[_xfa_object.$toStyle](t){t=t?t[_xfa_object.$toStyle]():"#FFFFFF";const e=this.type.replace(/([RBLT])/," $1").toLowerCase(),s=this.color?this.color[_xfa_object.$toStyle]():"#000000";return`linear-gradient(${e}, ${t}, ${s})`}}class LockDocument extends _xfa_object.ContentObject{constructor(t){super(TEMPLATE_NS_ID,"lockDocument"),this.id=t.id||"",this.type=(0,_utils.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}[_xfa_object.$finalize](){this[_xfa_object.$content]=(0,_utils.getStringOption)(this[_xfa_object.$content],["auto","0","1"])}}class Manifest extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"manifest",!0),this.action=(0,_utils.getStringOption)(t.action,["include","all","exclude"]),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.ref=new _xfa_object.XFAObjectArray}}class Margin extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"margin",!0),this.bottomInset=(0,_utils.getMeasurement)(t.bottomInset,"0"),this.id=t.id||"",this.leftInset=(0,_utils.getMeasurement)(t.leftInset,"0"),this.rightInset=(0,_utils.getMeasurement)(t.rightInset,"0"),this.topInset=(0,_utils.getMeasurement)(t.topInset,"0"),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}[_xfa_object.$toStyle](){return{margin:(0,_html_utils.measureToString)(this.topInset)+" "+(0,_html_utils.measureToString)(this.rightInset)+" "+(0,_html_utils.measureToString)(this.bottomInset)+" "+(0,_html_utils.measureToString)(this.leftInset)}}}class Mdp extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"mdp"),this.id=t.id||"",this.permissions=(0,_utils.getInteger)({data:t.permissions,defaultValue:2,validate:t=>1===t||3===t}),this.signatureType=(0,_utils.getStringOption)(t.signatureType,["filler","author"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Medium extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"medium"),this.id=t.id||"",this.imagingBBox=(0,_utils.getBBox)(t.imagingBBox),this.long=(0,_utils.getMeasurement)(t.long),this.orientation=(0,_utils.getStringOption)(t.orientation,["portrait","landscape"]),this.short=(0,_utils.getMeasurement)(t.short),this.stock=t.stock||"",this.trayIn=(0,_utils.getStringOption)(t.trayIn,["auto","delegate","pageFront"]),this.trayOut=(0,_utils.getStringOption)(t.trayOut,["auto","delegate"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Message extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"message",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.text=new _xfa_object.XFAObjectArray}}class NumericEdit extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"numericEdit",!0),this.hScrollPolicy=(0,_utils.getStringOption)(t.hScrollPolicy,["auto","off","on"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.comb=null,this.extras=null,this.margin=null}[_xfa_object.$toHTML](t){const e=(0,_html_utils.toStyle)(this,"border","font","margin"),s=this[_xfa_object.$getParent]()[_xfa_object.$getParent](),i={name:"input",attributes:{type:"text",fieldId:s[_xfa_object.$uid],dataId:s[_xfa_object.$data]&&s[_xfa_object.$data][_xfa_object.$uid]||s[_xfa_object.$uid],class:["xfaTextfield"],style:e,"aria-label":ariaLabel(s)}};return _utils.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[i]})}}class Occur extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"occur",!0),this.id=t.id||"",this.initial=""!==t.initial?(0,_utils.getInteger)({data:t.initial,defaultValue:"",validate:t=>!0}):"",this.max=""!==t.max?(0,_utils.getInteger)({data:t.max,defaultValue:1,validate:t=>!0}):"",this.min=""!==t.min?(0,_utils.getInteger)({data:t.min,defaultValue:1,validate:t=>!0}):"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}[_xfa_object.$clean](){const t=this[_xfa_object.$getParent](),e=this.min;""===this.min&&(this.min=t instanceof PageArea||t instanceof PageSet?0:1),""===this.max&&(this.max=""===e?t instanceof PageArea||t instanceof PageSet?-1:1:this.min),-1!==this.max&&this.max<this.min&&(this.max=this.min),""===this.initial&&(this.initial=t instanceof Template?1:this.min)}}class Oid extends _xfa_object.StringObject{constructor(t){super(TEMPLATE_NS_ID,"oid"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class Oids extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"oids",!0),this.id=t.id||"",this.type=(0,_utils.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.oid=new _xfa_object.XFAObjectArray}}class Overflow extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"overflow"),this.id=t.id||"",this.leader=t.leader||"",this.target=t.target||"",this.trailer=t.trailer||"",this.use=t.use||"",this.usehref=t.usehref||""}[_xfa_object.$getExtra](){if(!this[_xfa_object.$extra]){const t=this[_xfa_object.$getParent](),e=this[_xfa_object.$getTemplateRoot](),s=e[_xfa_object.$searchNode](this.target,t),i=e[_xfa_object.$searchNode](this.leader,t),a=e[_xfa_object.$searchNode](this.trailer,t);this[_xfa_object.$extra]={target:s&&s[0]||null,leader:i&&i[0]||null,trailer:a&&a[0]||null,addLeader:!1,addTrailer:!1}}return this[_xfa_object.$extra]}}class PageArea extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"pageArea",!0),this.blankOrNotBlank=(0,_utils.getStringOption)(t.blankOrNotBlank,["any","blank","notBlank"]),this.id=t.id||"",this.initialNumber=(0,_utils.getInteger)({data:t.initialNumber,defaultValue:1,validate:t=>!0}),this.name=t.name||"",this.numbered=(0,_utils.getInteger)({data:t.numbered,defaultValue:1,validate:t=>!0}),this.oddOrEven=(0,_utils.getStringOption)(t.oddOrEven,["any","even","odd"]),this.pagePosition=(0,_utils.getStringOption)(t.pagePosition,["any","first","last","only","rest"]),this.relevant=(0,_utils.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.desc=null,this.extras=null,this.medium=null,this.occur=null,this.area=new _xfa_object.XFAObjectArray,this.contentArea=new _xfa_object.XFAObjectArray,this.draw=new _xfa_object.XFAObjectArray,this.exclGroup=new _xfa_object.XFAObjectArray,this.field=new _xfa_object.XFAObjectArray,this.subform=new _xfa_object.XFAObjectArray}[_xfa_object.$isUsable](){return this[_xfa_object.$extra]?!this.occur||-1===this.occur.max||this[_xfa_object.$extra].numberOfUse<this.occur.max:(this[_xfa_object.$extra]={numberOfUse:0},!0)}[_xfa_object.$cleanPage](){delete this[_xfa_object.$extra]}[_xfa_object.$getNextPage](){this[_xfa_object.$extra]||(this[_xfa_object.$extra]={numberOfUse:0});const t=this[_xfa_object.$getParent]();return"orderedOccurrence"===t.relation&&this[_xfa_object.$isUsable]()?(this[_xfa_object.$extra].numberOfUse+=1,this):t[_xfa_object.$getNextPage]()}[_xfa_object.$getAvailableSpace](){return this[_xfa_object.$extra].space||{width:0,height:0}}[_xfa_object.$toHTML](){this[_xfa_object.$extra]||(this[_xfa_object.$extra]={numberOfUse:1});const t=[];this[_xfa_object.$extra].children=t;const e=Object.create(null);if(this.medium&&this.medium.short&&this.medium.long){if(e.width=(0,_html_utils.measureToString)(this.medium.short),e.height=(0,_html_utils.measureToString)(this.medium.long),this[_xfa_object.$extra].space={width:this.medium.short,height:this.medium.long},"landscape"===this.medium.orientation){const t=e.width;e.width=e.height,e.height=t,this[_xfa_object.$extra].space={width:this.medium.long,height:this.medium.short}}}else(0,_util.warn)("XFA - No medium specified in pageArea: please file a bug.");return this[_xfa_object.$childrenToHTML]({filter:new Set(["area","draw","field","subform"]),include:!0}),this[_xfa_object.$childrenToHTML]({filter:new Set(["contentArea"]),include:!0}),_utils.HTMLResult.success({name:"div",children:t,attributes:{class:["xfaPage"],id:this[_xfa_object.$uid],style:e,xfaName:this.name}})}}class PageSet extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"pageSet",!0),this.duplexImposition=(0,_utils.getStringOption)(t.duplexImposition,["longEdge","shortEdge"]),this.id=t.id||"",this.name=t.name||"",this.relation=(0,_utils.getStringOption)(t.relation,["orderedOccurrence","duplexPaginated","simplexPaginated"]),this.relevant=(0,_utils.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.occur=null,this.pageArea=new _xfa_object.XFAObjectArray,this.pageSet=new _xfa_object.XFAObjectArray}[_xfa_object.$cleanPage](){for(const t of this.pageArea.children)t[_xfa_object.$cleanPage]();for(const t of this.pageSet.children)t[_xfa_object.$cleanPage]()}[_xfa_object.$isUsable](){return!this.occur||-1===this.occur.max||this[_xfa_object.$extra].numberOfUse<this.occur.max}[_xfa_object.$getNextPage](){if(this[_xfa_object.$extra]||(this[_xfa_object.$extra]={numberOfUse:1,pageIndex:-1,pageSetIndex:-1}),"orderedOccurrence"===this.relation){if(this[_xfa_object.$extra].pageIndex+1<this.pageArea.children.length){this[_xfa_object.$extra].pageIndex+=1;const t=this.pageArea.children[this[_xfa_object.$extra].pageIndex];return t[_xfa_object.$getNextPage]()}if(this[_xfa_object.$extra].pageSetIndex+1<this.pageSet.children.length)return this[_xfa_object.$extra].pageSetIndex+=1,this.pageSet.children[this[_xfa_object.$extra].pageSetIndex][_xfa_object.$getNextPage]();if(this[_xfa_object.$isUsable]())return this[_xfa_object.$extra].numberOfUse+=1,this[_xfa_object.$extra].pageIndex=-1,this[_xfa_object.$extra].pageSetIndex=-1,this[_xfa_object.$getNextPage]();const t=this[_xfa_object.$getParent]();return t instanceof PageSet?t[_xfa_object.$getNextPage]():(this[_xfa_object.$cleanPage](),this[_xfa_object.$getNextPage]())}const t=this[_xfa_object.$getTemplateRoot]()[_xfa_object.$extra].pageNumber,e=t%2===0?"even":"odd",s=0===t?"first":"rest";let i=this.pageArea.children.find((t=>t.oddOrEven===e&&t.pagePosition===s));return i||(i=this.pageArea.children.find((t=>"any"===t.oddOrEven&&t.pagePosition===s)),i||(i=this.pageArea.children.find((t=>"any"===t.oddOrEven&&"any"===t.pagePosition)),i||this.pageArea.children[0]))}}class Para extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"para",!0),this.hAlign=(0,_utils.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.lineHeight=t.lineHeight?(0,_utils.getMeasurement)(t.lineHeight,"0pt"):"",this.marginLeft=t.marginLeft?(0,_utils.getMeasurement)(t.marginLeft,"0pt"):"",this.marginRight=t.marginRight?(0,_utils.getMeasurement)(t.marginRight,"0pt"):"",this.orphans=(0,_utils.getInteger)({data:t.orphans,defaultValue:0,validate:t=>t>=0}),this.preserve=t.preserve||"",this.radixOffset=t.radixOffset?(0,_utils.getMeasurement)(t.radixOffset,"0pt"):"",this.spaceAbove=t.spaceAbove?(0,_utils.getMeasurement)(t.spaceAbove,"0pt"):"",this.spaceBelow=t.spaceBelow?(0,_utils.getMeasurement)(t.spaceBelow,"0pt"):"",this.tabDefault=t.tabDefault?(0,_utils.getMeasurement)(this.tabDefault):"",this.tabStops=(t.tabStops||"").trim().split(/\s+/).map(((t,e)=>e%2===1?(0,_utils.getMeasurement)(t):t)),this.textIndent=t.textIndent?(0,_utils.getMeasurement)(t.textIndent,"0pt"):"",this.use=t.use||"",this.usehref=t.usehref||"",this.vAlign=(0,_utils.getStringOption)(t.vAlign,["top","bottom","middle"]),this.widows=(0,_utils.getInteger)({data:t.widows,defaultValue:0,validate:t=>t>=0}),this.hyphenation=null}[_xfa_object.$toStyle](){const t=(0,_html_utils.toStyle)(this,"hAlign");return""!==this.marginLeft&&(t.paddingLeft=(0,_html_utils.measureToString)(this.marginLeft)),""!==this.marginRight&&(t.paddingight=(0,_html_utils.measureToString)(this.marginRight)),""!==this.spaceAbove&&(t.paddingTop=(0,_html_utils.measureToString)(this.spaceAbove)),""!==this.spaceBelow&&(t.paddingBottom=(0,_html_utils.measureToString)(this.spaceBelow)),""!==this.textIndent&&(t.textIndent=(0,_html_utils.measureToString)(this.textIndent),(0,_html_utils.fixTextIndent)(t)),this.lineHeight>0&&(t.lineHeight=(0,_html_utils.measureToString)(this.lineHeight)),""!==this.tabDefault&&(t.tabSize=(0,_html_utils.measureToString)(this.tabDefault)),this.tabStops.length,this.hyphenatation&&Object.assign(t,this.hyphenatation[_xfa_object.$toStyle]()),t}}class PasswordEdit extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"passwordEdit",!0),this.hScrollPolicy=(0,_utils.getStringOption)(t.hScrollPolicy,["auto","off","on"]),this.id=t.id||"",this.passwordChar=t.passwordChar||"*",this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.margin=null}}class Pattern extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"pattern",!0),this.id=t.id||"",this.type=(0,_utils.getStringOption)(t.type,["crossHatch","crossDiagonal","diagonalLeft","diagonalRight","horizontal","vertical"]),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[_xfa_object.$toStyle](t){t=t?t[_xfa_object.$toStyle]():"#FFFFFF";const e=this.color?this.color[_xfa_object.$toStyle]():"#000000",s=5,i="repeating-linear-gradient",a=`${t},${t} ${s}px,${e} ${s}px,${e} ${2*s}px`;switch(this.type){case"crossHatch":return`${i}(to top,${a}) ${i}(to right,${a})`;case"crossDiagonal":return`${i}(45deg,${a}) ${i}(-45deg,${a})`;case"diagonalLeft":return`${i}(45deg,${a})`;case"diagonalRight":return`${i}(-45deg,${a})`;case"horizontal":return`${i}(to top,${a})`;case"vertical":return`${i}(to right,${a})`}return""}}class Picture extends _xfa_object.StringObject{constructor(t){super(TEMPLATE_NS_ID,"picture"),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class Proto extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"proto",!0),this.appearanceFilter=new _xfa_object.XFAObjectArray,this.arc=new _xfa_object.XFAObjectArray,this.area=new _xfa_object.XFAObjectArray,this.assist=new _xfa_object.XFAObjectArray,this.barcode=new _xfa_object.XFAObjectArray,this.bindItems=new _xfa_object.XFAObjectArray,this.bookend=new _xfa_object.XFAObjectArray,this.boolean=new _xfa_object.XFAObjectArray,this.border=new _xfa_object.XFAObjectArray,this.break=new _xfa_object.XFAObjectArray,this.breakAfter=new _xfa_object.XFAObjectArray,this.breakBefore=new _xfa_object.XFAObjectArray,this.button=new _xfa_object.XFAObjectArray,this.calculate=new _xfa_object.XFAObjectArray,this.caption=new _xfa_object.XFAObjectArray,this.certificate=new _xfa_object.XFAObjectArray,this.certificates=new _xfa_object.XFAObjectArray,this.checkButton=new _xfa_object.XFAObjectArray,this.choiceList=new _xfa_object.XFAObjectArray,this.color=new _xfa_object.XFAObjectArray,this.comb=new _xfa_object.XFAObjectArray,this.connect=new _xfa_object.XFAObjectArray,this.contentArea=new _xfa_object.XFAObjectArray,this.corner=new _xfa_object.XFAObjectArray,this.date=new _xfa_object.XFAObjectArray,this.dateTime=new _xfa_object.XFAObjectArray,this.dateTimeEdit=new _xfa_object.XFAObjectArray,this.decimal=new _xfa_object.XFAObjectArray,this.defaultUi=new _xfa_object.XFAObjectArray,this.desc=new _xfa_object.XFAObjectArray,this.digestMethod=new _xfa_object.XFAObjectArray,this.digestMethods=new _xfa_object.XFAObjectArray,this.draw=new _xfa_object.XFAObjectArray,this.edge=new _xfa_object.XFAObjectArray,this.encoding=new _xfa_object.XFAObjectArray,this.encodings=new _xfa_object.XFAObjectArray,this.encrypt=new _xfa_object.XFAObjectArray,this.encryptData=new _xfa_object.XFAObjectArray,this.encryption=new _xfa_object.XFAObjectArray,this.encryptionMethod=new _xfa_object.XFAObjectArray,this.encryptionMethods=new _xfa_object.XFAObjectArray,this.event=new _xfa_object.XFAObjectArray,this.exData=new _xfa_object.XFAObjectArray,this.exObject=new _xfa_object.XFAObjectArray,this.exclGroup=new _xfa_object.XFAObjectArray,this.execute=new _xfa_object.XFAObjectArray,this.extras=new _xfa_object.XFAObjectArray,this.field=new _xfa_object.XFAObjectArray,this.fill=new _xfa_object.XFAObjectArray,this.filter=new _xfa_object.XFAObjectArray,this.float=new _xfa_object.XFAObjectArray,this.font=new _xfa_object.XFAObjectArray,this.format=new _xfa_object.XFAObjectArray,this.handler=new _xfa_object.XFAObjectArray,this.hyphenation=new _xfa_object.XFAObjectArray,this.image=new _xfa_object.XFAObjectArray,this.imageEdit=new _xfa_object.XFAObjectArray,this.integer=new _xfa_object.XFAObjectArray,this.issuers=new _xfa_object.XFAObjectArray,this.items=new _xfa_object.XFAObjectArray,this.keep=new _xfa_object.XFAObjectArray,this.keyUsage=new _xfa_object.XFAObjectArray,this.line=new _xfa_object.XFAObjectArray,this.linear=new _xfa_object.XFAObjectArray,this.lockDocument=new _xfa_object.XFAObjectArray,this.manifest=new _xfa_object.XFAObjectArray,this.margin=new _xfa_object.XFAObjectArray,this.mdp=new _xfa_object.XFAObjectArray,this.medium=new _xfa_object.XFAObjectArray,this.message=new _xfa_object.XFAObjectArray,this.numericEdit=new _xfa_object.XFAObjectArray,this.occur=new _xfa_object.XFAObjectArray,this.oid=new _xfa_object.XFAObjectArray,this.oids=new _xfa_object.XFAObjectArray,this.overflow=new _xfa_object.XFAObjectArray,this.pageArea=new _xfa_object.XFAObjectArray,this.pageSet=new _xfa_object.XFAObjectArray,this.para=new _xfa_object.XFAObjectArray,this.passwordEdit=new _xfa_object.XFAObjectArray,this.pattern=new _xfa_object.XFAObjectArray,this.picture=new _xfa_object.XFAObjectArray,this.radial=new _xfa_object.XFAObjectArray,this.reason=new _xfa_object.XFAObjectArray,this.reasons=new _xfa_object.XFAObjectArray,this.rectangle=new _xfa_object.XFAObjectArray,this.ref=new _xfa_object.XFAObjectArray,this.script=new _xfa_object.XFAObjectArray,this.setProperty=new _xfa_object.XFAObjectArray,this.signData=new _xfa_object.XFAObjectArray,this.signature=new _xfa_object.XFAObjectArray,this.signing=new _xfa_object.XFAObjectArray,this.solid=new _xfa_object.XFAObjectArray,this.speak=new _xfa_object.XFAObjectArray,this.stipple=new _xfa_object.XFAObjectArray,this.subform=new _xfa_object.XFAObjectArray,this.subformSet=new _xfa_object.XFAObjectArray,this.subjectDN=new _xfa_object.XFAObjectArray,this.subjectDNs=new _xfa_object.XFAObjectArray,this.submit=new _xfa_object.XFAObjectArray,this.text=new _xfa_object.XFAObjectArray,this.textEdit=new _xfa_object.XFAObjectArray,this.time=new _xfa_object.XFAObjectArray,this.timeStamp=new _xfa_object.XFAObjectArray,this.toolTip=new _xfa_object.XFAObjectArray,this.traversal=new _xfa_object.XFAObjectArray,this.traverse=new _xfa_object.XFAObjectArray,this.ui=new _xfa_object.XFAObjectArray,this.validate=new _xfa_object.XFAObjectArray,this.value=new _xfa_object.XFAObjectArray,this.variables=new _xfa_object.XFAObjectArray}}class Radial extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"radial",!0),this.id=t.id||"",this.type=(0,_utils.getStringOption)(t.type,["toEdge","toCenter"]),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[_xfa_object.$toStyle](t){t=t?t[_xfa_object.$toStyle]():"#FFFFFF";const e=this.color?this.color[_xfa_object.$toStyle]():"#000000",s="toEdge"===this.type?`${t},${e}`:`${e},${t}`;return`radial-gradient(circle at center, ${s})`}}class Reason extends _xfa_object.StringObject{constructor(t){super(TEMPLATE_NS_ID,"reason"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class Reasons extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"reasons",!0),this.id=t.id||"",this.type=(0,_utils.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.reason=new _xfa_object.XFAObjectArray}}class Rectangle extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"rectangle",!0),this.hand=(0,_utils.getStringOption)(t.hand,["even","left","right"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.corner=new _xfa_object.XFAObjectArray(4),this.edge=new _xfa_object.XFAObjectArray(4),this.fill=null}[_xfa_object.$toHTML](){const t=this.edge.children.length?this.edge.children[0]:new Edge({}),e=t[_xfa_object.$toStyle](),s=Object.create(null);this.fill&&"visible"===this.fill.presence?Object.assign(s,this.fill[_xfa_object.$toStyle]()):s.fill="transparent",s.strokeWidth=(0,_html_utils.measureToString)("visible"===t.presence?t.thickness:0),s.stroke=e.color;const i=this.corner.children.length?this.corner.children[0]:new Corner({}),a=i[_xfa_object.$toStyle](),r={name:"rect",attributes:{xmlns:SVG_NS,width:"100%",height:"100%",x:0,y:0,rx:a.radius,ry:a.radius,style:s}},n={name:"svg",children:[r],attributes:{xmlns:SVG_NS,style:{overflow:"visible"},width:"100%",height:"100%"}},o=this[_xfa_object.$getParent]()[_xfa_object.$getParent]();return hasMargin(o)?_utils.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[n]}):(n.attributes.style.position="absolute",_utils.HTMLResult.success(n))}}class RefElement extends _xfa_object.StringObject{constructor(t){super(TEMPLATE_NS_ID,"ref"),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class Script extends _xfa_object.StringObject{constructor(t){super(TEMPLATE_NS_ID,"script"),this.binding=t.binding||"",this.contentType=t.contentType||"",this.id=t.id||"",this.name=t.name||"",this.runAt=(0,_utils.getStringOption)(t.runAt,["client","both","server"]),this.use=t.use||"",this.usehref=t.usehref||""}}class SetProperty extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"setProperty"),this.connection=t.connection||"",this.ref=t.ref||"",this.target=t.target||""}}exports.SetProperty=SetProperty;class SignData extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"signData",!0),this.id=t.id||"",this.operation=(0,_utils.getStringOption)(t.operation,["sign","clear","verify"]),this.ref=t.ref||"",this.target=t.target||"",this.use=t.use||"",this.usehref=t.usehref||"",this.filter=null,this.manifest=null}}class Signature extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"signature",!0),this.id=t.id||"",this.type=(0,_utils.getStringOption)(t.type,["PDF1.3","PDF1.6"]),this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.filter=null,this.manifest=null,this.margin=null}}class Signing extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"signing",!0),this.id=t.id||"",this.type=(0,_utils.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.certificate=new _xfa_object.XFAObjectArray}}class Solid extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"solid",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}[_xfa_object.$toStyle](t){return t?t[_xfa_object.$toStyle]():"#FFFFFF"}}class Speak extends _xfa_object.StringObject{constructor(t){super(TEMPLATE_NS_ID,"speak"),this.disable=(0,_utils.getInteger)({data:t.disable,defaultValue:0,validate:t=>1===t}),this.id=t.id||"",this.priority=(0,_utils.getStringOption)(t.priority,["custom","caption","name","toolTip"]),this.rid=t.rid||"",this.use=t.use||"",this.usehref=t.usehref||""}}class Stipple extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"stipple",!0),this.id=t.id||"",this.rate=(0,_utils.getInteger)({data:t.rate,defaultValue:50,validate:t=>t>=0&&t<=100}),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[_xfa_object.$toStyle](t){const e=this.rate/100;return _util.Util.makeHexColor(Math.round(t.value.r*(1-e)+this.value.r*e),Math.round(t.value.g*(1-e)+this.value.g*e),Math.round(t.value.b*(1-e)+this.value.b*e))}}class Subform extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"subform",!0),this.access=(0,_utils.getStringOption)(t.access,["open","nonInteractive","protected","readOnly"]),this.allowMacro=(0,_utils.getInteger)({data:t.allowMacro,defaultValue:0,validate:t=>1===t}),this.anchorType=(0,_utils.getStringOption)(t.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,_utils.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.columnWidths=(t.columnWidths||"").trim().split(/\s+/).map((t=>"-1"===t?-1:(0,_utils.getMeasurement)(t))),this.h=t.h?(0,_utils.getMeasurement)(t.h):"",this.hAlign=(0,_utils.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.layout=(0,_utils.getStringOption)(t.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]),this.locale=t.locale||"",this.maxH=(0,_utils.getMeasurement)(t.maxH,"0pt"),this.maxW=(0,_utils.getMeasurement)(t.maxW,"0pt"),this.mergeMode=(0,_utils.getStringOption)(t.mergeMode,["consumeData","matchTemplate"]),this.minH=(0,_utils.getMeasurement)(t.minH,"0pt"),this.minW=(0,_utils.getMeasurement)(t.minW,"0pt"),this.name=t.name||"",this.presence=(0,_utils.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,_utils.getRelevant)(t.relevant),this.restoreState=(0,_utils.getStringOption)(t.restoreState,["manual","auto"]),this.scope=(0,_utils.getStringOption)(t.scope,["name","none"]),this.use=t.use||"",this.usehref=t.usehref||"",this.w=t.w?(0,_utils.getMeasurement)(t.w):"",this.x=(0,_utils.getMeasurement)(t.x,"0pt"),this.y=(0,_utils.getMeasurement)(t.y,"0pt"),this.assist=null,this.bind=null,this.bookend=null,this.border=null,this.break=null,this.calculate=null,this.desc=null,this.extras=null,this.keep=null,this.margin=null,this.occur=null,this.overflow=null,this.pageSet=null,this.para=null,this.traversal=null,this.validate=null,this.variables=null,this.area=new _xfa_object.XFAObjectArray,this.breakAfter=new _xfa_object.XFAObjectArray,this.breakBefore=new _xfa_object.XFAObjectArray,this.connect=new _xfa_object.XFAObjectArray,this.draw=new _xfa_object.XFAObjectArray,this.event=new _xfa_object.XFAObjectArray,this.exObject=new _xfa_object.XFAObjectArray,this.exclGroup=new _xfa_object.XFAObjectArray,this.field=new _xfa_object.XFAObjectArray,this.proto=new _xfa_object.XFAObjectArray,this.setProperty=new _xfa_object.XFAObjectArray,this.subform=new _xfa_object.XFAObjectArray,this.subformSet=new _xfa_object.XFAObjectArray}[_xfa_object.$getSubformParent](){const t=this[_xfa_object.$getParent]();return t instanceof SubformSet?t[_xfa_object.$getSubformParent]():t}[_xfa_object.$isBindable](){return!0}[_xfa_object.$isThereMoreWidth](){return this.layout.endsWith("-tb")&&0===this[_xfa_object.$extra].attempt&&this[_xfa_object.$extra].numberInLine>0||this[_xfa_object.$getParent]()[_xfa_object.$isThereMoreWidth]()}*[_xfa_object.$getContainedChildren](){yield*getContainedChildren(this)}[_xfa_object.$flushHTML](){return(0,_layout.flushHTML)(this)}[_xfa_object.$addHTML](t,e){(0,_layout.addHTML)(this,t,e)}[_xfa_object.$getAvailableSpace](){return(0,_layout.getAvailableSpace)(this)}[_xfa_object.$isSplittable](){const t=this[_xfa_object.$getSubformParent]();return!!t[_xfa_object.$isSplittable]()&&(void 0!==this[_xfa_object.$extra]._isSplittable?this[_xfa_object.$extra]._isSplittable:"position"===this.layout||this.layout.includes("row")||this.keep&&"none"!==this.keep.intact?(this[_xfa_object.$extra]._isSplittable=!1,!1):(!t.layout||!t.layout.endsWith("-tb")||0===t[_xfa_object.$extra].numberInLine)&&(this[_xfa_object.$extra]._isSplittable=!0,!0))}[_xfa_object.$toHTML](t){if(setTabIndex(this),this.break){if("auto"!==this.break.after||""!==this.break.afterTarget){const t=new BreakAfter({targetType:this.break.after,target:this.break.afterTarget,startNew:this.break.startNew.toString()});t[_xfa_object.$globalData]=this[_xfa_object.$globalData],this[_xfa_object.$appendChild](t),this.breakAfter.push(t)}if("auto"!==this.break.before||""!==this.break.beforeTarget){const t=new BreakBefore({targetType:this.break.before,target:this.break.beforeTarget,startNew:this.break.startNew.toString()});t[_xfa_object.$globalData]=this[_xfa_object.$globalData],this[_xfa_object.$appendChild](t),this.breakBefore.push(t)}if(""!==this.break.overflowTarget){const t=new Overflow({target:this.break.overflowTarget,leader:this.break.overflowLeader,trailer:this.break.overflowTrailer});t[_xfa_object.$globalData]=this[_xfa_object.$globalData],this[_xfa_object.$appendChild](t),this.overflow.push(t)}this[_xfa_object.$removeChild](this.break),this.break=null}if("hidden"===this.presence||"inactive"===this.presence)return _utils.HTMLResult.EMPTY;if((this.breakBefore.children.length>1||this.breakAfter.children.length>1)&&(0,_util.warn)("XFA - Several breakBefore or breakAfter in subforms: please file a bug."),this.breakBefore.children.length>=1){const t=this.breakBefore.children[0];if(handleBreak(t))return _utils.HTMLResult.breakNode(t)}if(this[_xfa_object.$extra]&&this[_xfa_object.$extra].afterBreakAfter)return _utils.HTMLResult.EMPTY;(0,_html_utils.fixDimensions)(this);const e=[],s={id:this[_xfa_object.$uid],class:[]};(0,_html_utils.setAccess)(this,s.class),this[_xfa_object.$extra]||(this[_xfa_object.$extra]=Object.create(null)),Object.assign(this[_xfa_object.$extra],{children:e,line:null,attributes:s,attempt:0,numberInLine:0,availableSpace:{width:Math.min(this.w||1/0,t.width),height:Math.min(this.h||1/0,t.height)},width:0,height:0,prevHeight:0,currentWidth:0});const i=this[_xfa_object.$getTemplateRoot](),a=i[_xfa_object.$extra].noLayoutFailure,r=this[_xfa_object.$isSplittable]();if(r||setFirstUnsplittable(this),!(0,_layout.checkDimensions)(this,t))return _utils.HTMLResult.FAILURE;const n=new Set(["area","draw","exclGroup","field","subform","subformSet"]);if(this.layout.includes("row")){const t=this[_xfa_object.$getSubformParent]().columnWidths;Array.isArray(t)&&t.length>0&&(this[_xfa_object.$extra].columnWidths=t,this[_xfa_object.$extra].currentColumn=0)}const o=(0,_html_utils.toStyle)(this,"anchorType","dimensions","position","presence","border","margin","hAlign"),c=["xfaSubform"],l=(0,_html_utils.layoutClass)(this);if(l&&c.push(l),s.style=o,s.class=c,this.name&&(s.xfaName=this.name),this.overflow){const e=this.overflow[_xfa_object.$getExtra]();e.addLeader&&(e.addLeader=!1,handleOverflow(this,e.leader,t))}this[_xfa_object.$pushPara]();const h="lr-tb"===this.layout||"rl-tb"===this.layout,u=h?MAX_ATTEMPTS_FOR_LRTB_LAYOUT:1;for(;this[_xfa_object.$extra].attempt<u;this[_xfa_object.$extra].attempt++){h&&this[_xfa_object.$extra].attempt===MAX_ATTEMPTS_FOR_LRTB_LAYOUT-1&&(this[_xfa_object.$extra].numberInLine=0);const t=this[_xfa_object.$childrenToHTML]({filter:n,include:!0});if(t.success)break;if(t.isBreak())return this[_xfa_object.$popPara](),t;if(h&&0===this[_xfa_object.$extra].attempt&&0===this[_xfa_object.$extra].numberInLine&&!i[_xfa_object.$extra].noLayoutFailure){this[_xfa_object.$extra].attempt=u;break}}if(this[_xfa_object.$popPara](),r||unsetFirstUnsplittable(this),i[_xfa_object.$extra].noLayoutFailure=a,this[_xfa_object.$extra].attempt===u)return this.overflow&&(this[_xfa_object.$getTemplateRoot]()[_xfa_object.$extra].overflowNode=this.overflow),r||delete this[_xfa_object.$extra],_utils.HTMLResult.FAILURE;if(this.overflow){const e=this.overflow[_xfa_object.$getExtra]();e.addTrailer&&(e.addTrailer=!1,handleOverflow(this,e.trailer,t))}let _=0,f=0;this.margin&&(_=this.margin.leftInset+this.margin.rightInset,f=this.margin.topInset+this.margin.bottomInset);const b=Math.max(this[_xfa_object.$extra].width+_,this.w||0),d=Math.max(this[_xfa_object.$extra].height+f,this.h||0),x=[this.x,this.y,b,d];""===this.w&&(o.width=(0,_html_utils.measureToString)(b)),""===this.h&&(o.height=(0,_html_utils.measureToString)(d));const j={name:"div",attributes:s,children:e};applyAssist(this,s);const g=_utils.HTMLResult.success((0,_html_utils.createWrapper)(this,j),x);if(this.breakAfter.children.length>=1){const t=this.breakAfter.children[0];if(handleBreak(t))return this[_xfa_object.$extra].afterBreakAfter=g,_utils.HTMLResult.breakNode(t)}return delete this[_xfa_object.$extra],g}}class SubformSet extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"subformSet",!0),this.id=t.id||"",this.name=t.name||"",this.relation=(0,_utils.getStringOption)(t.relation,["ordered","choice","unordered"]),this.relevant=(0,_utils.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.bookend=null,this.break=null,this.desc=null,this.extras=null,this.occur=null,this.overflow=null,this.breakAfter=new _xfa_object.XFAObjectArray,this.breakBefore=new _xfa_object.XFAObjectArray,this.subform=new _xfa_object.XFAObjectArray,this.subformSet=new _xfa_object.XFAObjectArray}*[_xfa_object.$getContainedChildren](){yield*getContainedChildren(this)}[_xfa_object.$getSubformParent](){let t=this[_xfa_object.$getParent]();while(!(t instanceof Subform))t=t[_xfa_object.$getParent]();return t}[_xfa_object.$isBindable](){return!0}}class SubjectDN extends _xfa_object.ContentObject{constructor(t){super(TEMPLATE_NS_ID,"subjectDN"),this.delimiter=t.delimiter||",",this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[_xfa_object.$finalize](){this[_xfa_object.$content]=new Map(this[_xfa_object.$content].split(this.delimiter).map((t=>(t=t.split("=",2),t[0]=t[0].trim(),t))))}}class SubjectDNs extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"subjectDNs",!0),this.id=t.id||"",this.type=(0,_utils.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.subjectDN=new _xfa_object.XFAObjectArray}}class Submit extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"submit",!0),this.embedPDF=(0,_utils.getInteger)({data:t.embedPDF,defaultValue:0,validate:t=>1===t}),this.format=(0,_utils.getStringOption)(t.format,["xdp","formdata","pdf","urlencoded","xfd","xml"]),this.id=t.id||"",this.target=t.target||"",this.textEncoding=(0,_utils.getKeyword)({data:t.textEncoding?t.textEncoding.toLowerCase():"",defaultValue:"",validate:t=>["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(t)||t.match(/iso-8859-\d{2}/)}),this.use=t.use||"",this.usehref=t.usehref||"",this.xdpContent=t.xdpContent||"",this.encrypt=null,this.encryptData=new _xfa_object.XFAObjectArray,this.signData=new _xfa_object.XFAObjectArray}}class Template extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"template",!0),this.baseProfile=(0,_utils.getStringOption)(t.baseProfile,["full","interactiveForms"]),this.extras=null,this.subform=new _xfa_object.XFAObjectArray}[_xfa_object.$finalize](){0===this.subform.children.length&&(0,_util.warn)("XFA - No subforms in template node."),this.subform.children.length>=2&&(0,_util.warn)("XFA - Several subforms in template node: please file a bug."),this[_xfa_object.$tabIndex]=DEFAULT_TAB_INDEX}[_xfa_object.$isSplittable](){return!0}[_xfa_object.$searchNode](t,e){return t.startsWith("#")?[this[_xfa_object.$ids].get(t.slice(1))]:(0,_som.searchNode)(this,e,t,!0,!0)}[_xfa_object.$toHTML](){if(!this.subform.children.length)return _utils.HTMLResult.success({name:"div",children:[]});this[_xfa_object.$extra]={overflowNode:null,firstUnsplittable:null,currentContentArea:null,currentPageArea:null,noLayoutFailure:!1,pageNumber:1,pagePosition:"first",oddOrEven:"odd",blankOrNotBlank:"nonBlank",paraStack:[]};const t=this.subform.children[0];t.pageSet[_xfa_object.$cleanPage]();const e=t.pageSet.pageArea.children,s={name:"div",children:[]};let i=null,a=null,r=null;if(t.breakBefore.children.length>=1?(a=t.breakBefore.children[0],r=a.target):t.subform.children.length>=1&&t.subform.children[0].breakBefore.children.length>=1?(a=t.subform.children[0].breakBefore.children[0],r=a.target):t.break&&t.break.beforeTarget?(a=t.break,r=a.beforeTarget):t.subform.children.length>=1&&t.subform.children[0].break&&t.subform.children[0].break.beforeTarget&&(a=t.subform.children[0].break,r=a.beforeTarget),a){const t=this[_xfa_object.$searchNode](r,a[_xfa_object.$getParent]());t instanceof PageArea&&(i=t,a[_xfa_object.$extra]={})}i||(i=e[0]),i[_xfa_object.$extra]={numberOfUse:1};const n=i[_xfa_object.$getParent]();let o;n[_xfa_object.$extra]={numberOfUse:1,pageIndex:n.pageArea.children.indexOf(i),pageSetIndex:0};let c=null,l=null,h=!0,u=0,_=0;while(1){if(h)u=0;else if(s.children.pop(),++u===MAX_EMPTY_PAGES)return(0,_util.warn)("XFA - Something goes wrong: please file a bug."),s;o=null,this[_xfa_object.$extra].currentPageArea=i;const e=i[_xfa_object.$toHTML]().html;s.children.push(e),c&&(this[_xfa_object.$extra].noLayoutFailure=!0,e.children.push(c[_xfa_object.$toHTML](i[_xfa_object.$extra].space).html),c=null),l&&(this[_xfa_object.$extra].noLayoutFailure=!0,e.children.push(l[_xfa_object.$toHTML](i[_xfa_object.$extra].space).html),l=null);const a=i.contentArea.children,r=e.children.filter((t=>t.attributes.class.includes("xfaContentarea")));h=!1,this[_xfa_object.$extra].firstUnsplittable=null,this[_xfa_object.$extra].noLayoutFailure=!1;const n=e=>{const s=t[_xfa_object.$flushHTML]();s&&(h=h||s.children&&0!==s.children.length,r[e].children.push(s))};for(let i=_,u=a.length;i<u;i++){const e=this[_xfa_object.$extra].currentContentArea=a[i],u={width:e.w,height:e.h};_=0,c&&(r[i].children.push(c[_xfa_object.$toHTML](u).html),c=null),l&&(r[i].children.push(l[_xfa_object.$toHTML](u).html),l=null);const f=t[_xfa_object.$toHTML](u);if(f.success)return f.html?(h=h||f.html.children&&0!==f.html.children.length,r[i].children.push(f.html)):h||s.children.pop(),s;if(f.isBreak()){const t=f.breakNode;if(n(i),"auto"===t.targetType)continue;t.leader&&(c=this[_xfa_object.$searchNode](t.leader,t[_xfa_object.$getParent]()),c=c?c[0]:null),t.trailer&&(l=this[_xfa_object.$searchNode](t.trailer,t[_xfa_object.$getParent]()),l=l?l[0]:null),"pageArea"===t.targetType?(o=t[_xfa_object.$extra].target,i=1/0):t[_xfa_object.$extra].target?(o=t[_xfa_object.$extra].target,_=t[_xfa_object.$extra].index+1,i=1/0):i=t[_xfa_object.$extra].index}else if(this[_xfa_object.$extra].overflowNode){const t=this[_xfa_object.$extra].overflowNode;this[_xfa_object.$extra].overflowNode=null;const e=t[_xfa_object.$getExtra](),s=e.target;e.addLeader=null!==e.leader,e.addTrailer=null!==e.trailer,n(i);const r=i;if(i=1/0,s instanceof PageArea)o=s;else if(s instanceof ContentArea){const t=a.findIndex((t=>t===s));-1!==t?t>r?i=t-1:_=t:(o=s[_xfa_object.$getParent](),_=o.contentArea.children.findIndex((t=>t===s)))}}else n(i)}this[_xfa_object.$extra].pageNumber+=1,o&&(o[_xfa_object.$isUsable]()?o[_xfa_object.$extra].numberOfUse+=1:o=null),i=o||i[_xfa_object.$getNextPage]()}}}exports.Template=Template;class Text extends _xfa_object.ContentObject{constructor(t){super(TEMPLATE_NS_ID,"text"),this.id=t.id||"",this.maxChars=(0,_utils.getInteger)({data:t.maxChars,defaultValue:0,validate:t=>t>=0}),this.name=t.name||"",this.rid=t.rid||"",this.use=t.use||"",this.usehref=t.usehref||""}[_xfa_object.$acceptWhitespace](){return!0}[_xfa_object.$onChild](t){return t[_xfa_object.$namespaceId]===_namespaces.NamespaceIds.xhtml.id?(this[_xfa_object.$content]=t,!0):((0,_util.warn)(`XFA - Invalid content in Text: ${t[_xfa_object.$nodeName]}.`),!1)}[_xfa_object.$onText](t){this[_xfa_object.$content]instanceof _xfa_object.XFAObject||super[_xfa_object.$onText](t)}[_xfa_object.$finalize](){"string"===typeof this[_xfa_object.$content]&&(this[_xfa_object.$content]=this[_xfa_object.$content].replace(/\r\n/g,"\n"))}[_xfa_object.$getExtra](){return"string"===typeof this[_xfa_object.$content]?this[_xfa_object.$content].split(/[\u2029\u2028\n]/).reduce(((t,e)=>(e&&t.push(e),t)),[]).join("\n"):this[_xfa_object.$content][_xfa_object.$text]()}[_xfa_object.$toHTML](t){if("string"===typeof this[_xfa_object.$content]){const t=valueToHtml(this[_xfa_object.$content]).html;return this[_xfa_object.$content].includes("\u2029")?(t.name="div",t.children=[],this[_xfa_object.$content].split("\u2029").map((t=>t.split(/[\u2028\n]/).reduce(((t,e)=>(t.push({name:"span",value:e},{name:"br"}),t)),[]))).forEach((e=>{t.children.push({name:"p",children:e})}))):/[\u2028\n]/.test(this[_xfa_object.$content])&&(t.name="div",t.children=[],this[_xfa_object.$content].split(/[\u2028\n]/).forEach((e=>{t.children.push({name:"span",value:e},{name:"br"})}))),_utils.HTMLResult.success(t)}return this[_xfa_object.$content][_xfa_object.$toHTML](t)}}exports.Text=Text;class TextEdit extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"textEdit",!0),this.allowRichText=(0,_utils.getInteger)({data:t.allowRichText,defaultValue:0,validate:t=>1===t}),this.hScrollPolicy=(0,_utils.getStringOption)(t.hScrollPolicy,["auto","off","on"]),this.id=t.id||"",this.multiLine=(0,_utils.getInteger)({data:t.multiLine,defaultValue:"",validate:t=>0===t||1===t}),this.use=t.use||"",this.usehref=t.usehref||"",this.vScrollPolicy=(0,_utils.getStringOption)(t.vScrollPolicy,["auto","off","on"]),this.border=null,this.comb=null,this.extras=null,this.margin=null}[_xfa_object.$toHTML](t){const e=(0,_html_utils.toStyle)(this,"border","font","margin");let s;const i=this[_xfa_object.$getParent]()[_xfa_object.$getParent]();return""===this.multiLine&&(this.multiLine=i instanceof Draw?1:0),s=1===this.multiLine?{name:"textarea",attributes:{dataId:i[_xfa_object.$data]&&i[_xfa_object.$data][_xfa_object.$uid]||i[_xfa_object.$uid],fieldId:i[_xfa_object.$uid],class:["xfaTextfield"],style:e,"aria-label":ariaLabel(i)}}:{name:"input",attributes:{type:"text",dataId:i[_xfa_object.$data]&&i[_xfa_object.$data][_xfa_object.$uid]||i[_xfa_object.$uid],fieldId:i[_xfa_object.$uid],class:["xfaTextfield"],style:e,"aria-label":ariaLabel(i)}},_utils.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[s]})}}class Time extends _xfa_object.StringObject{constructor(t){super(TEMPLATE_NS_ID,"time"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[_xfa_object.$finalize](){const t=this[_xfa_object.$content].trim();this[_xfa_object.$content]=t?new Date(t):null}[_xfa_object.$toHTML](t){return valueToHtml(this[_xfa_object.$content]?this[_xfa_object.$content].toString():"")}}class TimeStamp extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"timeStamp"),this.id=t.id||"",this.server=t.server||"",this.type=(0,_utils.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}}class ToolTip extends _xfa_object.StringObject{constructor(t){super(TEMPLATE_NS_ID,"toolTip"),this.id=t.id||"",this.rid=t.rid||"",this.use=t.use||"",this.usehref=t.usehref||""}}class Traversal extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"traversal",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.traverse=new _xfa_object.XFAObjectArray}}class Traverse extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"traverse",!0),this.id=t.id||"",this.operation=(0,_utils.getStringOption)(t.operation,["next","back","down","first","left","right","up"]),this.ref=t.ref||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.script=null}get name(){return this.operation}[_xfa_object.$isTransparent](){return!1}}class Ui extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"ui",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.picture=null,this.barcode=null,this.button=null,this.checkButton=null,this.choiceList=null,this.dateTimeEdit=null,this.defaultUi=null,this.imageEdit=null,this.numericEdit=null,this.passwordEdit=null,this.signature=null,this.textEdit=null}[_xfa_object.$getExtra](){if(void 0===this[_xfa_object.$extra]){for(const t of Object.getOwnPropertyNames(this)){if("extras"===t||"picture"===t)continue;const e=this[t];if(e instanceof _xfa_object.XFAObject)return this[_xfa_object.$extra]=e,e}this[_xfa_object.$extra]=null}return this[_xfa_object.$extra]}[_xfa_object.$toHTML](t){const e=this[_xfa_object.$getExtra]();return e?e[_xfa_object.$toHTML](t):_utils.HTMLResult.EMPTY}}class Validate extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"validate",!0),this.formatTest=(0,_utils.getStringOption)(t.formatTest,["warning","disabled","error"]),this.id=t.id||"",this.nullTest=(0,_utils.getStringOption)(t.nullTest,["disabled","error","warning"]),this.scriptTest=(0,_utils.getStringOption)(t.scriptTest,["error","disabled","warning"]),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.message=null,this.picture=null,this.script=null}}class Value extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"value",!0),this.id=t.id||"",this.override=(0,_utils.getInteger)({data:t.override,defaultValue:0,validate:t=>1===t}),this.relevant=(0,_utils.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.arc=null,this.boolean=null,this.date=null,this.dateTime=null,this.decimal=null,this.exData=null,this.float=null,this.image=null,this.integer=null,this.line=null,this.rectangle=null,this.text=null,this.time=null}[_xfa_object.$setValue](t){const e=this[_xfa_object.$getParent]();if(e instanceof Field&&e.ui&&e.ui.imageEdit)return this.image||(this.image=new Image({}),this[_xfa_object.$appendChild](this.image)),void(this.image[_xfa_object.$content]=t[_xfa_object.$content]);const s=t[_xfa_object.$nodeName];if(null===this[s]){for(const t of Object.getOwnPropertyNames(this)){const e=this[t];e instanceof _xfa_object.XFAObject&&(this[t]=null,this[_xfa_object.$removeChild](e))}this[t[_xfa_object.$nodeName]]=t,this[_xfa_object.$appendChild](t)}else this[s][_xfa_object.$content]=t[_xfa_object.$content]}[_xfa_object.$text](){if(this.exData)return"string"===typeof this.exData[_xfa_object.$content]?this.exData[_xfa_object.$content].trim():this.exData[_xfa_object.$content][_xfa_object.$text]().trim();for(const t of Object.getOwnPropertyNames(this)){if("image"===t)continue;const e=this[t];if(e instanceof _xfa_object.XFAObject)return(e[_xfa_object.$content]||"").toString().trim()}return null}[_xfa_object.$toHTML](t){for(const e of Object.getOwnPropertyNames(this)){const s=this[e];if(s instanceof _xfa_object.XFAObject)return s[_xfa_object.$toHTML](t)}return _utils.HTMLResult.EMPTY}}exports.Value=Value;class Variables extends _xfa_object.XFAObject{constructor(t){super(TEMPLATE_NS_ID,"variables",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.boolean=new _xfa_object.XFAObjectArray,this.date=new _xfa_object.XFAObjectArray,this.dateTime=new _xfa_object.XFAObjectArray,this.decimal=new _xfa_object.XFAObjectArray,this.exData=new _xfa_object.XFAObjectArray,this.float=new _xfa_object.XFAObjectArray,this.image=new _xfa_object.XFAObjectArray,this.integer=new _xfa_object.XFAObjectArray,this.manifest=new _xfa_object.XFAObjectArray,this.script=new _xfa_object.XFAObjectArray,this.text=new _xfa_object.XFAObjectArray,this.time=new _xfa_object.XFAObjectArray}[_xfa_object.$isTransparent](){return!0}}class TemplateNamespace{static[_namespaces.$buildXFAObject](t,e){if(TemplateNamespace.hasOwnProperty(t)){const s=TemplateNamespace[t](e);return s[_xfa_object.$setSetAttributes](e),s}}static appearanceFilter(t){return new AppearanceFilter(t)}static arc(t){return new Arc(t)}static area(t){return new Area(t)}static assist(t){return new Assist(t)}static barcode(t){return new Barcode(t)}static bind(t){return new Bind(t)}static bindItems(t){return new BindItems(t)}static bookend(t){return new Bookend(t)}static boolean(t){return new BooleanElement(t)}static border(t){return new Border(t)}static break(t){return new Break(t)}static breakAfter(t){return new BreakAfter(t)}static breakBefore(t){return new BreakBefore(t)}static button(t){return new Button(t)}static calculate(t){return new Calculate(t)}static caption(t){return new Caption(t)}static certificate(t){return new Certificate(t)}static certificates(t){return new Certificates(t)}static checkButton(t){return new CheckButton(t)}static choiceList(t){return new ChoiceList(t)}static color(t){return new Color(t)}static comb(t){return new Comb(t)}static connect(t){return new Connect(t)}static contentArea(t){return new ContentArea(t)}static corner(t){return new Corner(t)}static date(t){return new DateElement(t)}static dateTime(t){return new DateTime(t)}static dateTimeEdit(t){return new DateTimeEdit(t)}static decimal(t){return new Decimal(t)}static defaultUi(t){return new DefaultUi(t)}static desc(t){return new Desc(t)}static digestMethod(t){return new DigestMethod(t)}static digestMethods(t){return new DigestMethods(t)}static draw(t){return new Draw(t)}static edge(t){return new Edge(t)}static encoding(t){return new Encoding(t)}static encodings(t){return new Encodings(t)}static encrypt(t){return new Encrypt(t)}static encryptData(t){return new EncryptData(t)}static encryption(t){return new Encryption(t)}static encryptionMethod(t){return new EncryptionMethod(t)}static encryptionMethods(t){return new EncryptionMethods(t)}static event(t){return new Event(t)}static exData(t){return new ExData(t)}static exObject(t){return new ExObject(t)}static exclGroup(t){return new ExclGroup(t)}static execute(t){return new Execute(t)}static extras(t){return new Extras(t)}static field(t){return new Field(t)}static fill(t){return new Fill(t)}static filter(t){return new Filter(t)}static float(t){return new Float(t)}static font(t){return new Font(t)}static format(t){return new Format(t)}static handler(t){return new Handler(t)}static hyphenation(t){return new Hyphenation(t)}static image(t){return new Image(t)}static imageEdit(t){return new ImageEdit(t)}static integer(t){return new Integer(t)}static issuers(t){return new Issuers(t)}static items(t){return new Items(t)}static keep(t){return new Keep(t)}static keyUsage(t){return new KeyUsage(t)}static line(t){return new Line(t)}static linear(t){return new Linear(t)}static lockDocument(t){return new LockDocument(t)}static manifest(t){return new Manifest(t)}static margin(t){return new Margin(t)}static mdp(t){return new Mdp(t)}static medium(t){return new Medium(t)}static message(t){return new Message(t)}static numericEdit(t){return new NumericEdit(t)}static occur(t){return new Occur(t)}static oid(t){return new Oid(t)}static oids(t){return new Oids(t)}static overflow(t){return new Overflow(t)}static pageArea(t){return new PageArea(t)}static pageSet(t){return new PageSet(t)}static para(t){return new Para(t)}static passwordEdit(t){return new PasswordEdit(t)}static pattern(t){return new Pattern(t)}static picture(t){return new Picture(t)}static proto(t){return new Proto(t)}static radial(t){return new Radial(t)}static reason(t){return new Reason(t)}static reasons(t){return new Reasons(t)}static rectangle(t){return new Rectangle(t)}static ref(t){return new RefElement(t)}static script(t){return new Script(t)}static setProperty(t){return new SetProperty(t)}static signData(t){return new SignData(t)}static signature(t){return new Signature(t)}static signing(t){return new Signing(t)}static solid(t){return new Solid(t)}static speak(t){return new Speak(t)}static stipple(t){return new Stipple(t)}static subform(t){return new Subform(t)}static subformSet(t){return new SubformSet(t)}static subjectDN(t){return new SubjectDN(t)}static subjectDNs(t){return new SubjectDNs(t)}static submit(t){return new Submit(t)}static template(t){return new Template(t)}static text(t){return new Text(t)}static textEdit(t){return new TextEdit(t)}static time(t){return new Time(t)}static timeStamp(t){return new TimeStamp(t)}static toolTip(t){return new ToolTip(t)}static traversal(t){return new Traversal(t)}static traverse(t){return new Traverse(t)}static ui(t){return new Ui(t)}static validate(t){return new Validate(t)}static value(t){return new Value(t)}static variables(t){return new Variables(t)}}exports.TemplateNamespace=TemplateNamespace;