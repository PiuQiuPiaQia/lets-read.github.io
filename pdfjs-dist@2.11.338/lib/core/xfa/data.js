"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataHandler=void 0;var _xfa_object=require("./xfa_object.js");class DataHandler{constructor(t,e){this.data=e,this.dataset=t.datasets||null}serialize(t){const e=[[-1,this.data[_xfa_object.$getChildren]()]];while(e.length>0){const a=e[e.length-1],[s,o]=a;if(s+1===o.length){e.pop();continue}const n=o[++a[0]],c=t.get(n[_xfa_object.$uid]);if(c)n[_xfa_object.$setValue](c);else{const e=n[_xfa_object.$getAttributes]();for(const a of e.values()){const e=t.get(a[_xfa_object.$uid]);if(e){a[_xfa_object.$setValue](e);break}}}const r=n[_xfa_object.$getChildren]();r.length>0&&e.push([-1,r])}const a=['<xfa:datasets xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/">'];if(this.dataset)for(const s of this.dataset[_xfa_object.$getChildren]())"data"!==s[_xfa_object.$nodeName]&&s[_xfa_object.$toString](a);return this.data[_xfa_object.$toString](a),a.push("</xfa:datasets>"),a.join("")}}exports.DataHandler=DataHandler;