"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDefaultAppearance=createDefaultAppearance,exports.parseDefaultAppearance=parseDefaultAppearance;var _util=require("../shared/util.js"),_colorspace=require("./colorspace.js"),_core_utils=require("./core_utils.js"),_evaluator=require("./evaluator.js"),_primitives=require("./primitives.js"),_stream=require("./stream.js");class DefaultAppearanceEvaluator extends _evaluator.EvaluatorPreprocessor{constructor(e){super(new _stream.StringStream(e))}parse(){const e={fn:0,args:[]},r={fontSize:0,fontName:"",fontColor:new Uint8ClampedArray(3)};try{while(1){if(e.args.length=0,!this.read(e))break;if(0!==this.savedStatesDepth)continue;const{fn:a,args:t}=e;switch(0|a){case _util.OPS.setFont:const[e,a]=t;e instanceof _primitives.Name&&(r.fontName=e.name),"number"===typeof a&&a>0&&(r.fontSize=a);break;case _util.OPS.setFillRGBColor:_colorspace.ColorSpace.singletons.rgb.getRgbItem(t,0,r.fontColor,0);break;case _util.OPS.setFillGray:_colorspace.ColorSpace.singletons.gray.getRgbItem(t,0,r.fontColor,0);break;case _util.OPS.setFillColorSpace:_colorspace.ColorSpace.singletons.cmyk.getRgbItem(t,0,r.fontColor,0);break}}}catch(a){(0,_util.warn)(`parseDefaultAppearance - ignoring errors: "${a}".`)}return r}}function parseDefaultAppearance(e){return new DefaultAppearanceEvaluator(e).parse()}function createDefaultAppearance({fontSize:e,fontName:r,fontColor:a}){let t;return t=a.every((e=>0===e))?"0 g":Array.from(a).map((e=>(e/255).toFixed(2))).join(" ")+" rg",`/${(0,_core_utils.escapePDFName)(r)} ${e} Tf ${t}`}