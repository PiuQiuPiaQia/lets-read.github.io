"use strict";var _worker_options=require("pdfjs/display/worker_options.js"),_is_node=require("pdfjs/shared/is_node.js"),_display_utils=require("pdfjs/display/display_utils.js"),_fetch_stream=require("pdfjs/display/fetch_stream.js"),_network=require("pdfjs/display/network.js"),_api=require("pdfjs/display/api.js"),_testreporter=require("./testreporter.js");async function initializePDFJS(e){if(await Promise.all(["pdfjs-test/unit/annotation_spec.js","pdfjs-test/unit/annotation_storage_spec.js","pdfjs-test/unit/api_spec.js","pdfjs-test/unit/bidi_spec.js","pdfjs-test/unit/cff_parser_spec.js","pdfjs-test/unit/cmap_spec.js","pdfjs-test/unit/colorspace_spec.js","pdfjs-test/unit/core_utils_spec.js","pdfjs-test/unit/crypto_spec.js","pdfjs-test/unit/custom_spec.js","pdfjs-test/unit/default_appearance_spec.js","pdfjs-test/unit/display_svg_spec.js","pdfjs-test/unit/display_utils_spec.js","pdfjs-test/unit/document_spec.js","pdfjs-test/unit/encodings_spec.js","pdfjs-test/unit/evaluator_spec.js","pdfjs-test/unit/function_spec.js","pdfjs-test/unit/fetch_stream_spec.js","pdfjs-test/unit/message_handler_spec.js","pdfjs-test/unit/metadata_spec.js","pdfjs-test/unit/murmurhash3_spec.js","pdfjs-test/unit/network_spec.js","pdfjs-test/unit/network_utils_spec.js","pdfjs-test/unit/parser_spec.js","pdfjs-test/unit/pdf_find_controller_spec.js","pdfjs-test/unit/pdf_find_utils_spec.js","pdfjs-test/unit/pdf_history_spec.js","pdfjs-test/unit/primitives_spec.js","pdfjs-test/unit/scripting_spec.js","pdfjs-test/unit/stream_spec.js","pdfjs-test/unit/struct_tree_spec.js","pdfjs-test/unit/type1_parser_spec.js","pdfjs-test/unit/ui_utils_spec.js","pdfjs-test/unit/unicode_spec.js","pdfjs-test/unit/util_spec.js","pdfjs-test/unit/writer_spec.js","pdfjs-test/unit/xfa_formcalc_spec.js","pdfjs-test/unit/xfa_parser_spec.js","pdfjs-test/unit/xfa_serialize_data_spec.js","pdfjs-test/unit/xfa_tohtml_spec.js","pdfjs-test/unit/xml_spec.js"].map((function(e){return import(e)}))),_is_node.isNodeJS)throw new Error("The `gulp unittest` command cannot be used in Node.js environments.");(0,_api.setPDFNetworkStreamFactory)((e=>(0,_display_utils.isValidFetchUrl)(e.url)?new _fetch_stream.PDFFetchStream(e):new _network.PDFNetworkStream(e))),_worker_options.GlobalWorkerOptions.workerSrc="../../build/generic/build/pdf.worker.js",e()}(function(){window.jasmine=jasmineRequire.core(jasmineRequire),jasmineRequire.html(jasmine);const e=jasmine.getEnv(),t=jasmineRequire.interface(jasmine,e);d(window,t);const s=new jasmine.QueryString({getWindowLocation(){return window.location}}),i={failFast:s.getParam("failFast"),oneFailurePerSpec:s.getParam("oneFailurePerSpec"),hideDisabled:s.getParam("hideDisabled")},n=s.getParam("random");void 0!==n&&""!==n&&(i.random=n);const r=s.getParam("seed");r&&(i.seed=r);const p=new jasmine.HtmlReporter({env:e,navigateWithNewParam(e,t){return s.navigateWithNewParam(e,t)},addToExistingQueryString(e,t){return s.fullStringWithNewParam(e,t)},getContainer(){return document.body},createElement(){return document.createElement.apply(document,arguments)},createTextNode(){return document.createTextNode.apply(document,arguments)},timer:new jasmine.Timer});if(e.addReporter(p),s.getParam("browser")){const t=new _testreporter.TestReporter(s.getParam("browser"));e.addReporter(t)}const a=new jasmine.HtmlSpecFilter({filterString(){return s.getParam("spec")}});function d(e,t){for(const s in t)e[s]=t[s];return e}function c(){initializePDFJS((function(){p.initialize(),e.execute()}))}i.specFilter=function(e){return a.matches(e.getFullName())},e.configure(i),jasmine.DEFAULT_TIMEOUT_INTERVAL=3e4,"interactive"===document.readyState||"complete"===document.readyState?c():document.addEventListener("DOMContentLoaded",c,!0)})();