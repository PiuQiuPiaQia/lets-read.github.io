"use strict";var _xml_parser=require("../../core/xml_parser.js"),_core_utils=require("../../core/core_utils.js");describe("XML",(function(){describe("searchNode",(function(){it("should search a node with a given path in xml tree",(function(){const e='\n      <a>\n          <b>\n              <c a="123"/>\n              <d/>\n              <e>\n                  <f>\n                      <g a="321"/>\n                  </f>\n              </e>\n              <c a="456"/>\n              <c a="789"/>\n              <h/>\n              <c a="101112"/>\n          </b>\n          <h>\n              <i/>\n              <j/>\n              <k>\n                  <g a="654"/>\n              </k>\n          </h>\n          <b>\n              <g a="987"/>\n              <h/>\n              <g a="121110"/>\n          </b>\n      </a>',n=new _xml_parser.SimpleXMLParser({hasAttributes:!0}).parseFromString(e).documentElement;function a(e){return n.searchNode((0,_core_utils.parseXFAPath)(e),0).attributes[0].value}expect(a("b.g")).toEqual("321"),expect(a("e.f.g")).toEqual("321"),expect(a("e.g")).toEqual("321"),expect(a("g")).toEqual("321"),expect(a("h.g")).toEqual("654"),expect(a("b[0].g")).toEqual("321"),expect(a("b[1].g")).toEqual("987"),expect(a("b[1].g[0]")).toEqual("987"),expect(a("b[1].g[1]")).toEqual("121110"),expect(a("c")).toEqual("123"),expect(a("c[1]")).toEqual("456"),expect(a("c[2]")).toEqual("789"),expect(a("c[3]")).toEqual("101112")})),it("should dump a xml tree",(function(){const e='\n      <a>\n          <b>\n              <c a="123"/>\n              <d>hello</d>\n              <e>\n                  <f>\n                      <g a="321"/>\n                  </f>\n              </e>\n              <c a="456"/>\n              <c a="789"/>\n              <h/>\n              <c a="101112"/>\n          </b>\n          <h>\n              <i/>\n              <j/>\n              <k>&#xA;W&#x1F602;rld&#xA;<g a="654"/>\n              </k>\n          </h>\n          <b>\n              <g a="987"/>\n              <h/>\n              <g a="121110"/>\n          </b>\n      </a>',n=new _xml_parser.SimpleXMLParser({hasAttributes:!0}).parseFromString(e).documentElement,a=[];n.dump(a),expect(a.join("").replace(/\s+/g,"")).toEqual(e.replace(/\s+/g,""))}))})),it("should parse processing instructions",(function(){const e="\n      <a>\n          <?foo bar?>\n          <?foo bar oof?>\n          <?foo?>\n      </a>",n=[];class a extends _xml_parser.XMLParserBase{onPi(e,a){n.push([e,a])}}(new a).parseXml(e),expect(n).toEqual([["foo","bar"],["foo","bar oof"],["foo",""]])}))}));