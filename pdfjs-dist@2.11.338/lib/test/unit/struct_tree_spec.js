"use strict";var _test_utils=require("./test_utils.js"),_api=require("../../display/api.js");function equalTrees(e,t){function r(t,n){if(expect(t.role).toEqual(n.role),expect(t.type).toEqual(n.type),expect("children"in t).toEqual("children"in n),t.children){expect(t.children.length).toEqual(n.children.length);for(let i=0;i<e.children.length;i++)r(t.children[i],n.children[i])}}return r(e,t)}describe("struct tree",(function(){describe("getStructTree",(function(){it("parses basic structure",(async function(){const e="structure_simple.pdf",t=(0,_test_utils.buildGetDocumentParams)(e),r=(0,_api.getDocument)(t),n=await r.promise,i=await n.getPage(1),c=await i.getStructTree();equalTrees({role:"Root",children:[{role:"Document",children:[{role:"H1",children:[{role:"NonStruct",children:[{type:"content"}]}]},{role:"P",children:[{role:"NonStruct",children:[{type:"content"}]}]},{role:"H2",children:[{role:"NonStruct",children:[{type:"content"}]}]},{role:"P",children:[{role:"NonStruct",children:[{type:"content"}]}]}]}]},c),await r.destroy()})),it("parses structure with marked content reference",(async function(){const e="issue6782.pdf",t=(0,_test_utils.buildGetDocumentParams)(e),r=(0,_api.getDocument)(t),n=await r.promise,i=await n.getPage(1),c=await i.getStructTree();equalTrees({role:"Root",children:[{role:"Part",children:[{role:"P",children:Array(27).fill({type:"content"})}]}]},c),await r.destroy()}))}))}));